/*! For license information please see requirements-bundle.js.LICENSE.txt */
(()=>{var e,t={9925:(e,t,n)=>{var r=n(9755);n(1388);const{Collapse:i,Modal:o}=n(4712);n(3333),n(6245),n(2993),n(944),n(3889),n(7312),n(2106),n(9570),n(7175);let s=n(5759);const a=n(9367),{SearchNode:l}=n(3024),{init_simulator_tab:c}=n(6714),{Textcomplete:u}=n(675),{TextareaEditor:d}=n(8207);let h,f,p=n(4070),m=new p([],{}),v=["","has_formalization"],g=["","Todo","Review","Done"],_=[":AND:",":OR:",":NOT:",":COL_INDEX_01:",":COL_INDEX_02:",":COL_INDEX_03:",":COL_INDEX_04:",":COL_INDEX_05:",":COL_INDEX_06:",":COL_INDEX_07:"],y=[""],b=[""],w=[],x=null,E=[!0,!0,!0,!0,!0,!0],C=[],O=JSON.parse(search_query),S={},k=[],L=sessionStorage.getItem("req_search_string"),T=sessionStorage.getItem("filter_status_string"),A=sessionStorage.getItem("filter_tag_string"),M=sessionStorage.getItem("filter_type_string");function I(){L=r("#search_bar").val().trim(),sessionStorage.setItem("req_search_string",L),h=l.fromQuery(L)}function N(){function e(e,t,n){return t.length>0&&(e.length>0&&(e=e.concat([":AND:"])),e=e.concat(function(e){return["("].concat(e,[")"])}(l.awesomeQuerySplitt0r(t,n)))),e}C=[],T=r("#status-filter-input").val(),A=r("#tag-filter-input").val(),M=r("#type-filter-input").val(),sessionStorage.setItem("filter_status_string",T),sessionStorage.setItem("filter_tag_string",A),sessionStorage.setItem("filter_type_string",M),C=e(C,M,4),C=e(C,A,5),C=e(C,T,6),f=l.searchArrayToTree(C)}function q(e){let t=[];return e.rows({selected:!0}).every((function(){let e=this.data();t.push(e.id)})),t}function D(){r(".requirement_var_group").each((function(){r(this).hide(),r(this).removeClass("type-error")})),r(".formalization_card").each((function(){const e=r(this).attr("title"),t=r("#requirement_scope"+e).val(),n=r("#requirement_pattern"+e).val();let i=r("#formalization_heading"+e),o=r("#requirement_var_group_p"+e),s=r("#requirement_var_group_q"+e),a=r("#requirement_var_group_r"+e),l=r("#requirement_var_group_s"+e),c=r("#requirement_var_group_t"+e),u=r("#requirement_var_group_u"+e),d=r("#requirement_var_group_v"+e);if(e in k)for(let t=0;t<k[e].length;t++)r("#formalization_var_"+k[e][t]+e).addClass("type-error"),i.addClass("type-error-head");else i.removeClass("type-error-head");switch(t){case"BEFORE":case"AFTER":o.show();break;case"BETWEEN":case"AFTER_UNTIL":o.show(),s.show()}Object.keys(_PATTERNS[n].env).forEach((function(e){switch(e){case"R":a.show();break;case"S":l.show();break;case"T":c.show();break;case"U":u.show();break;case"V":d.show()}}))}))}function P(e){let t="";return e.split(/([\s&<>!()=:\[\]{}\-|+*,])/g).forEach((function(e){b.includes(e)?t+='<a href="./variables?command=search&col=1&q=%5C%22'+e+'%5C%22" target="_blank"  title="Go to declaration of '+e+'" class="alert-link">'+e+"</a>":t+=s.escapeHtml(e)})),t}function j(){r(".formalization_card").each((function(){const e=r(this).attr("title");let t="",n=r("#current_formalization_textarea"+e);const i=r("#requirement_scope"+e).find("option:selected").text().replace(/\s\s+/g," "),o=r("#requirement_pattern"+e).find("option:selected").text().replace(/\s\s+/g," ");"None"!==i&&"None"!==o&&(t=i+", "+o+".");let s=r("#formalization_var_p"+e).val(),l=r("#formalization_var_q"+e).val(),c=r("#formalization_var_r"+e).val(),u=r("#formalization_var_s"+e).val(),d=r("#formalization_var_t"+e).val(),h=r("#formalization_var_u"+e).val(),f=r("#formalization_var_v"+e).val();s.length>0&&(t=t.replace(/{P}/g,P(s))),l.length>0&&(t=t.replace(/{Q}/g,P(l))),c.length>0&&(t=t.replace(/{R}/g,P(c))),u.length>0&&(t=t.replace(/{S}/g,P(u))),d.length>0&&(t=t.replace(/{T}/g,P(d))),h.length>0&&(t=t.replace(/{U}/g,P(h))),f.length>0&&(t=t.replace(/{V}/g,P(f))),n.html(t),a.update(n)})),r("#requirement_modal").data({unsaved_changes:!0,updated_formalization:!0})}function R(e){const t=new u(new d(e),[{match:/(|\s|[!=&\|>]+)(\w+)$/,index:2,search:function(e,t,n){let r=function(e){return m.search(e)}(e),i=[];for(let e=0;e<Math.min(10,r.length);e++)i.push(b[r[e]]);t(i)},replace:function(e){return"$1"+e+" "}}],{dropdown:{maxCount:10,style:{zIndex:"9999"},item:{className:"dropdown-item",activeClassName:"dropdown-item active"}}});r(e).on("blur click",(function(e){t.hide()}))}function z(){r(".reqirement-variable").each((function(){R(this)}))}function F(e){if(-1===e)return void alert("Requirement not found.");let t=r("#requirements_table").DataTable().row(e).data(),n=r(".modal-content");o.getOrCreateInstance("#requirement_modal").show(),n.LoadingOverlay("show"),r("#formalization_accordion").html(""),r("#requirement_tag_field").data("bs.tokenfield").$input.autocomplete({source:v}),r.get("api/req/get",{id:t.id,row_idx:e},(function(t){if(!1===t.success)return void alert("Could Not load the Requirement: "+t.errormsg);r("#requirement_id").val(t.id),r("#modal_associated_row_index").val(e),b=t.available_vars,b=b.concat(t.additional_static_available_vars),k=t.type_inference_errors,m=new p(b,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:12,minMatchCharLength:1,keys:void 0}),r("#requirement_modal_title").html(t.id+": "+t.type),r("#description_textarea").text(t.desc).change(),r("#add_guess_description").text(t.desc).change(),r("#formalization_accordion").html(t.formalizations_html),r("#requirement_scope").val(t.scope),r("#requirement_pattern").val(t.pattern),r("#tags_comments_table").find("tr:gt(0)").remove(),r("#requirement_tag_field").tokenfield("setTokens",t.tags),r("#tags_comments_table tr:gt(0)").each((function(){let e=r(this).find("td:eq(0)").text();r(this).find("textarea:eq(0)").val(t.tags_comments[e])})),r("#requirement_status").val(t.status);let n=r("#csv_content_accordion");n.html("");let i=t.csv_data;for(const e in i)if(i.hasOwnProperty(e)){const t=i[e];n.append("<p><strong>"+e+":</strong>"+t+"</p>")}let o=r("#show_revision_diff");r.isEmptyObject(t.revision_diff)?o.hide():o.show();let s=r("#revision_diff_accordion");s.html("");let a=t.revision_diff;for(const e in a)if(a.hasOwnProperty(e)){const t=a[e];s.append("<p><strong>"+e+":</strong><pre>"+t+"</pre></p>")}let l=r("#used_variables_accordion");l.html(""),t.vars.forEach((function(e){let t="?command=search&col=1&q=%5C%22"+e+"%5C%22";l.append('<span class="badge bg-info"><a href="./variables'+t+'" target="_blank">'+e+"</a></span>&numsp;")}))})).done((function(){D(),z(),j(),r("#requirement_modal").data({unsaved_changes:!1,updated_formalization:!1}),n.LoadingOverlay("hide",!0)}))}function W(){let e=r("#requirements_table").DataTable(),t=[];r.each(e.columns().visible(),(function(e,n){!1===n?(r("#col_toggle_button_"+e).removeClass("btn-info").addClass("btn-secondary"),t.push(!1)):(r("#col_toggle_button_"+e).removeClass("btn-secondary").addClass("btn-info"),t.push(!0))})),E=t}function H(e){let t=r("#requirements_table").DataTable({language:{emptyTable:"Loading data."},paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},order:[[1,"asc"]],pageLength:50,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/req/gets",deferRender:!0,columnDefs:e,createdRow:function(e,t){"Heading"===t.type&&r(e).addClass("bg-primary"),"Information"===t.type&&r(e).addClass("table-info"),"Requirement"===t.type&&r(e).addClass("table-warning"),"not set"===t.type&&r(e).addClass("table-light")},infoCallback:function(e,t,n,i,o){let s=this.api().page.info();r("#clear-all-filters-text").html("Showing "+o+"/"+s.recordsTotal+". Clear all.");let a="Showing "+t+" to "+n+" of "+o+" entries";return a+=" (filtered from "+s.recordsTotal+" total entries).",a},initComplete:function(){r("#search_bar").val(L),r("#type-filter-input").val(M),r("#tag-filter-input").val(A),r("#status-filter-input").val(T);let e=this.api();!function(e){r("#requirements_table").find("tbody").on("click","a",(function(t){t.preventDefault(),F(e.row(r(this).closest("tr")).index())}))}(e),function(e){e.columns().every((function(t){t>0&&e.column(t).header().append(" ("+t+")")})),r("#save_requirement_modal").click((function(){!function(e){let t=r(".modal-content");t.LoadingOverlay("show");const n=r("#requirement_id").val(),i=r("#requirement_status").val(),s=r("#requirement_modal").data("updated_formalization"),a=parseInt(r("#modal_associated_row_index").val());let l={};r(".formalization_card").each((function(){let e={};e.id=r(this).attr("title"),r(this).find("select").each((function(){r(this).hasClass("scope_selector")&&(e.scope=r(this).val()),r(this).hasClass("pattern_selector")&&(e.pattern=r(this).val())})),e.expression_mapping={},r(this).find("textarea.reqirement-variable").each((function(){""!==r(this).attr("title")&&(e.expression_mapping[r(this).attr("title")]=r(this).val())})),l[e.id]=e}));let c=new Map;r("#tags_comments_table tr:gt(0)").each((function(){let e=r(this).find("td:eq(0)").text(),t=r(this).find("textarea:eq(0)").val();c.set(e,t)})),r.post("api/req/update",{id:n,row_idx:a,update_formalization:s,tags:JSON.stringify(Object.fromEntries(c)),status:i,formalizations:JSON.stringify(l)},(function(n){if(t.LoadingOverlay("hide",!0),!1===n.success)alert(n.errormsg);else{e.row(a).data(n),r("#requirement_modal").data("unsaved_changes",!1);const t=document.querySelector("#requirement_modal");o.getOrCreateInstance(t).hide()}})).done((function(){$()}))}(e)})),r("#search_bar").keypress((function(t){13===t.which&&(I(),e.draw())})),r("#type-filter-input").autocomplete({minLength:0,source:y,delay:100}),r("#status-filter-input").autocomplete({minLength:0,source:g,delay:100}),r("#tag-filter-input").autocomplete({minLength:0,source:v,delay:100}),r("#tag-filter-input, #status-filter-input, #type-filter-input").on("focus",(function(){r(this).keydown()})).on("keypress",(function(t){13===t.which&&(N(),e.draw())})),r("#table-filter-toggle").click((function(){r("#tag-filter-input").autocomplete({source:v}),r("#type-filter-input").autocomplete({source:y})})),r(".clear-all-filters").click((function(){r("#status-filter-input").val("").effect("highlight",{color:"green"},500),r("#tag-filter-input").val("").effect("highlight",{color:"green"},500),r("#type-filter-input").val("").effect("highlight",{color:"green"},500),r("#search_bar").val("").effect("highlight",{color:"green"},500),N(),I(),e.draw()})),r("#gen-req-from-selection").click((function(){let t=[];e.rows({search:"applied"}).every((function(){let e=this.data();t.push(e.id)})),r("#selected_requirement_ids").val(JSON.stringify(t)),r("#generate_req_form").submit()})),r("#gen-csv-from-selection").click((function(){let t=[];e.rows({search:"applied"}).every((function(){let e=this.data();t.push(e.id)})),r("#selected_csv_requirement_ids").val(JSON.stringify(t)),r("#generate_csv_form").submit()})),r("#gen-xls-from-selection").click((function(){let t=[];e.rows({search:"applied"}).every((function(){let e=this.data();t.push(e.id)})),r("#selected_xls_requirement_ids").val(JSON.stringify(t)),r("#generate_xls_form").submit()})),r(".column-toggle-button").on("click",(function(t){t.preventDefault();let n=e.column(r(this).attr("data-column"));n.visible(!n.visible()),W()})),r(".reset-column-toggle").on("click",(function(t){t.preventDefault(),e.columns(".default-col").visible(!0),e.columns(".extra-col").visible(!1),W()})),W(),r(".select-all-button").on("click",(function(){r(this).hasClass("btn-secondary")?e.rows({page:"current"}).select():e.rows({page:"current"}).deselect(),r(".select-all-button").toggleClass("btn-secondary btn-primary")})),e.on("user-select",(function(){let e=r(".select-all-button");e.removeClass("btn-primary"),e.addClass("btn-secondary ")})),r("#multi-add-tag-input, #multi-remove-tag-input").autocomplete({minLength:0,source:v,delay:100}).on("focus",(function(){r(this).keydown()})).val(""),r("#multi-set-status-input").autocomplete({minLength:0,source:g,delay:100}).on("focus",(function(){r(this).keydown()})).val(""),r(".apply-multi-edit").click((function(){!function(e){let t=r("body");t.LoadingOverlay("show");let n=r("#multi-add-tag-input").val().trim(),i=r("#multi-remove-tag-input").val().trim(),o=r("#multi-set-status-input").val().trim(),s=q(e);r.post("api/req/multi_update",{add_tag:n,remove_tag:i,set_status:o,selected_ids:JSON.stringify(s)},(function(e){t.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}(e)})),r(".add_top_guess_button").bootstrapConfirmButton({onConfirm:function(){!function(e){let t=r("body");t.LoadingOverlay("show");let n=q(e),i=r("#top_guess_append_mode").val();r.post("api/req/multi_add_top_guess",{selected_ids:JSON.stringify(n),insert_mode:i},(function(e){t.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}(e)}})}(e),s.process_url_query(O),I(),N(),r.fn.dataTable.ext.search.push((function(e,t){return function(e){return h.evaluate(e,E)&&f.evaluate(e,E)}(t)})),this.api().draw()}});new r.fn.dataTable.ColReorder(t,{})}function U(){let e=r("#requirement_modal");r("#requirement_tag_field").tokenfield({autocomplete:{source:v,delay:100},showAutocompleteOnFocus:!0}).change((function(){e.data("unsaved_changes",!0)})),r("#requirement_status").change((function(){r("#requirement_modal").data("unsaved_changes",!0)})),e[0].addEventListener("hide.bs.modal",(function(e){!function(e){!0===r("#requirement_modal").data("unsaved_changes")&&!0!==confirm("You have unsaved changes, do you really want to close?")&&e.preventDefault()}(e)})),r(document).keyup((function(e){if(r(".modal:visible").length&&27===e.keyCode){let e=r("input[type=text], textarea, select").filter(":focus");0===e.length?r("#requirement_guess_modal:visible").length?o.getOrCreateInstance("#requirement_guess_modal").hide():o.getOrCreateInstance("#requirement_modal").hide():e.each((function(){r(this).blur()}))}})),e.on("hidden.bs.modal",(function(){r("#requirement_tag_field").val(""),r("#requirement_tag_field-tokenfield").val("")})),r("#add_formalization").click((function(){!function(){let e=r(".modal-content");e.LoadingOverlay("show");const t=r("#requirement_id").val();r.post("api/req/new_formalization",{id:t},(function(t){if(e.LoadingOverlay("hide",!0),!1===t.success)alert(t.errormsg);else{let e=r(t.html);e.find(".reqirement-variable").each((function(){R(this)})),e.appendTo("#formalization_accordion")}})).done((function(){D(),j(),$()}))}()})),r("#add_gussed_formalization").click((function(){!function(){let e=r("#requirement_guess_modal"),t=r("#available_guesses_cards"),n=r(".modal-content"),i=r("#requirement_id").val();function s(e){let n='<div class="card">                    <div class="pl-1 pr-1">                        <p>'+e.string+'                        </p>                    </div>                    <button type="button" class="btn btn-success btn-sm add_guess"                            title="Add formalization"                            data-scope="'+e.scope+'"                            data-pattern="'+e.pattern+"\"                            data-mapping='"+JSON.stringify(e.mapping)+"'>                        <strong>+ Add this formalization +</strong>                    </button>                </div>";t.append(n)}new o(e,{keyboard:!1}),o.getOrCreateInstance(e).show(),n.LoadingOverlay("show"),t.html(""),r.post("api/req/get_available_guesses",{requirement_id:i},(function(e){if(!1===e.success)alert(e.errormsg);else for(let t=0;t<e.available_guesses.length;t++)s(e.available_guesses[t])})).done((function(){r(".add_guess").click((function(){!function(e,t,n){let i=r(".modal-content");i.LoadingOverlay("show");let o=r("#requirement_id").val();r.post("api/req/add_formalization_from_guess",{requirement_id:o,scope:e,pattern:t,mapping:JSON.stringify(n)},(function(e){i.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):r("#formalization_accordion").append(e.html)})).done((function(){D(),j(),z(),$()}))}(r(this).data("scope"),r(this).data("pattern"),r(this).data("mapping"))})),n.LoadingOverlay("hide",!0)}))}()})),r(".modal").on("hidden.bs.modal",(function(){r(".modal:visible").length?r("body").addClass("modal-open"):r("textarea").each((function(){a.destroy(r(this))}))})),r("#formalization_accordion").on("shown.bs.collapse",".card",(function(){r(this).find("textarea").each((function(){a(r(this)),a.update(r(this))}))})),D()}function $(){r.get("api/logs/get","",(function(e){r("#log_textarea").html(e)})).done((function(){r(".req_direct_link").click((function(){F(function(e){let t=r("#requirements_table").DataTable(),n=-1;return t.column(2).data().filter((function(t,r){return String(t)===String(e)&&(n=r,!0)})),n}(r(this).data("rid")))})),r("#log_textarea").scrollTop(1e5)}))}function B(){r.get("api/report/get",{},(function(e){if(!1===e.success)alert(e.errormsg);else{let t="";w=e.data,r.each(e.data,(function(e,n){t+=`<div class="card border-primary">\n                              <div class="card-body">\n                                <h5 class="card-title">${n.name}</h5>\n                                <h6 class="card-subtitle mb-2 text-muted">Query</h6>\n                                <p class="card-text report-results">${n.queries}</p>\n                                <h6 class="card-subtitle mb-2 text-muted">Matches for queries</h6>\n                                <p class="card-text report-results">${n.results}</p>\n                                <a href="#" class="card-link open-report" data-id="${e}">\n                                    Edit (reevaluate) Report.\n                                </a>\n                                <a href="#" class="card-link delete-report" data-id="${e}">Delete Report.</a>\n                              </div>\n                            </div>`})),r("#available_reports").html(t)}}))}function Q(e=!1){let t=r("#report_query_textarea"),n=r("#report_results_textarea"),i=r("#report_modal_title"),s=r("#report_name"),a="",l="",c="",u=-1;r("#report_modal"),!1!==e&&(u=e.attr("data-id"),a=w[u].queries,l=w[u].results,c=w[u].name),t.val(a).change(),n.val(l).change(),s.val(c).change(),i.html(c),r("#save_report").attr("data-id",u),o.getOrCreateInstance(document.querySelector("#report_modal")).show()}r(document).ready((function(){r.get("api/meta/get","",(function(e){S=e.tag_colors,x=e.available_search_strings;let t=r("#search_bar");new Awesomplete(t[0],{filter:function(e,t){let n=!1;return(t.split(":").length-1)%2==1&&(n=Awesomplete.FILTER_CONTAINS(e,t.match(/[^:]*$/)[0])),n},item:function(e,t){return Awesomplete.ITEM(e,t.match(/(:)([\S]*$)/)[2])},replace:function(e){const t=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=t+e},list:_,minChars:1,autoFirst:!0})})),function(){let e=[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{targets:[1],data:"pos"},{targets:[2],data:"id",render:function(e){return'<a href="#">'+s.escapeHtml(e)+"</a>"}},{targets:[3],data:"desc",render:function(e){return'<div class="white-space-pre">'+s.escapeHtml(e)+"</div>"}},{targets:[4],data:"type",render:function(e){return y.indexOf(e)<=-1&&y.push(e),s.escapeHtml(e)}},{targets:[5],data:"tags",render:function(e,t,n){let i="";return r(e).each((function(e,t){var n;t.length>0&&(i+='<span class="badge" style="background-color: '+(n=t,(S.hasOwnProperty(n)?S[n]:"var(--bs-info)")+'">')+s.escapeHtml(t)+"</span></br> ")})),i}},{targets:[6],data:"status",render:function(e){return'<span class="badge bg-info">'+e+"</span></br>"}},{targets:[7],data:"formal",render:function(e,t,n){let i="";return n.formal.length>0&&r(e).each((function(e,t){t.length>0&&(i+='<div class="white-space-pre">'+s.escapeHtml(t)+"</div>")})),i}}];r.get("api/table/colum_defs","",(function(t){const n=t.col_defs.length;for(let r=0;r<n;r++)e.push({targets:[parseInt(t.col_defs[r].target)],data:t.col_defs[r].csv_name,visible:!1,searchable:!0})})).done((function(){H(e)}))}(),U(),$(),function(){r("#add-new-report").click((function(){Q()})),r("#eval_report").click((function(){!function(){let e=r("body");e.LoadingOverlay("show");const t=r("#report_query_textarea").val().split("\n");let n=r("#requirements_table").DataTable(),i="";const o=/^(:NAME:)(`(\w+)`)(.*)/;try{r.each(t,(function(e,t){let r=o.exec(t);null!=r&&(t=r[4],e=r[3]),h=l.fromQuery(t),n.draw();let s=n.page.info();i+=`"${e}":\t${s.recordsDisplay}\n`})),r("#report_results_textarea").val(i).change(),I(),n.draw()}catch(e){alert(e)}e.LoadingOverlay("hide",!0)}()})),r("#save_report").click((function(){!function(){let e=r("body");e.LoadingOverlay("show"),r.post("api/report/set",{report_querys:r("#report_query_textarea").val(),report_results:r("#report_results_textarea").val(),report_name:r("#report_name").val(),report_id:r("#save_report").attr("data-id")},(function(t){e.LoadingOverlay("hide",!0),!1===t.success&&alert(t.errormsg),B()}))}()}));let e=r("#available_reports");e.on("click",".open-report",(function(){Q(r(this))})),e.on("click",".delete-report",(function(){!function(e){r.ajax({type:"DELETE",url:"api/report/delete",data:{report_id:e},success:function(e){!1===e.success&&alert(e.errormsg),B()}})}(r(this).attr("data-id"))})),r("#report_name").change((function(){r("#report_modal_title").html(r(this).val())})),B()}(),c(),r.ajax({type:"GET",url:"api/tag/get",success:function(e){for(tag of e.data)v.push(tag.name)}});let e=r("body");r("body").bootstrapConfirmButton({selector:".delete_formalization",onConfirm:function(){!function(e,t){let n=r(".modal-content");n.LoadingOverlay("show");const i=r("#requirement_id").val();r.post("api/req/del_formalization",{requirement_id:i,formalization_id:e},(function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):t.remove()})).done((function(){D(),j(),$()}))}(r(this).attr("name"),r(this).closest(".accordion-item"))}}),e.on("click",".delete_formalization1",(function(){console.log("delete"),bootstrapConfirmation({yesCallBack:function(){console.log("yes")},noCallBack:function(){console.log("no")},config:{closeIcon:!0,message:"This is an example.",title:"Example",no:{class:"btn btn-danger",text:"No"},yes:{class:"btn btn-success",text:"Yes"}}})})),e.on("change",".formalization_selector, .reqirement-variable, .req_var_type",(function(){j()})),e.on("change",".formalization_selector",(function(){D()})),document.getElementById("requirement_modal").addEventListener("shown.bs.modal",(function(){r(this).find("textarea").each((function(){a(r(this)),a.update(r(this))}))})),e.on("change focus","textarea",(function(){a(r(this)),a.update(r(this))})),r("#requirement_tag_field").on("tokenfield:createtoken",(function(e){let t=r(this).tokenfield("getTokens");for(const n of t)if(e.attrs.value===n.value)return!1})).on("tokenfield:createdtoken",(function(e){var t;t="<tr><td>"+e.attrs.value+"</td><td><textarea rows='1' class='form-control w-100' type='text'></textarea></td>",r("#tags_comments_table tbody").append(t)})).on("tokenfield:removedtoken",(function(e){r("#tags_comments_table tr:gt(0)").each((function(){let t=r(this);r(this).find("td:eq(0)").text()===e.attrs.value&&t.remove()}))}))}))},6714:(e,t,n)=>{var r=n(9755);const{init_simulator_modal:i}=n(6107);function o(e,t,n=!1){if(id=t.simulator_id,name=t.simulator_name,n)return e.prepend(r("<option></option>").val(id).text(name+" ("+id+")")),void e.prop("selectedIndex",0);e.empty(),r.each(t.simulators,(function(t,n){e.prepend(r("<option></option>").val(t).text(n+" ("+t+")"))}))}function s(e){let t=[];return e.DataTable().rows({selected:!0}).every((function(){t.push(this.data().id)})),t}t.init_simulator_tab=function(){const e=r("#simulator-tab-name-input"),t=r("#simulator-tab-select"),n=r("#simulator-tab-create-btn"),a=r("#simulator-tab-delete-btn"),l=r("#simulator-tab-start-btn"),c=r("#requirements_table");r.ajax({type:"GET",url:"simulator",async:!1,data:{command:"get_simulators"},success:function(e){!1!==e.success?o(t,e.data):alert(e.errormsg)}}),n.click((function(){r.ajax({type:"POST",url:"simulator",async:!1,data:{command:"create_simulator",simulator_name:e.val()||"unnamed",requirement_ids:JSON.stringify(s(c))},success:function(e){!1!==e.success?o(t,e.data,!0):alert(e.errormsg)}})})),a.click((function(){r.ajax({type:"DELETE",url:"simulator",async:!1,data:{command:"delete_simulator",simulator_id:t.val()},success:function(e){!1!==e.success?o(t,e.data):alert(e.errormsg)}})})),l.click((function(){r.ajax({type:"GET",url:"simulator",async:!1,data:{command:"start_simulator",simulator_id:t.val()},success:function(e){!1!==e.success?i(e.data):alert(e.errormsg)}})}))}},2613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completer=void 0;const r=n(6729),i=n(9200);class o extends r.EventEmitter{constructor(e){super(),this.handleQueryResult=e=>{this.emit("hit",{searchResults:e})},this.strategies=e.map((e=>new i.Strategy(e)))}destroy(){return this.strategies.forEach((e=>e.destroy())),this}run(e){for(const t of this.strategies)if(t.execute(e,this.handleQueryResult))return;this.handleQueryResult([])}}t.Completer=o},8707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=t.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME=t.DEFAULT_DROPDOWN_CLASS_NAME=t.DEFAULT_DROPDOWN_PLACEMENT=t.DEFAULT_DROPDOWN_MAX_COUNT=void 0;const r=n(6729),i=n(5320);t.DEFAULT_DROPDOWN_MAX_COUNT=10,t.DEFAULT_DROPDOWN_PLACEMENT="auto",t.DEFAULT_DROPDOWN_CLASS_NAME="dropdown-menu textcomplete-dropdown",t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME="textcomplete-item",t.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=`${t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME} active`;class o extends r.EventEmitter{constructor(e,t){super(),this.el=e,this.option=t,this.shown=!1,this.items=[],this.activeIndex=null}static create(e){const n=document.createElement("ul");n.className=e.className||t.DEFAULT_DROPDOWN_CLASS_NAME,Object.assign(n.style,{display:"none",position:"absolute",zIndex:"1000"},e.style);const r=e.parent||document.body;return null==r||r.appendChild(n),new o(n,e)}render(e,n){const r=(0,i.createCustomEvent)("render",{cancelable:!0});return this.emit("render",r),r.defaultPrevented?this:(this.clear(),0===e.length?this.hide():(this.items=e.slice(0,this.option.maxCount||t.DEFAULT_DROPDOWN_MAX_COUNT).map(((e,t)=>{var n;return new s(this,t,e,(null===(n=this.option)||void 0===n?void 0:n.item)||{})})),this.setStrategyId(e[0]).renderEdge(e,"header").renderItems().renderEdge(e,"footer").show().setOffset(n).activate(0),this.emit("rendered",(0,i.createCustomEvent)("rendered")),this))}destroy(){var e;return this.clear(),null===(e=this.el.parentNode)||void 0===e||e.removeChild(this.el),this}select(e){const t={searchResult:e.searchResult},n=(0,i.createCustomEvent)("select",{cancelable:!0,detail:t});return this.emit("select",n),n.defaultPrevented||(this.hide(),this.emit("selected",(0,i.createCustomEvent)("selected",{detail:t}))),this}show(){if(!this.shown){const e=(0,i.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",e),e.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,i.createCustomEvent)("shown"))}return this}hide(){if(this.shown){const e=(0,i.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",e),e.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.clear(),this.emit("hidden",(0,i.createCustomEvent)("hidden"))}return this}clear(){return this.items.forEach((e=>e.destroy())),this.items=[],this.el.innerHTML="",this.activeIndex=null,this}up(e){return this.shown?this.moveActiveItem("prev",e):this}down(e){return this.shown?this.moveActiveItem("next",e):this}moveActiveItem(e,t){if(null!=this.activeIndex){const n="next"===e?this.getNextActiveIndex():this.getPrevActiveIndex();null!=n&&(this.activate(n),t.preventDefault())}return this}activate(e){return this.activeIndex!==e&&(null!=this.activeIndex&&this.items[this.activeIndex].deactivate(),this.activeIndex=e,this.items[e].activate()),this}isShown(){return this.shown}getActiveItem(){return null!=this.activeIndex?this.items[this.activeIndex]:null}setOffset(e){const n=document.documentElement;if(n){const r=this.el.offsetWidth;if(e.left){const t=this.option.dynamicWidth?n.scrollWidth:n.clientWidth;e.left+r>t&&(e.left=t-r),this.el.style.left=`${e.left}px`}else e.right&&(e.right-r<0&&(e.right=0),this.el.style.right=`${e.right}px`);let i=!1;const o=this.option.placement||t.DEFAULT_DROPDOWN_PLACEMENT;if("auto"===o){const t=this.items.length*e.lineHeight;i=null!=e.clientTop&&e.clientTop+t>n.clientHeight}"top"===o||i?(this.el.style.bottom=`${n.clientHeight-e.top+e.lineHeight}px`,this.el.style.top="auto"):(this.el.style.top=`${e.top}px`,this.el.style.bottom="auto")}return this}getNextActiveIndex(){if(null==this.activeIndex)throw new Error;return this.activeIndex<this.items.length-1?this.activeIndex+1:this.option.rotate?0:null}getPrevActiveIndex(){if(null==this.activeIndex)throw new Error;return 0!==this.activeIndex?this.activeIndex-1:this.option.rotate?this.items.length-1:null}renderItems(){const e=document.createDocumentFragment();for(const t of this.items)e.appendChild(t.el);return this.el.appendChild(e),this}setStrategyId(e){const t=e.getStrategyId();return t&&(this.el.dataset.strategy=t),this}renderEdge(e,t){const n=this.option[t],r=document.createElement("li");return r.className=`textcomplete-${t}`,r.innerHTML="function"==typeof n?n(e.map((e=>e.data))):n||"",this.el.appendChild(r),this}}t.Dropdown=o;class s{constructor(e,n,r,i){this.dropdown=e,this.index=n,this.searchResult=r,this.props=i,this.active=!1,this.onClick=e=>{e.preventDefault(),this.dropdown.select(this)},this.className=this.props.className||t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME,this.activeClassName=this.props.activeClassName||t.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME;const o=document.createElement("li");o.className=this.active?this.activeClassName:this.className;const s=document.createElement("span");s.tabIndex=-1,s.innerHTML=this.searchResult.render(),o.appendChild(s),o.addEventListener("click",this.onClick),this.el=o}destroy(){var e;const t=this.el;return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.removeEventListener("click",this.onClick,!1),this}activate(){return this.active||(this.active=!0,this.el.className=this.activeClassName,this.dropdown.el.scrollTop=this.el.offsetTop),this}deactivate(){return this.active&&(this.active=!1,this.el.className=this.className),this}}},8685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;const r=n(6729),i=n(5320);class o extends r.EventEmitter{destroy(){return this}applySearchResult(e){throw new Error("Not implemented.")}getCursorOffset(){throw new Error("Not implemented.")}getBeforeCursor(){throw new Error("Not implemented.")}emitMoveEvent(e){const t=(0,i.createCustomEvent)("move",{cancelable:!0,detail:{code:e}});return this.emit("move",t),t}emitEnterEvent(){const e=(0,i.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",e),e}emitChangeEvent(){const e=(0,i.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",e),e}emitEscEvent(){const e=(0,i.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",e),e}getCode(e){return 9===e.keyCode||13===e.keyCode?"ENTER":27===e.keyCode?"ESC":38===e.keyCode?"UP":40===e.keyCode||78===e.keyCode&&e.ctrlKey?"DOWN":80===e.keyCode&&e.ctrlKey?"UP":"OTHER"}}t.Editor=o},6933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchResult=void 0;const n=/\$&/g,r=/\$(\d)/g;t.SearchResult=class{constructor(e,t,n){this.data=e,this.term=t,this.strategy=n}getReplacementData(e){let t=this.strategy.replace(this.data);if(null==t)return null;let i="";Array.isArray(t)&&(i=t[1],t=t[0]);const o=this.strategy.match(e);if(null==o||null==o.index)return null;const s=t.replace(n,o[0]).replace(r,((e,t)=>o[parseInt(t)]));return{start:o.index,end:o.index+o[0].length,beforeCursor:s,afterCursor:i}}replace(e,t){const n=this.getReplacementData(e);if(null!==n)return t=n.afterCursor+t,[[e.slice(0,n.start),n.beforeCursor,e.slice(n.end)].join(""),t]}render(){return this.strategy.renderTemplate(this.data,this.term)}getStrategyId(){return this.strategy.getId()}}},9200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strategy=t.DEFAULT_INDEX=void 0;const r=n(6933);t.DEFAULT_INDEX=1,t.Strategy=class{constructor(e){this.props=e,this.cache={}}destroy(){return this.cache={},this}replace(e){return this.props.replace(e)}execute(e,n){var i;const o=this.matchWithContext(e);if(!o)return!1;const s=o[null!==(i=this.props.index)&&void 0!==i?i:t.DEFAULT_INDEX];return this.search(s,(e=>{n(e.map((e=>new r.SearchResult(e,s,this))))}),o),!0}renderTemplate(e,t){if(this.props.template)return this.props.template(e,t);if("string"==typeof e)return e;throw new Error(`Unexpected render data type: ${typeof e}. Please implement template parameter by yourself`)}getId(){return this.props.id||null}match(e){return"function"==typeof this.props.match?this.props.match(e):e.match(this.props.match)}search(e,t,n){this.props.cache?this.searchWithCach(e,t,n):this.props.search(e,t,n)}matchWithContext(e){const t=this.context(e);return!1===t?null:this.match(!0===t?e:t)}context(e){return!this.props.context||this.props.context(e)}searchWithCach(e,t,n){null!=this.cache[e]?t(this.cache[e]):this.props.search(e,(n=>{this.cache[e]=n,t(n)}),n)}}},409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Textcomplete=void 0;const r=n(6729),i=n(8707),o=n(2613),s=["show","shown","render","rendered","selected","hidden","hide"];class a extends r.EventEmitter{constructor(e,t,n){super(),this.editor=e,this.isQueryInFlight=!1,this.nextPendingQuery=null,this.handleHit=({searchResults:e})=>{e.length?this.dropdown.render(e,this.editor.getCursorOffset()):this.dropdown.hide(),this.isQueryInFlight=!1,null!==this.nextPendingQuery&&this.trigger(this.nextPendingQuery)},this.handleMove=e=>{"UP"===e.detail.code?this.dropdown.up(e):this.dropdown.down(e)},this.handleEnter=e=>{const t=this.dropdown.getActiveItem();t?(this.dropdown.select(t),e.preventDefault()):this.dropdown.hide()},this.handleEsc=e=>{this.dropdown.isShown()&&(this.dropdown.hide(),e.preventDefault())},this.handleChange=e=>{null!=e.detail.beforeCursor?this.trigger(e.detail.beforeCursor):this.dropdown.hide()},this.handleSelect=e=>{this.emit("select",e),e.defaultPrevented||this.editor.applySearchResult(e.detail.searchResult)},this.handleResize=()=>{this.dropdown.isShown()&&this.dropdown.setOffset(this.editor.getCursorOffset())},this.completer=new o.Completer(t),this.dropdown=i.Dropdown.create((null==n?void 0:n.dropdown)||{}),this.startListening()}destroy(e=!0){return this.completer.destroy(),this.dropdown.destroy(),e&&this.editor.destroy(),this.stopListening(),this}isShown(){return this.dropdown.isShown()}hide(){return this.dropdown.hide(),this}trigger(e){return this.isQueryInFlight?this.nextPendingQuery=e:(this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(e)),this}startListening(){var e;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect);for(const e of s)this.dropdown.on(e,(t=>this.emit(e,t)));this.completer.on("hit",this.handleHit),null===(e=this.dropdown.el.ownerDocument.defaultView)||void 0===e||e.addEventListener("resize",this.handleResize)}stopListening(){var e;null===(e=this.dropdown.el.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.handleResize),this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}t.Textcomplete=a},675:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2613),t),i(n(8707),t),i(n(8685),t),i(n(6933),t),i(n(9200),t),i(n(409),t),i(n(5320),t)},5320:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomEvent=void 0;const n="undefined"!=typeof window&&!!window.CustomEvent;t.createCustomEvent=(e,t)=>{if(n)return new CustomEvent(e,t);const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,(null==t?void 0:t.cancelable)||!1,(null==t?void 0:t.detail)||void 0),r}},2828:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaEditor=void 0;const i=n(4366),o=r(n(6496)),s=n(675),a=n(4408);class l extends s.Editor{constructor(e){super(),this.el=e,this.onInput=()=>{this.emitChangeEvent()},this.onKeydown=e=>{const t=this.getCode(e);let n;"UP"===t||"DOWN"===t?n=this.emitMoveEvent(t):"ENTER"===t?n=this.emitEnterEvent():"ESC"===t&&(n=this.emitEscEvent()),n&&n.defaultPrevented&&e.preventDefault()},this.startListening()}destroy(){return super.destroy(),this.stopListening(),this}applySearchResult(e){const t=this.getBeforeCursor();if(null!=t){const n=e.replace(t,this.getAfterCursor());this.el.focus(),Array.isArray(n)&&((0,i.update)(this.el,n[0],n[1]),this.el&&this.el.dispatchEvent((0,s.createCustomEvent)("input")))}}getCursorOffset(){const e=(0,a.calculateElementOffset)(this.el),t=this.getElScroll(),n=this.getCursorPosition(),r=(0,a.getLineHeightPx)(this.el),i=e.top-t.top+n.top+r,o=e.left-t.left+n.left,s=this.el.getBoundingClientRect().top;return"rtl"!==this.el.dir?{top:i,left:o,lineHeight:r,clientTop:s}:{top:i,right:document.documentElement?document.documentElement.clientWidth-o:0,lineHeight:r,clientTop:s}}getBeforeCursor(){return this.el.selectionStart!==this.el.selectionEnd?null:this.el.value.substring(0,this.el.selectionEnd)}getAfterCursor(){return this.el.value.substring(this.el.selectionEnd)}getElScroll(){return{top:this.el.scrollTop,left:this.el.scrollLeft}}getCursorPosition(){return(0,o.default)(this.el,this.el.selectionEnd)}startListening(){this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)}stopListening(){this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)}}t.TextareaEditor=l},8207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaEditor=void 0;var r=n(2828);Object.defineProperty(t,"TextareaEditor",{enumerable:!0,get:function(){return r.TextareaEditor}})},3566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateElementOffset=void 0,t.calculateElementOffset=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument;if(null==n)throw new Error("Given element does not belong to document");const{defaultView:r,documentElement:i}=n;if(null==r)throw new Error("Given element does not belong to window");const o={top:t.top+r.pageYOffset,left:t.left+r.pageXOffset};return i&&(o.top-=i.clientTop,o.left-=i.clientLeft),o}},1881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLineHeightPx=void 0;const n="0".charCodeAt(0),r="9".charCodeAt(0),i=e=>n<=e&&e<=r;t.getLineHeightPx=e=>{const t=getComputedStyle(e),n=t.lineHeight;if(i(n.charCodeAt(0))){const e=parseFloat(n);return i(n.charCodeAt(n.length-1))?e*parseFloat(t.fontSize):e}return o(e.nodeName,t)};const o=(e,t)=>{const n=document.body;if(!n)return 0;const r=document.createElement(e);r.innerHTML="&nbsp;",Object.assign(r.style,{fontSize:t.fontSize,fontFamily:t.fontFamily,padding:"0"}),n.appendChild(r),r instanceof HTMLTextAreaElement&&(r.rows=1);const i=r.offsetHeight;return n.removeChild(r),i}},4408:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3566),t),i(n(1881),t),i(n(7449),t)},7449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=void 0,t.isSafari=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},6245:(e,t,n)=>{var r,i;r=[n(9755),n(3333),n(6099)],void 0===(i=function(e){return function(e,t,n,r){return e.fn.dataTable}(e,window,document)}.apply(t,r))||(e.exports=i)},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},4070:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),s=n(7),a=s.get,l=(s.deepValue,s.isArray),c=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,s=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,d=void 0===u?32:u,h=n.caseSensitive,f=void 0!==h&&h,p=n.tokenSeparator,m=void 0===p?/ +/g:p,v=n.findAllMatches,g=void 0!==v&&v,_=n.minMatchCharLength,y=void 0===_?1:_,b=n.id,w=void 0===b?null:b,x=n.keys,E=void 0===x?[]:x,C=n.shouldSort,O=void 0===C||C,S=n.getFn,k=void 0===S?a:S,L=n.sortFn,T=void 0===L?function(e,t){return e.score-t.score}:L,A=n.tokenize,M=void 0!==A&&A,I=n.matchAllTokens,N=void 0!==I&&I,q=n.includeMatches,D=void 0!==q&&q,P=n.includeScore,j=void 0!==P&&P,R=n.verbose,z=void 0!==R&&R;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:s,threshold:c,maxPatternLength:d,isCaseSensitive:f,tokenSeparator:m,findAllMatches:g,minMatchCharLength:y,id:w,keys:E,includeMatches:D,includeScore:j,shouldSort:O,getFn:k,sortFn:T,verbose:z,tokenize:M,matchAllTokens:N},this.setCollection(t),this._processKeys(E)}var t,n;return t=e,(n=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var r=e[t];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var i=null,o=null,s=0,a=0,l=e.length;a<l;a+=1){var c=e[a];if(!c.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var u=c.name;if(this._keyNames.push(u),!c.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var d=c.weight;if(d<0||d>1)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?d:Math.max(o,d),i=null==i?d:Math.min(i,d),this._keyWeights[u]=d,s+=d}if(s>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,i=n.fullSearcher,o=this._search(r,i);return this._computeScore(o),this.options.shouldSort&&this._sort(o),t.limit&&"number"==typeof t.limit&&(o=o.slice(0,t.limit)),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)t.push(new o(n[r],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0]){for(var o=0,s=n.length;o<s;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});return i}for(var a=0,l=n.length;a<l;a+=1)for(var c=n[a],u=0,d=this._keyNames.length;u<d;u+=1){var h=this._keyNames[u];this._analyze({key:h,value:this.options.getFn(c,h),record:c,index:a},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return i}},{key:"_analyze",value:function(e,t){var n=this,r=e.key,i=e.arrayIndex,o=void 0===i?-1:i,s=e.value,a=e.record,c=e.index,u=t.tokenSearchers,d=void 0===u?[]:u,h=t.fullSearcher,f=t.resultMap,p=void 0===f?{}:f,m=t.results,v=void 0===m?[]:m;!function e(t,i,o,s){if(null!=i)if("string"==typeof i){var a=!1,c=-1,u=0;n._log("\nKey: ".concat(""===r?"--":r));var f=h.search(i);if(n._log('Full text: "'.concat(i,'", score: ').concat(f.score)),n.options.tokenize){for(var m=i.split(n.options.tokenSeparator),g=m.length,_=[],y=0,b=d.length;y<b;y+=1){var w=d[y];n._log('\nPattern: "'.concat(w.pattern,'"'));for(var x=!1,E=0;E<g;E+=1){var C=m[E],O=w.search(C),S={};O.isMatch?(S[C]=O.score,a=!0,x=!0,_.push(O.score)):(S[C]=1,n.options.matchAllTokens||_.push(1)),n._log('Token: "'.concat(C,'", score: ').concat(S[C]))}x&&(u+=1)}c=_[0];for(var k=_.length,L=1;L<k;L+=1)c+=_[L];c/=k,n._log("Token score average:",c)}var T=f.score;c>-1&&(T=(T+c)/2),n._log("Score average:",T);var A=!n.options.tokenize||!n.options.matchAllTokens||u>=d.length;if(n._log("\nCheck Matches: ".concat(A)),(a||f.isMatch)&&A){var M={key:r,arrayIndex:t,value:i,score:T};n.options.includeMatches&&(M.matchedIndices=f.matchedIndices);var I=p[s];I?I.output.push(M):(p[s]={item:o,output:[M]},v.push(p[s]))}}else if(l(i))for(var N=0,q=i.length;N<q;N+=1)e(N,i[N],o,s)}(o,s,a,c)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,r=0,i=e.length;r<i;r+=1){for(var o=e[r],s=o.output,a=s.length,l=1,c=0;c<a;c+=1){var u=s[c],d=u.key,h=n?t[d]:1,f=0===u.score&&t&&t[d]>0?Number.EPSILON:u.score;l*=Math.pow(f,h)}o.score=l,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}),2)),n=null}var i=[];this.options.includeMatches&&i.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o=n[r];if(0!==o.matchedIndices.length){var s={indices:o.matchedIndices,value:o.value};o.key&&(s.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(s.arrayIndex=o.arrayIndex),t.matches.push(s)}}})),this.options.includeScore&&i.push((function(e,t){t.score=e.score}));for(var o=0,s=e.length;o<s;o+=1){var a=e[o];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),i.length){for(var l={item:a.item},c=0,u=i.length;c<u;c+=1)i[c](a,l);t.push(l)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&i(t.prototype,n),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),o=n(3),s=n(6),a=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,a=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,d=void 0===u?32:u,h=n.isCaseSensitive,f=void 0!==h&&h,p=n.tokenSeparator,m=void 0===p?/ +/g:p,v=n.findAllMatches,g=void 0!==v&&v,_=n.minMatchCharLength,y=void 0===_?1:_,b=n.includeMatches,w=void 0!==b&&b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:a,threshold:c,maxPatternLength:d,isCaseSensitive:f,tokenSeparator:m,findAllMatches:g,includeMatches:w,minMatchCharLength:y},this.pattern=f?t:t.toLowerCase(),this.pattern.length<=d&&(this.patternAlphabet=s(this.pattern))}var t,n;return t=e,(n=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var s={isMatch:!0,score:0};return r&&(s.matchedIndices=[[0,e.length-1]]),s}var a=this.options,l=a.maxPatternLength,c=a.tokenSeparator;if(this.pattern.length>l)return i(e,this.pattern,c);var u=this.options,d=u.location,h=u.distance,f=u.threshold,p=u.findAllMatches,m=u.minMatchCharLength;return o(e,this.pattern,this.patternAlphabet,{location:d,distance:h,threshold:f,findAllMatches:p,minMatchCharLength:m,includeMatches:r})}}])&&r(t.prototype,n),e}();e.exports=a},function(e,t){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(t.replace(n,"\\$&").replace(r,"|")),o=e.match(i),s=!!o,a=[];if(s)for(var l=0,c=o.length;l<c;l+=1){var u=o[l];a.push([e.indexOf(u),u.length-1])}return{score:s?.5:1,isMatch:s,matchedIndices:a}}},function(e,t,n){var r=n(4),i=n(5);e.exports=function(e,t,n,o){for(var s=o.location,a=void 0===s?0:s,l=o.distance,c=void 0===l?100:l,u=o.threshold,d=void 0===u?.6:u,h=o.findAllMatches,f=void 0!==h&&h,p=o.minMatchCharLength,m=void 0===p?1:p,v=o.includeMatches,g=void 0!==v&&v,_=a,y=e.length,b=d,w=e.indexOf(t,_),x=t.length,E=[],C=0;C<y;C+=1)E[C]=0;if(-1!==w){var O=r(t,{errors:0,currentLocation:w,expectedLocation:_,distance:c});if(b=Math.min(O,b),-1!==(w=e.lastIndexOf(t,_+x))){var S=r(t,{errors:0,currentLocation:w,expectedLocation:_,distance:c});b=Math.min(S,b)}}w=-1;for(var k=[],L=1,T=x+y,A=1<<(x<=31?x-1:30),M=0;M<x;M+=1){for(var I=0,N=T;I<N;)r(t,{errors:M,currentLocation:_+N,expectedLocation:_,distance:c})<=b?I=N:T=N,N=Math.floor((T-I)/2+I);T=N;var q=Math.max(1,_-N+1),D=f?y:Math.min(_+N,y)+x,P=Array(D+2);P[D+1]=(1<<M)-1;for(var j=D;j>=q;j-=1){var R=j-1,z=n[e.charAt(R)];if(z&&(E[R]=1),P[j]=(P[j+1]<<1|1)&z,0!==M&&(P[j]|=(k[j+1]|k[j])<<1|1|k[j+1]),P[j]&A&&(L=r(t,{errors:M,currentLocation:R,expectedLocation:_,distance:c}))<=b){if(b=L,(w=R)<=_)break;q=Math.max(1,2*_-w)}}if(r(t,{errors:M+1,currentLocation:_,expectedLocation:_,distance:c})>b)break;k=P}var F={isMatch:w>=0,score:0===L?.001:L};return g&&(F.matchedIndices=i(E,m)),F}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,i=t.currentLocation,o=void 0===i?0:i,s=t.expectedLocation,a=void 0===s?0:s,l=t.distance,c=void 0===l?100:l,u=r/e.length,d=Math.abs(a-o);return c?u+d/c:d?1:u}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,o=0,s=e.length;o<s;o+=1){var a=e[o];a&&-1===r?r=o:a||-1===r||((i=o-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t){var n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},r=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},i=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e};e.exports={get:function(e,t){var s=[];return function e(t,a){if(a){var l=a.indexOf("."),c=a,u=null;-1!==l&&(c=a.slice(0,l),u=a.slice(l+1));var d=t[c];if(null!=d)if(u||!i(d)&&!o(d))if(n(d))for(var h=0,f=d.length;h<f;h+=1)e(d[h],u);else u&&e(d,u);else s.push(r(d))}else s.push(t)}(e,t),s},isArray:n,isString:i,isNum:o,toString:r}}])},6496:e=>{!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function i(e,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var s=o&&o.debug||!1;if(s){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var c=l.style,u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;c.whiteSpace="pre-wrap",d||(c.wordWrap="break-word"),c.position="absolute",s||(c.visibility="hidden"),t.forEach((function(e){d&&"lineHeight"===e?c.lineHeight=u.height:c[e]=u[e]})),r?e.scrollHeight>parseInt(u.height)&&(c.overflowY="scroll"):c.overflow="hidden",l.textContent=e.value.substring(0,i),d&&(l.textContent=l.textContent.replace(/\s/g," "));var h=document.createElement("span");h.textContent=e.value.substring(i)||".",l.appendChild(h);var f={top:h.offsetTop+parseInt(u.borderTopWidth),left:h.offsetLeft+parseInt(u.borderLeftWidth),height:parseInt(u.lineHeight)};return s?h.style.backgroundColor="#aaa":document.body.removeChild(l),f}void 0!==e.exports?e.exports=i:n&&(window.getCaretCoordinates=i)}()},4366:(e,t,n)=>{"use strict";function r(e,t,n){const r=e.value,i=t+(n||""),o=document.activeElement;let s=0,a=0;for(;s<r.length&&s<i.length&&r[s]===i[s];)s++;for(;r.length-a-1>=0&&i.length-a-1>=0&&r[r.length-a-1]===i[i.length-a-1];)a++;s=Math.min(s,Math.min(r.length,i.length)-a),e.setSelectionRange(s,r.length-a);const l=i.substring(s,i.length-a);if(e.focus(),!document.execCommand("insertText",!1,l)){e.value=i;const t=document.createEvent("Event");t.initEvent("input",!0,!0),e.dispatchEvent(t)}return e.setSelectionRange(t.length,t.length),o.focus(),e}function i(e,t,n){const i=e.selectionEnd,o=e.value.substr(0,e.selectionStart)+t,s=e.value.substring(e.selectionStart,i)+(n||"")+e.value.substr(i);return r(e,o,s),e.selectionEnd=i+t.length,e}n.r(t),n.d(t,{update:()=>r,wrapCursor:()=>i})}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,i,o]=e[u],a=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=441,(()=>{var e={441:0,660:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[s,a,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(l)var u=l(r)}for(t&&t(n);c<s.length;c++)o=s[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkhanfor=self.webpackChunkhanfor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var i=r.O(void 0,[351],(()=>r(9925)));i=r.O(i)})();