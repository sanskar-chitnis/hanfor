!function(e){function t(t){for(var r,a,s=t[0],l=t[1],c=t[2],h=0,d=[];h<s.length;h++)a=s[h],i[a]&&d.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={5:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([232,0]),n()}({12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return e}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,this.cache=t.cache?{}:null}return r(e,[{key:"destroy",value:function(){return this.cache=null,this}},{key:"search",value:function(e,t,n){this.cache?this.searchWithCache(e,t,n):this.props.search(e,t,n)}},{key:"replace",value:function(e){return this.props.replace(e)}},{key:"searchWithCache",value:function(e,t,n){var r=this;this.cache&&this.cache[e]?t(this.cache[e]):this.props.search(e,function(n){r.cache&&(r.cache[e]=n),t(n)},n)}},{key:"matchText",value:function(e){return"function"==typeof this.match?this.match(e):e.match(this.match)}},{key:"match",get:function(){return this.props.match}},{key:"index",get:function(){return"number"==typeof this.props.index?this.props.index:2}},{key:"template",get:function(){return this.props.template||i}}]),e}();t.default=o},13:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);o<a;o++)s[o]=r[o].fn;return s},s.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){var r=new a(t,n||this),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.once=function(e,t,n){var r=new a(t,n||this,!0),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||r&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new o:delete this._events[t])):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,e.exports=s},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(13)),o=n(20);a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"destroy",value:function(){return this}},{key:"applySearchResult",value:function(e){throw new Error("Not implemented.")}},{key:"getCursorOffset",value:function(){throw new Error("Not implemented.")}},{key:"getBeforeCursor",value:function(){throw new Error("Not implemented.")}},{key:"emitMoveEvent",value:function(e){var t=(0,o.createCustomEvent)("move",{cancelable:!0,detail:{code:e}});return this.emit("move",t),t}},{key:"emitEnterEvent",value:function(){var e=(0,o.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",e),e}},{key:"emitChangeEvent",value:function(){var e=(0,o.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",e),e}},{key:"emitEscEvent",value:function(){var e=(0,o.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",e),e}},{key:"getCode",value:function(e){return 9===e.keyCode?"ENTER":13===e.keyCode?"ENTER":27===e.keyCode?"ESC":38===e.keyCode?"UP":40===e.keyCode?"DOWN":78===e.keyCode&&e.ctrlKey?"DOWN":80===e.keyCode&&e.ctrlKey?"UP":"OTHER"}}]),t}();t.default=s},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateElementOffset=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.defaultView,i=n.documentElement,o={top:t.top+r.pageYOffset,left:t.left+r.pageXOffset};i&&(o.top-=i.clientTop,o.left-=i.clientLeft);return o},t.getLineHeightPx=function(e){var t=window.getComputedStyle(e);if(o(t.lineHeight.charCodeAt(0)))return o(t.lineHeight.charCodeAt(t.lineHeight.length-1))?parseFloat(t.lineHeight)*parseFloat(t.fontSize):parseFloat(t.lineHeight);return a(e.nodeName,t)},t.calculateLineHeightPx=a;t.createCustomEvent="function"==typeof window.CustomEvent?function(e,t){return new document.defaultView.CustomEvent(e,{cancelable:t&&t.cancelable||!1,detail:t&&t.detail||void 0})}:function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,t&&t.cancelable||!1,t&&t.detail||void 0),n};var r="0".charCodeAt(0),i="9".charCodeAt(0);function o(e){return e>=r&&e<=i}function a(e,t){var n=document.body;if(!n)return 0;var r=document.createElement(e);r.innerHTML="&nbsp;",r.style.fontSize=t.fontSize,r.style.fontFamily=t.fontFamily,r.style.padding="0",n.appendChild(r),r instanceof HTMLTextAreaElement&&(r.rows=1);var i=r.offsetHeight;return n.removeChild(r),i}},215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CLASS_NAME=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(7);(r=o)&&r.__esModule;var a=t.DEFAULT_CLASS_NAME="textcomplete-item",s=["onClick","onMouseover"],l=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchResult=t,this.active=!1,this.className=n.className||a,this.activeClassName=this.className+" active",s.forEach(function(e){r[e]=r[e].bind(r)})}return i(e,[{key:"destroy",value:function(){this.el.removeEventListener("mousedown",this.onClick,!1),this.el.removeEventListener("mouseover",this.onMouseover,!1),this.el.removeEventListener("touchstart",this.onClick,!1),this.active&&(this.dropdown.activeItem=null),this._el=null}},{key:"appended",value:function(e){this.dropdown=e,this.siblings=e.items,this.index=this.siblings.length-1}},{key:"activate",value:function(){if(!this.active){var e=this.dropdown.getActiveItem();e&&e.deactivate(),this.dropdown.activeItem=this,this.active=!0,this.el.className=this.activeClassName}return this}},{key:"deactivate",value:function(){return this.active&&(this.active=!1,this.el.className=this.className,this.dropdown.activeItem=null),this}},{key:"onClick",value:function(e){e.preventDefault(),this.dropdown.select(this)}},{key:"onMouseover",value:function(){this.activate()}},{key:"el",get:function(){if(this._el)return this._el;var e=document.createElement("li");e.className=this.active?this.activeClassName:this.className;var t=document.createElement("a");return t.innerHTML=this.searchResult.render(),e.appendChild(t),this._el=e,e.addEventListener("mousedown",this.onClick),e.addEventListener("mouseover",this.onMouseover),e.addEventListener("touchstart",this.onClick),e}},{key:"next",get:function(){var e=void 0;if(this.index===this.siblings.length-1){if(!this.dropdown.rotate)return null;e=0}else e=this.index+1;return this.siblings[e]}},{key:"prev",get:function(){var e=void 0;if(0===this.index){if(!this.dropdown.rotate)return null;e=this.siblings.length-1}else e=this.index-1;return this.siblings[e]}}]),e}();t.default=l},216:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(13)),o=s(n(215)),a=(s(n(7)),n(20));function s(e){return e&&e.__esModule?e:{default:e}}var l="dropdown-menu textcomplete-dropdown",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.shown=!1,n.items=[],n.activeItem=null,n.footer=e.footer,n.header=e.header,n.maxCount=e.maxCount||10,n.el.className=e.className||l,n.rotate=!e.hasOwnProperty("rotate")||e.rotate,n.placement=e.placement,n.itemOptions=e.item||{};var r=e.style;return r&&Object.keys(r).forEach(function(e){n.el.style[e]=r[e]}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,null,[{key:"createElement",value:function(){var e=document.createElement("ul"),t=e.style;t.display="none",t.position="absolute",t.zIndex="10000";var n=document.body;return n&&n.appendChild(e),e}}]),r(t,[{key:"destroy",value:function(){var e=this.el.parentNode;return e&&e.removeChild(this.el),this.clear()._el=null,this}},{key:"render",value:function(e,t){var n=this,r=(0,a.createCustomEvent)("render",{cancelable:!0});if(this.emit("render",r),r.defaultPrevented)return this;var i=e.map(function(e){return e.data}),s=e.slice(0,this.maxCount||e.length).map(function(e){return new o.default(e,n.itemOptions)});return this.clear().setStrategyId(e[0]).renderEdge(i,"header").append(s).renderEdge(i,"footer").show().setOffset(t),this.emit("rendered",(0,a.createCustomEvent)("rendered")),this}},{key:"deactivate",value:function(){return this.hide().clear()}},{key:"select",value:function(e){var t={searchResult:e.searchResult},n=(0,a.createCustomEvent)("select",{cancelable:!0,detail:t});return this.emit("select",n),n.defaultPrevented?this:(this.deactivate(),this.emit("selected",(0,a.createCustomEvent)("selected",{detail:t})),this)}},{key:"up",value:function(e){return this.shown?this.moveActiveItem("prev",e):this}},{key:"down",value:function(e){return this.shown?this.moveActiveItem("next",e):this}},{key:"getActiveItem",value:function(){return this.activeItem}},{key:"append",value:function(e){var t=this,n=document.createDocumentFragment();return e.forEach(function(e){t.items.push(e),e.appended(t),n.appendChild(e.el)}),this.el.appendChild(n),this}},{key:"setOffset",value:function(e){var t=document.documentElement;if(t){var n=this.el.offsetWidth;if(e.left){var r=t.clientWidth;e.left+n>r&&(e.left=r-n),this.el.style.left=e.left+"px"}else e.right&&(e.right-n<0&&(e.right=0),this.el.style.right=e.right+"px");this.isPlacementTop()?this.el.style.bottom=t.clientHeight-e.top+e.lineHeight+"px":this.el.style.top=e.top+"px"}return this}},{key:"show",value:function(){if(!this.shown){var e=(0,a.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",e),e.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,a.createCustomEvent)("shown"))}return this}},{key:"hide",value:function(){if(this.shown){var e=(0,a.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",e),e.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.emit("hidden",(0,a.createCustomEvent)("hidden"))}return this}},{key:"clear",value:function(){return this.el.innerHTML="",this.items.forEach(function(e){return e.destroy()}),this.items=[],this}},{key:"moveActiveItem",value:function(e,t){var n="next"===e?this.activeItem?this.activeItem.next:this.items[0]:this.activeItem?this.activeItem.prev:this.items[this.items.length-1];return n&&(n.activate(),t.preventDefault()),this}},{key:"setStrategyId",value:function(e){var t=e&&e.strategy.props.id;return t?this.el.setAttribute("data-strategy",t):this.el.removeAttribute("data-strategy"),this}},{key:"renderEdge",value:function(e,t){var n=("header"===t?this.header:this.footer)||"",r="function"==typeof n?n(e):n,i=document.createElement("li");return i.classList.add("textcomplete-"+t),i.innerHTML=r,this.el.appendChild(i),this}},{key:"isPlacementTop",value:function(){return"top"===this.placement}},{key:"el",get:function(){return this._el||(this._el=t.createElement()),this._el}}]),t}();t.default=c},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(7));o(n(12));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.strategy=t,this.term=n,this.match=r}return r(e,null,[{key:"build",value:function(t,n){if("function"==typeof t.props.context){var r=t.props.context(n);if("string"==typeof r)n=r;else if(!r)return null}var i=t.matchText(n);return i?new e(t,i[t.index],i):null}}]),r(e,[{key:"execute",value:function(e){var t=this;this.strategy.search(this.term,function(n){e(n.map(function(e){return new i.default(e,t.term,t.strategy)}))},this.match)}}]),e}();t.default=a},218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(13)),o=a(n(217));a(n(7)),a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var s=["handleQueryResult"],l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.strategies=[],s.forEach(function(t){e[t]=e[t].bind(e)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"destroy",value:function(){return this.strategies.forEach(function(e){return e.destroy()}),this}},{key:"registerStrategy",value:function(e){return this.strategies.push(e),this}},{key:"run",value:function(e){var t=this.extractQuery(e);t?t.execute(this.handleQueryResult):this.handleQueryResult([])}},{key:"extractQuery",value:function(e){for(var t=0;t<this.strategies.length;t++){var n=o.default.build(this.strategies[t],e);if(n)return n}return null}},{key:"handleQueryResult",value:function(e){this.emit("hit",{searchResults:e})}}]),t}();t.default=l},219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(218)),o=(l(n(149)),l(n(216))),a=l(n(12)),s=(l(n(7)),l(n(13)));function l(e){return e&&e.__esModule?e:{default:e}}var c=["handleChange","handleEnter","handleEsc","handleHit","handleMove","handleSelect"],u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.completer=new i.default,r.isQueryInFlight=!1,r.nextPendingQuery=null,r.dropdown=new o.default(n.dropdown||{}),r.editor=e,r.options=n,c.forEach(function(e){r[e]=r[e].bind(r)}),r.startListening(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),r(t,[{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.completer.destroy(),this.dropdown.destroy(),e&&this.editor.destroy(),this.stopListening(),this}},{key:"hide",value:function(){return this.dropdown.deactivate(),this}},{key:"register",value:function(e){var t=this;return e.forEach(function(e){t.completer.registerStrategy(new a.default(e))}),this}},{key:"trigger",value:function(e){return this.isQueryInFlight?this.nextPendingQuery=e:(this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(e)),this}},{key:"handleHit",value:function(e){var t=e.searchResults;t.length?this.dropdown.render(t,this.editor.getCursorOffset()):this.dropdown.deactivate(),this.isQueryInFlight=!1,null!==this.nextPendingQuery&&this.trigger(this.nextPendingQuery)}},{key:"handleMove",value:function(e){"UP"===e.detail.code?this.dropdown.up(e):this.dropdown.down(e)}},{key:"handleEnter",value:function(e){var t=this.dropdown.getActiveItem();t?(this.dropdown.select(t),e.preventDefault()):this.dropdown.deactivate()}},{key:"handleEsc",value:function(e){this.dropdown.shown&&(this.dropdown.deactivate(),e.preventDefault())}},{key:"handleChange",value:function(e){null!=e.detail.beforeCursor?this.trigger(e.detail.beforeCursor):this.dropdown.deactivate()}},{key:"handleSelect",value:function(e){this.emit("select",e),e.defaultPrevented||this.editor.applySearchResult(e.detail.searchResult)}},{key:"startListening",value:function(){var e=this;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect),["show","shown","render","rendered","selected","hidden","hide"].forEach(function(t){e.dropdown.on(t,function(){return e.emit(t)})}),this.completer.on("hit",this.handleHit)}},{key:"stopListening",value:function(){this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}]),t}();t.default=u},220:function(e,t){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function i(e,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var c=l.style,u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,h="INPUT"===e.nodeName;c.whiteSpace="pre-wrap",h||(c.wordWrap="break-word"),c.position="absolute",a||(c.visibility="hidden"),t.forEach(function(e){h&&"lineHeight"===e?c.lineHeight=u.height:c[e]=u[e]}),r?e.scrollHeight>parseInt(u.height)&&(c.overflowY="scroll"):c.overflow="hidden",l.textContent=e.value.substring(0,i),h&&(l.textContent=l.textContent.replace(/\s/g," "));var d=document.createElement("span");d.textContent=e.value.substring(i)||".",l.appendChild(d);var f={top:d.offsetTop+parseInt(u.borderTopWidth),left:d.offsetLeft+parseInt(u.borderLeftWidth),height:parseInt(u.lineHeight)};return a?d.style.backgroundColor="#aaa":document.body.removeChild(l),f}void 0!==e&&void 0!==e.exports?e.exports=i:n&&(window.getCaretCoordinates=i)}()},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r=e.value,i=t+(n||""),o=document.activeElement,a=0,s=0;a<r.length&&a<i.length&&r[a]===i[a];)a++;for(;r.length-s-1>=0&&i.length-s-1>=0&&r[r.length-s-1]===i[i.length-s-1];)s++;a=Math.min(a,Math.min(r.length,i.length)-s),e.setSelectionRange(a,r.length-s);var l=i.substring(a,i.length-s);if(e.focus(),!document.execCommand("insertText",!1,l)){e.value=i;var c=document.createEvent("Event");c.initEvent("input",!0,!0),e.dispatchEvent(c)}return e.setSelectionRange(t.length,t.length),o&&o.focus(),e}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(221)),o=s(n(149)),a=n(20);s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}var l=n(220),c=["onInput","onKeydown"],u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e,c.forEach(function(e){n[e]=n[e].bind(n)}),n.startListening(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"destroy",value:function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.stopListening(),this.el=null,this}},{key:"applySearchResult",value:function(e){var t=this.getBeforeCursor();if(null!=t){var n=e.replace(t,this.getAfterCursor());this.el.focus(),Array.isArray(n)&&((0,i.default)(this.el,n[0],n[1]),this.el.dispatchEvent(new Event("input")))}}},{key:"getCursorOffset",value:function(){var e=(0,a.calculateElementOffset)(this.el),t=this.getElScroll(),n=this.getCursorPosition(),r=(0,a.getLineHeightPx)(this.el),i=e.top-t.top+n.top+r,o=e.left-t.left+n.left;return"rtl"!==this.el.dir?{top:i,left:o,lineHeight:r}:{top:i,right:document.documentElement?document.documentElement.clientWidth-o:0,lineHeight:r}}},{key:"getBeforeCursor",value:function(){return this.el.selectionStart!==this.el.selectionEnd?null:this.el.value.substring(0,this.el.selectionEnd)}},{key:"getAfterCursor",value:function(){return this.el.value.substring(this.el.selectionEnd)}},{key:"getElScroll",value:function(){return{top:this.el.scrollTop,left:this.el.scrollLeft}}},{key:"getCursorPosition",value:function(){return l(this.el,this.el.selectionEnd)}},{key:"onInput",value:function(){this.emitChangeEvent()}},{key:"onKeydown",value:function(e){var t=this.getCode(e),n=void 0;"UP"===t||"DOWN"===t?n=this.emitMoveEvent(t):"ENTER"===t?n=this.emitEnterEvent():"ESC"===t&&(n=this.emitEscEvent()),n&&n.defaultPrevented&&e.preventDefault()}},{key:"startListening",value:function(){this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)}},{key:"stopListening",value:function(){this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)}}]),t}();t.default=u},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Textcomplete=t.Textarea=void 0;var r=o(n(222)),i=o(n(219));function o(e){return e&&e.__esModule?e:{default:e}}t.Textarea=r.default,t.Textcomplete=i.default},224:function(e,t,n){
/*!
 * Fuse.js v3.2.1 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";e.exports=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(5),o=n(7),a=n(4),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,s=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.isCaseSensitive,f=void 0!==d&&d,p=n.tokenSeparator,v=void 0===p?/ +/g:p,g=n.findAllMatches,m=void 0!==g&&g,y=n.minMatchCharLength,_=void 0===y?1:y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:f,tokenSeparator:v,findAllMatches:m,minMatchCharLength:_},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=a(this.pattern))}return r(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return i(e,this.pattern,r);var a=this.options,s=a.location,l=a.distance,c=a.threshold,u=a.findAllMatches,h=a.minMatchCharLength;return o(e,this.pattern,this.patternAlphabet,{location:s,distance:l,threshold:c,findAllMatches:u,minMatchCharLength:h})}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){return function e(t,n,i){if(n){var o=n.indexOf("."),a=n,s=null;-1!==o&&(a=n.slice(0,o),s=n.slice(o+1));var l=t[a];if(null!==l&&void 0!==l)if(s||"string"!=typeof l&&"number"!=typeof l)if(r(l))for(var c=0,u=l.length;c<u;c+=1)e(l[c],s,i);else s&&e(l,s,i);else i.push(l.toString())}else i.push(t);return i}(e,t,[])}},function(e,t,n){"use strict";e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===r?r=o:s||-1===r||((i=o-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}},function(e,t,n){"use strict";e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t,n){"use strict";var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(t.replace(r,"\\$&").replace(n,"|")),o=e.match(i),a=!!o,s=[];if(a)for(var l=0,c=o.length;l<c;l+=1){var u=o[l];s.push([e.indexOf(u),u.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,i=t.currentLocation,o=void 0===i?0:i,a=t.expectedLocation,s=void 0===a?0:a,l=t.distance,c=void 0===l?100:l,u=r/e.length,h=Math.abs(s-o);return c?u+h/c:h?1:u}},function(e,t,n){"use strict";var r=n(6),i=n(3);e.exports=function(e,t,n,o){for(var a=o.location,s=void 0===a?0:a,l=o.distance,c=void 0===l?100:l,u=o.threshold,h=void 0===u?.6:u,d=o.findAllMatches,f=void 0!==d&&d,p=o.minMatchCharLength,v=void 0===p?1:p,g=s,m=e.length,y=h,_=e.indexOf(t,g),b=t.length,w=[],k=0;k<m;k+=1)w[k]=0;if(-1!==_){var x=r(t,{errors:0,currentLocation:_,expectedLocation:g,distance:c});if(y=Math.min(x,y),-1!==(_=e.lastIndexOf(t,g+b))){var C=r(t,{errors:0,currentLocation:_,expectedLocation:g,distance:c});y=Math.min(C,y)}}_=-1;for(var E=[],O=1,S=b+m,L=1<<b-1,T=0;T<b;T+=1){for(var M=0,q=S;M<q;){r(t,{errors:T,currentLocation:g+q,expectedLocation:g,distance:c})<=y?M=q:S=q,q=Math.floor((S-M)/2+M)}S=q;var P=Math.max(1,g-q+1),j=f?m:Math.min(g+q,m)+b,z=Array(j+2);z[j+1]=(1<<T)-1;for(var A=j;A>=P;A-=1){var I=A-1,N=n[e.charAt(I)];if(N&&(w[I]=1),z[A]=(z[A+1]<<1|1)&N,0!==T&&(z[A]|=(E[A+1]|E[A])<<1|1|E[A+1]),z[A]&L&&(O=r(t,{errors:T,currentLocation:I,expectedLocation:g,distance:c}))<=y){if(y=O,(_=I)<=g)break;P=Math.max(1,2*g-_)}}if(r(t,{errors:T+1,currentLocation:g,expectedLocation:g,distance:c})>y)break;E=z}return{isMatch:_>=0,score:0===O?.001:O,matchedIndices:i(w,v)}}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),o=n(2),a=n(0),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,a=n.distance,s=void 0===a?100:a,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.caseSensitive,f=void 0!==d&&d,p=n.tokenSeparator,v=void 0===p?/ +/g:p,g=n.findAllMatches,m=void 0!==g&&g,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.id,w=void 0===b?null:b,k=n.keys,x=void 0===k?[]:k,C=n.shouldSort,E=void 0===C||C,O=n.getFn,S=void 0===O?o:O,L=n.sortFn,T=void 0===L?function(e,t){return e.score-t.score}:L,M=n.tokenize,q=void 0!==M&&M,P=n.matchAllTokens,j=void 0!==P&&P,z=n.includeMatches,A=void 0!==z&&z,I=n.includeScore,N=void 0!==I&&I,R=n.verbose,D=void 0!==R&&R;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:f,tokenSeparator:v,findAllMatches:m,minMatchCharLength:_,id:w,keys:x,includeMatches:A,includeScore:N,shouldSort:E,getFn:S,sortFn:T,verbose:D,tokenize:q,matchAllTokens:j},this.setCollection(t)}return r(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),n=t.tokenSearchers,r=t.fullSearcher,i=this._search(n,r),o=i.weights,a=i.results;return this._computeScore(o,a),this.options.shouldSort&&this._sort(a),this._format(a)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)t.push(new i(n[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=this.list,r={},i=[];if("string"==typeof n[0]){for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});return{weights:null,results:i}}for(var s={},l=0,c=n.length;l<c;l+=1)for(var u=n[l],h=0,d=this.options.keys.length;h<d;h+=1){var f=this.options.keys[h];if("string"!=typeof f){if(s[f.name]={weight:1-f.weight||1},f.weight<=0||f.weight>1)throw new Error("Key weight has to be > 0 and <= 1");f=f.name}else s[f]={weight:1};this._analyze({key:f,value:this.options.getFn(u,f),record:u,index:l},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:i}}},{key:"_analyze",value:function(e,t){var n=e.key,r=e.arrayIndex,i=void 0===r?-1:r,o=e.value,s=e.record,l=e.index,c=t.tokenSearchers,u=void 0===c?[]:c,h=t.fullSearcher,d=void 0===h?[]:h,f=t.resultMap,p=void 0===f?{}:f,v=t.results,g=void 0===v?[]:v;if(void 0!==o&&null!==o){var m=!1,y=-1,_=0;if("string"==typeof o){this._log("\nKey: "+(""===n?"-":n));var b=d.search(o);if(this._log('Full text: "'+o+'", score: '+b.score),this.options.tokenize){for(var w=o.split(this.options.tokenSeparator),k=[],x=0;x<u.length;x+=1){var C=u[x];this._log('\nPattern: "'+C.pattern+'"');for(var E=!1,O=0;O<w.length;O+=1){var S=w[O],L=C.search(S),T={};L.isMatch?(T[S]=L.score,m=!0,E=!0,k.push(L.score)):(T[S]=1,this.options.matchAllTokens||k.push(1)),this._log('Token: "'+S+'", score: '+T[S])}E&&(_+=1)}y=k[0];for(var M=k.length,q=1;q<M;q+=1)y+=k[q];y/=M,this._log("Token score average:",y)}var P=b.score;y>-1&&(P=(P+y)/2),this._log("Score average:",P);var j=!this.options.tokenize||!this.options.matchAllTokens||_>=u.length;if(this._log("\nCheck Matches: "+j),(m||b.isMatch)&&j){var z=p[l];z?z.output.push({key:n,arrayIndex:i,value:o,score:P,matchedIndices:b.matchedIndices}):(p[l]={item:s,output:[{key:n,arrayIndex:i,value:o,score:P,matchedIndices:b.matchedIndices}]},g.push(p[l]))}}else if(a(o))for(var A=0,I=o.length;A<I;A+=1)this._analyze({key:n,arrayIndex:A,value:o[A],record:s,index:l},{resultMap:p,results:g,tokenSearchers:u,fullSearcher:d})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var n=0,r=t.length;n<r;n+=1){for(var i=t[n].output,o=i.length,a=1,s=1,l=0;l<o;l+=1){var c=e?e[i[l].key].weight:1,u=(1===c?i[l].score:i[l].score||.001)*c;1!==c?s=Math.min(s,u):(i[l].nScore=u,a*=u)}t[n].score=1===s?a:s,this._log(t[n])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this.options.verbose&&this._log("\n\nOutput:\n\n",JSON.stringify(e));var n=[];this.options.includeMatches&&n.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o=n[r];if(0!==o.matchedIndices.length){var a={indices:o.matchedIndices,value:o.value};o.key&&(a.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(a.arrayIndex=o.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&n.push(function(e,t){t.score=e.score});for(var r=0,i=e.length;r<i;r+=1){var o=e[r];if(this.options.id&&(o.item=this.options.getFn(o.item,this.options.id)[0]),n.length){for(var a={item:o.item},s=0,l=n.length;s<l;s+=1)n[s](o,a);t.push(a)}else t.push(o.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),e}();e.exports=s}])},e.exports=r()},225:function(e,t){const n={":AND:":1,":OR:":1},r={":AND:":1,":OR:":1},i={},o={"(":1,")":1},a={":AND:":3,":OR:":2};class s{constructor(e){this.left=!1,this.value=e,this.right=!1,this.col_target=-1,this.update_target()}update_target(){const e=this.value.indexOf(":COL_INDEX_");if(e>=0){const t=parseInt(this.value.substring(e+11,e+13));t>=0&&(this.value=this.value.substring(e+14),this.col_target=t)}}evaluate(e,t){return function e(t,n,r){if(void 0===t)return!0;if(!1===t.left&&!1===t.right){let e="";if(-1!==t.col_target)e=n[t.col_target];else for(let t=0;t<r.length;t++)r[t]&&(e+=n[t]+" ");const i=t.value.indexOf(":NOT:");return i>=0?!l(t.value.substring(i+5),e):l(t.value,e)}let i=e(t.left,n,r);let o=e(t.right,n,r);if(":AND:"===t.value)return i&&o;if(":OR:"===t.value)return i||o}(this,e,t)}static is_search_string(e){return!(e in o||e in n)}static to_string(e){let t="";return!1!==e.left&&(t+=s.to_string(e.left)+" "),t+=e.value,!1!==e.right&&(t+=" "+s.to_string(e.right)),t}static peek(e){return e[e.length-1]}static searchArrayToTree(e){let t=[],o=[];for(let l=0,c=e.length;l<c;l++){const c=e[l];if(s.is_search_string(c))t.push(new s(c));else if(c in n){for(;o.length;){const e=s.peek(o);if(!(e in n&&(c in r&&a[c]<=a[e]||c in i&&a[c]<a[e])))break;{let e=t.pop(),n=t.pop(),r=new s(o.pop());r.left=n,r.right=e,t.push(r)}}o.push(c)}else if("("===c)o.push(c);else{if(")"!==c)throw"Error: Token unknown: "+c;{let e=!1;for(;o.length;){const n=o.pop();if("("===n){e=!0;break}{let e=t.pop(),r=t.pop(),i=new s(n);i.left=r,i.right=e,t.push(i)}}if(!e)throw"Error: parentheses mismatch."}}}for(;o.length;){const e=o.pop();if("("===e||")"===e)throw"Error: Parentheses mismatch.";let n=t.pop(),r=t.pop(),i=new s(e);i.left=r,i.right=n,t.push(i)}return 0===t.length&&t.push(new s("")),t[0]}static awesomeQuerySplitt0r(e,t){let r=e.split(/(:OR:|:AND:|\(|\))/g);if(r=r.filter(String),void 0!==t)for(let e=0,i=r.length;e<i;e++)r[e]in n||r[e]in o||(r[e]=":COL_INDEX_"+("00"+t).slice(-2)+":"+r[e]);return r}static fromQuery(e="",t){return s.searchArrayToTree(s.awesomeQuerySplitt0r(e,t))}}function l(e,t){return e=e.startsWith('""')&&e.endsWith('""')?"^\\s*"+e.substr(2,e.length-4)+"\\s*$":e.replace(/([^\\])?\"/g,"$1\\b"),new RegExp(e,"i").test(t)}e.exports={SearchNode:s}},226:function(e,t,n){var r,i,o;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/i=[e,t],void 0===(o="function"==typeof(r=function(e,t){"use strict";var n,r,i="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r.splice(t,1))}}),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!i.has(e)){var t=null,n=null,r=null,a=function(){e.clientWidth!==n&&h()},s=function(t){window.removeEventListener("resize",a,!1),e.removeEventListener("input",h,!1),e.removeEventListener("keyup",h,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",h,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),i.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",h,!1),window.addEventListener("resize",a,!1),e.addEventListener("input",h,!1),e.addEventListener("autosize:update",h,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",i.set(e,{destroy:s,update:h}),"vertical"===(l=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===l.resize&&(e.style.resize="horizontal"),t="content-box"===l.boxSizing?-(parseFloat(l.paddingTop)+parseFloat(l.paddingBottom)):parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth),isNaN(t)&&(t=0),h()}var l;function c(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var r=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),i=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",n=e.clientWidth,r.forEach(function(e){e.node.scrollTop=e.scrollTop}),i&&(document.documentElement.scrollTop=i)}}function h(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),i="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(i<t?"hidden"===n.overflowY&&(c("scroll"),u(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),u(),i="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==i){r=i;var a=o("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}}function s(e){var t=i.get(e);t&&t.destroy()}function l(e){var t=i.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return a(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=c,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},227:function(e,t,n){var r,i;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var a=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},r.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var c in o)o[c]&&(l+="; "+c,!0!==o[c]&&(l+="="+o[c]));return document.cookie=t+"="+i+l}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var f=u[d].split("="),p=f.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var v=f[0].replace(h,decodeURIComponent);if(p=n.read?n.read(p,v):n(p,v)||p.replace(h,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===v){a=p;break}t||(a[v]=p)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},232:function(e,t,n){(function(e){n(19),n(10),n(17),n(16),n(21),n(15),n(150),n(14);n(227);const t=n(226),{SearchNode:r}=n(225);let i=n(224),{Textcomplete:o,Textarea:a}=n(223),s=new i([],{}),l=["","has_formalization"],c=["","Todo","Review","Done"],u=[""],h=[""],d=[],f=[""],p=[!0,!0,!0,!0,!0,!0],v=[],g=JSON.parse(search_query),m={},y=[],_=sessionStorage.getItem("req_search_string"),b=sessionStorage.getItem("filter_status_string"),w=sessionStorage.getItem("filter_tag_string"),k=sessionStorage.getItem("filter_type_string"),x=void 0,C=void 0;function E(){_=e("#search_bar").val().trim(),sessionStorage.setItem("req_search_string",_),x=r.fromQuery(_)}function O(){function t(e,t,n){return t.length>0&&(e.length>0&&(e=e.concat([":AND:"])),e=e.concat(function(e){return["("].concat(e,[")"])}(r.awesomeQuerySplitt0r(t,n)))),e}v=[],b=e("#status-filter-input").val(),w=e("#tag-filter-input").val(),k=e("#type-filter-input").val(),sessionStorage.setItem("filter_status_string",b),sessionStorage.setItem("filter_tag_string",w),sessionStorage.setItem("filter_type_string",k),v=t(v=t(v=t(v,k,4),w,5),b,6),C=r.searchArrayToTree(v)}function S(e){let t=[];return e.rows({selected:!0}).every(function(){let e=this.data();t.push(e.id)}),t}function L(){e(".requirement_var_group").each(function(){e(this).hide(),e(this).removeClass("type-error")}),e(".formalization_card").each(function(t){const n=e(this).attr("title"),r=e("#requirement_scope"+n).val(),i=e("#requirement_pattern"+n).val();let o=e("#formalization_heading"+n),a=e("#requirement_var_group_p"+n),s=e("#requirement_var_group_q"+n),l=e("#requirement_var_group_r"+n),c=e("#requirement_var_group_s"+n),u=e("#requirement_var_group_t"+n),h=e("#requirement_var_group_u"+n);if(n in y)for(let t=0;t<y[n].length;t++)e("#formalization_var_"+y[n][t]+n).addClass("type-error"),o.addClass("type-error-head");else o.removeClass("type-error-head");switch(r){case"BEFORE":case"AFTER":a.show();break;case"BETWEEN":case"AFTER_UNTIL":a.show(),s.show()}switch(i){case"Absence":case"Universality":case"Existence":case"BoundedExistence":l.show();break;case"Invariant":case"Precedence":case"Response":case"MinDuration":case"MaxDuration":case"BoundedRecurrence":l.show(),c.show();break;case"PrecedenceChain1-2":case"PrecedenceChain2-1":case"ResponseChain1-2":case"ResponseChain2-1":case"BoundedResponse":case"BoundedInvariance":case"TimeConstrainedInvariant":case"Toggle1":l.show(),c.show(),u.show();break;case"ConstrainedChain":case"TimeConstrainedMinDuration":case"ConstrainedTimedExistence":case"Toggle2":l.show(),c.show(),u.show(),h.show();break;case"NotFormalizable":a.hide(),s.hide()}})}function T(){e(".formalization_card").each(function(n){const r=e(this).attr("title");let i="",o=e("#current_formalization_textarea"+r);const a=e("#requirement_scope"+r).find("option:selected").text().replace(/\s\s+/g," "),s=e("#requirement_pattern"+r).find("option:selected").text().replace(/\s\s+/g," ");"None"!==a&&"None"!==s&&(i=a+", "+s+".");let l=e("#formalization_var_p"+r).val(),c=e("#formalization_var_q"+r).val(),u=e("#formalization_var_r"+r).val(),h=e("#formalization_var_s"+r).val(),d=e("#formalization_var_t"+r).val(),f=e("#formalization_var_u"+r).val();l.length>0&&(i=i.replace(/{P}/g,l)),c.length>0&&(i=i.replace(/{Q}/g,c)),u.length>0&&(i=i.replace(/{R}/g,u)),h.length>0&&(i=i.replace(/{S}/g,h)),d.length>0&&(i=i.replace(/{T}/g,d)),f.length>0&&(i=i.replace(/{U}/g,f)),o.val(i),t.update(o)}),e("#requirement_modal").data({unsaved_changes:!0,updated_formalization:!0})}function M(){e(".formalization_selector").change(function(){L(),T()}),e(".reqirement-variable, .req_var_type").change(function(){T()}),e(".delete_formalization").confirmation({rootSelector:".delete_formalization"}).click(function(){!function(t){let n=e(".modal-content");n.LoadingOverlay("show");const r=e("#requirement_id").val();e.post("api/req/del_formalization",{requirement_id:r,formalization_id:t},function(t){n.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").html(t.html)}).done(function(){L(),T(),M(),q(),F()})}(e(this).attr("name"))})}function q(){e(".reqirement-variable").each(function(t){let n=new a(this),r=new o(n,{dropdown:{maxCount:10}});r.register([{match:/(^|\s|[!=&\|>]+)(\w+)$/,search:function(e,t){include_elems=function(e){return s.search(e)}(e),result=[];for(let e=0;e<Math.min(10,include_elems.length);e++)result.push(h[include_elems[e]]);t(result)},replace:function(e){return"$1"+e+" "}}]),e(this).on("blur click",function(e){r.dropdown.deactivate(),e.preventDefault()})})}function P(n){if(-1===n)return void alert("Requirement not found.");let r=e("#requirements_table").DataTable().row(n).data(),o=e(".modal-content");e("#requirement_modal").modal("show"),o.LoadingOverlay("show"),e("#formalization_accordion").html(""),e("#requirement_tag_field").data("bs.tokenfield").$input.autocomplete({source:l}),e.get("api/req/get",{id:r.id,row_idx:n},function(t){if(!1===t.success)return void alert("Could Not load the Requirement: "+t.errormsg);e("#requirement_id").val(t.id),e("#modal_associated_row_index").val(n),h=t.available_vars,y=t.type_inference_errors,s=new i(h,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:12,minMatchCharLength:1,keys:void 0}),e("#requirement_modal_title").html(t.id+": "+t.type),e("#description_textarea").text(t.desc),e("#add_guess_description").text(t.desc),e("#formalization_accordion").html(t.formalizations_html),e("#requirement_scope").val(t.scope),e("#requirement_pattern").val(t.pattern),e("#requirement_tag_field").tokenfield("setTokens",t.tags),e("#requirement_status").val(t.status);let r=e("#csv_content_accordion");r.html(""),r.collapse("hide");let o=t.csv_data;for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];r.append("<p><strong>"+e+":</strong>"+t+"</p>")}let a=e("#show_revision_diff");e.isEmptyObject(t.revision_diff)?a.hide():a.show();let l=e("#revision_diff_accordion");l.html(""),l.collapse("hide");let c=t.revision_diff;for(const e in c)if(c.hasOwnProperty(e)){const t=c[e];l.append("<p><strong>"+e+":</strong><pre>"+t+"</pre></p>")}}).done(function(){L(),q(),M(),e("#requirement_tag_field").on("tokenfield:createtoken",function(t){let n=e(this).tokenfield("getTokens");e.each(n,function(e,n){n.value===t.attrs.value&&t.preventDefault()})}),e("#requirement_modal").data({unsaved_changes:!1,updated_formalization:!1}),e("textarea").each(function(){t(e(this)),t.update(e(this))}),o.LoadingOverlay("hide",!0)})}function j(){let t=e("#requirements_table").DataTable(),n=[];e.each(t.columns().visible(),function(t,r){!1===r?(e("#col_toggle_button_"+t).removeClass("btn-info").addClass("btn-secondary"),n.push(!1)):(e("#col_toggle_button_"+t).removeClass("btn-secondary").addClass("btn-info"),n.push(!0))}),p=n}function z(t){t.columns().every(function(e){e>0&&t.column(e).header().append(" ("+e+")")}),e("#save_requirement_modal").click(function(){!function(t){let n=e(".modal-content");n.LoadingOverlay("show");const r=e("#requirement_id").val(),i=e("#requirement_tag_field").val(),o=e("#requirement_status").val(),a=e("#requirement_modal").data("updated_formalization"),s=parseInt(e("#modal_associated_row_index").val());let l={};e(".formalization_card").each(function(t){let n={};n.id=e(this).attr("title"),e(this).find("select").each(function(){e(this).hasClass("scope_selector")&&(n.scope=e(this).val()),e(this).hasClass("pattern_selector")&&(n.pattern=e(this).val())}),n.expression_mapping={},e(this).find("textarea.reqirement-variable").each(function(){""!==e(this).attr("title")&&(n.expression_mapping[e(this).attr("title")]=e(this).val())}),l[n.id]=n}),e.post("api/req/update",{id:r,row_idx:s,update_formalization:a,tags:i,status:o,formalizations:JSON.stringify(l)},function(r){n.LoadingOverlay("hide",!0),!1===r.success?alert(r.errormsg):(t.row(s).data(r),e("#requirement_modal").data("unsaved_changes",!1).modal("hide"))}).done(function(){F()})}(t)}),e("#search_bar").keypress(function(e){13===e.which&&(E(),t.draw())}),e("#type-filter-input").autocomplete({minLength:0,source:u,delay:100}),e("#status-filter-input").autocomplete({minLength:0,source:c,delay:100}),e("#tag-filter-input").autocomplete({minLength:0,source:l,delay:100}),e("#tag-filter-input, #status-filter-input, #type-filter-input").on("focus",function(){e(this).keydown()}).on("keypress",function(e){13===e.which&&(O(),t.draw())}),e("#table-filter-toggle").click(function(){e("#tag-filter-input").autocomplete({source:l}),e("#type-filter-input").autocomplete({source:u})}),e(".clear-all-filters").click(function(){e("#status-filter-input").val("").effect("highlight",{color:"green"},500),e("#tag-filter-input").val("").effect("highlight",{color:"green"},500),e("#type-filter-input").val("").effect("highlight",{color:"green"},500),e("#search_bar").val("").effect("highlight",{color:"green"},500),O(),E(),t.draw()}),e("#gen-req-from-selection").click(function(){let n=[];t.rows({search:"applied"}).every(function(){let e=this.data();n.push(e.id)}),e("#selected_requirement_ids").val(JSON.stringify(n)),e("#generate_req_form").submit()}),e("#gen-csv-from-selection").click(function(){let n=[];t.rows({search:"applied"}).every(function(){let e=this.data();n.push(e.id)}),e("#selected_csv_requirement_ids").val(JSON.stringify(n)),e("#generate_csv_form").submit()}),e(".colum-toggle-button").on("click",function(n){n.preventDefault();let r=t.column(e(this).attr("data-column"));r.visible(!r.visible()),j()}),e(".reset-colum-toggle").on("click",function(e){e.preventDefault(),t.columns(".default-col").visible(!0),t.columns(".extra-col").visible(!1),j()}),j(),e(".select-all-button").on("click",function(n){e(this).hasClass("btn-secondary")?t.rows({page:"current"}).select():t.rows({page:"current"}).deselect(),e(".select-all-button").toggleClass("btn-secondary btn-primary")}),t.on("user-select",function(){let t=e(".select-all-button");t.removeClass("btn-primary"),t.addClass("btn-secondary ")}),e("#multi-add-tag-input, #multi-remove-tag-input").autocomplete({minLength:0,source:l,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e("#multi-set-status-input").autocomplete({minLength:0,source:c,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e(".apply-multi-edit").click(function(){!function(t){let n=e("body");n.LoadingOverlay("show");let r=e("#multi-add-tag-input").val().trim(),i=e("#multi-remove-tag-input").val().trim(),o=e("#multi-set-status-input").val().trim(),a=S(t);e.post("api/req/multi_update",{add_tag:r,remove_tag:i,set_status:o,selected_ids:JSON.stringify(a)},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()})}(t)}),e(".add_top_guess_button").confirmation({rootSelector:".add_top_guess_button"}).click(function(){!function(t){let n=e("body");n.LoadingOverlay("show");let r=S(t),i=e("#top_guess_append_mode").val();e.post("api/req/multi_add_top_guess",{selected_ids:JSON.stringify(r),insert_mode:i},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()})}(t)})}function A(t){let n=e("#requirements_table").DataTable({language:{emptyTable:"Loading data."},paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/req/gets",deferRender:!0,columnDefs:t,createdRow:function(t,n,r){"Heading"===n.type&&e(t).addClass("bg-primary"),"Information"===n.type&&e(t).addClass("table-info"),"Requirement"===n.type&&e(t).addClass("table-warning"),"not set"===n.type&&e(t).addClass("table-light")},infoCallback:function(t,n,r,i,o,a){var s=this.api().page.info();e("#clear-all-filters-text").html("Showing "+o+"/"+s.recordsTotal+". Clear all.");let l="Showing "+n+" to "+r+" of "+o+" entries";return l+=" (filtered from "+s.recordsTotal+" total entries)."},initComplete:function(){e("#search_bar").val(_),e("#type-filter-input").val(k),e("#tag-filter-input").val(w),e("#status-filter-input").val(b),function(t){e("#requirements_table").find("tbody").on("click","a",function(n){n.preventDefault(),P(t.row(e(n.target).parent()).index())})}(n),z(n),function(t){if(t.q.length>0){e("#status-filter-input").val(""),e("#tag-filter-input").val(""),e("#type-filter-input").val("");const n=":COL_INDEX_"+function(e){let t="00"+e;return t.substr(t.length-2)}(t.col).toString()+":"+t.q;e("#search_bar").val(n)}}(g),E(),O(),e.fn.dataTable.ext.search.push(function(e,t,n){return function(e){return x.evaluate(e,p)&&C.evaluate(e,p)}(t)}),this.api().draw()}})}function I(){let n=e("#requirement_guess_modal"),r=e("#available_guesses_cards"),i=e(".modal-content"),o=e("#requirement_id").val();function a(e){let t='<div class="card">                    <div class="pl-1 pr-1">                        <p>'+e.string+'                        </p>                    </div>                    <button type="button" class="btn btn-success btn-sm add_guess"                            title="Add formalization"                            data-scope="'+e.scope+'"                            data-pattern="'+e.pattern+"\"                            data-mapping='"+JSON.stringify(e.mapping)+"'>                        <strong>+ Add this formalization +</strong>                    </button>                </div>";r.append(t)}n.modal({keyboard:!1}),n.modal("show"),i.LoadingOverlay("show"),r.html(""),e.post("api/req/get_available_guesses",{requirement_id:o},function(e){if(!1===e.success)alert(e.errormsg);else for(let t=0;t<e.available_guesses.length;t++)a(e.available_guesses[t])}).done(function(){e(".add_guess").click(function(){!function(t,n,r){let i=e(".modal-content");i.LoadingOverlay("show");let o=e("#requirement_id").val();e.post("api/req/add_formalization_from_guess",{requirement_id:o,scope:t,pattern:n,mapping:JSON.stringify(r)},function(t){i.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").append(t.html)}).done(function(){L(),T(),M(),q(),F()})}(e(this).data("scope"),e(this).data("pattern"),e(this).data("mapping"))}),t.update(e("#add_guess_description")),i.LoadingOverlay("hide",!0)})}function N(){let t=[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{targets:[1],data:"pos"},{targets:[2],data:"id",render:function(e,t,n,r){return result='<a href="#">'+e+"</a>",result}},{targets:[3],data:"desc"},{targets:[4],data:"type",render:function(e,t,n,r){return u.indexOf(e)<=-1&&u.push(e),e}},{targets:[5],data:"tags",render:function(t,n,r,i){if(result="",e(t).each(function(e,t){var n;t.length>0&&(result+='<span class="badge" style="background-color: '+(n=t,m.hasOwnProperty(n)?m[n]:"#5bc0de")+'">'+t+"</span></br>",l.indexOf(t)<=-1&&l.push(t))}),r.formal.length>0){let t=!1,n=!1;e.each(r.formal,function(e,r){r.length>0&&"// None, // not formalizable"!==r?t||(t=!0,result+='<span class="badge badge-success">has_formalization</span></br>'):n||(n=!0,result+='<span class="badge badge-warning">incomplete_formalization</span></br>')})}return result}},{targets:[6],data:"status",render:function(e,t,n,r){return result='<span class="badge badge-info">'+e+"</span></br>",result}},{targets:[7],data:"formal",render:function(t,n,r,i){return result="",r.formal.length>0&&e(t).each(function(e,t){t.length>0&&(result+="<p>"+t+"</p>")}),result}}];e.get("api/table/colum_defs","",function(e){const n=e.col_defs.length;for(let r=0;r<n;r++)t.push({targets:[parseInt(e.col_defs[r].target)],data:e.col_defs[r].csv_name,visible:!1,searchable:!0})}).done(function(){A(t)})}function R(){let n=e("#requirement_modal");e("#requirement_tag_field").tokenfield({autocomplete:{source:l,delay:100},showAutocompleteOnFocus:!0}).change(function(e){n.data("unsaved_changes",!0)}),e("#requirement_status").change(function(){e("#requirement_modal").data("unsaved_changes",!0)}),n.on("hide.bs.modal",function(t){!function(t){!0===e("#requirement_modal").data("unsaved_changes")&&!0!==confirm("You have unsaved changes, do you really want to close?")&&t.preventDefault()}(t)}),e(document).keyup(function(t){if(e(".modal:visible").length&&27===t.keyCode){let t=e("input[type=text], textarea, select").filter(":focus");0===t.length?e("#requirement_guess_modal:visible").length?e("#requirement_guess_modal").modal("hide"):e("#requirement_modal").modal("hide"):t.each(function(t){e(this).blur()})}}),n.on("hidden.bs.modal",function(n){e("#requirement_tag_field").val(""),e("#requirement_tag_field-tokenfield").val(""),e("textarea").each(function(){t.destroy(e(this))})}),e("#add_formalization").click(function(){!function(){let t=e(".modal-content");t.LoadingOverlay("show");const n=e("#requirement_id").val();e.post("api/req/new_formalization",{id:n},function(n){t.LoadingOverlay("hide",!0),!1===n.success?alert(n.errormsg):e("#formalization_accordion").append(n.html)}).done(function(){L(),T(),M(),q(),F()})}()}),e("#add_gussed_formalization").click(function(){I()}),e(".modal").on("hidden.bs.modal",function(t){e(".modal:visible").length&&e("body").addClass("modal-open")}),e("#formalization_accordion").on("shown.bs.collapse",".card",function(n){e(this).find("textarea").each(function(){t(e(this)),t.update(e(this))})}),L()}function D(){e.get("api/meta/get","",function(t){m=t.tag_colors,f=t.available_search_strings,e("#search_bar").autocomplete({source:f})})}function F(){e.get("api/logs/get","",function(t){e("#log_textarea").html(t)}).done(function(){e(".req_direct_link").click(function(){P(function(t){let n=-1;return e("#requirements_table").DataTable().column(2).data().filter(function(e,r){return e===t&&(n=r,!0)}),n}(e(this).data("rid")))}),e("#log_textarea").scrollTop(1e5)})}function H(){e.get("api/report/get",{},function(t){if(!1===t.success)alert(t.errormsg);else{let n="";d=t.data,e.each(t.data,function(e,t){n+=`<div class="card border-primary">\n                              <div class="card-body">\n                                <h5 class="card-title">Report ${e}</h5>\n                                <h6 class="card-subtitle mb-2 text-muted">Query</h6>\n                                <p class="card-text report-results">${t.queries}</p>\n                                <h6 class="card-subtitle mb-2 text-muted">Results</h6>\n                                <p class="card-text report-results">${t.results}</p>\n                                <a href="#" class="card-link open-report" data-id="${e}">\n                                    Edit (reevaluate) Report.\n                                </a>\n                                <a href="#" class="card-link delete-report" data-id="${e}">Delete Report.</a>\n                              </div>\n                            </div>`}),e("#available_reports").html(n)}})}function W(t=!1){let n=e("#report_query_textarea"),r=e("#report_results_textarea"),i="",o="",a=-1,s=e("#report_modal");!1!==t&&(a=t.attr("data-id"),i=d[a].queries,o=d[a].results),n.val(i),r.val(o),e("#save_report").attr("data-id",a),s.modal("show")}function Q(){e("#add-new-report").click(function(){W()}),e("#eval_report").click(function(){!function(){let t=e("body");t.LoadingOverlay("show");const n=e("#report_query_textarea").val().split("\n");let i=e("#requirements_table").DataTable(),o="";try{e.each(n,function(e,t){x=r.fromQuery(t),i.draw();let n=i.page.info();o+=`Eval of query No. ${e} => ${n.recordsDisplay} results.\n`}),e("#report_results_textarea").val(o),E(),i.draw()}catch(e){alert(e)}t.LoadingOverlay("hide",!0)}()}),e("#save_report").click(function(){!function(){let t=e("body");t.LoadingOverlay("show"),e.post("api/report/set",{report_querys:e("#report_query_textarea").val(),report_results:e("#report_results_textarea").val(),report_id:e("#save_report").attr("data-id")},function(e){t.LoadingOverlay("hide",!0),!1===e.success&&alert(e.errormsg),H()})}()});let t=e("#available_reports");t.on("click",".open-report",function(t){W(e(this))}),t.on("click",".delete-report",function(t){var n;n=e(this).attr("data-id"),e.ajax({type:"DELETE",url:"api/report/delete",data:{report_id:n},success:function(e){!1===e.success&&alert(e.errormsg),H()}})}),H()}e(document).ready(function(){D(),N(),R(),function(){let t=e("#search_bar");e("#store_search").click(function(){let n=e("body");n.LoadingOverlay("show");const r=t.val();e.post("api/req_search/update",{query:r},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):(t.effect("highlight",{color:"green"},500),D())})}),t.on("keypress",function(n){if("Delete"===n.originalEvent.key){const n=t.val();if(f.includes(n)){let r=e("body");e.post("api/req_search/delete",{query:n},function(e){r.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):(t.effect("highlight",{color:"green"},500),D())})}}})}(),F(),Q()})}).call(this,n(3))},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(12);(r=o)&&r.__esModule;var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.term=n,this.strategy=r}return i(e,[{key:"replace",value:function(e,t){var n=this.strategy.replace(this.data);if(null!==n){Array.isArray(n)&&(t=n[1]+t,n=n[0]);var r=this.strategy.matchText(e);if(r)return n=n.replace(/\$&/g,r[0]).replace(/\$(\d)/g,function(e,t){return r[parseInt(t,10)]}),[[e.slice(0,r.index),n,e.slice(r.index+r[0].length)].join(""),t]}}},{key:"render",value:function(){return this.strategy.template(this.data,this.term)}}]),e}();t.default=a}});