!function(e){function t(t){for(var r,a,s=t[0],l=t[1],c=t[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={2:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./static/dist/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([209,0]),n()}({16:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);o<a;o++)s[o]=r[o].fn;return s},s.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,d=u.length;for(c=0;c<d;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,r);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){var r=new a(t,n||this),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.once=function(e,t,n){var r=new a(t,n||this,!0),o=i?i+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||r&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new o:delete this._events[t])):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,e.exports=s},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){return e}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,this.cache=t.cache?{}:null}return r(e,[{key:"destroy",value:function(){return this.cache=null,this}},{key:"search",value:function(e,t,n){this.cache?this.searchWithCache(e,t,n):this.props.search(e,t,n)}},{key:"replace",value:function(e){return this.props.replace(e)}},{key:"searchWithCache",value:function(e,t,n){var r=this;this.cache&&this.cache[e]?t(this.cache[e]):this.props.search(e,(function(n){r.cache&&(r.cache[e]=n),t(n)}),n)}},{key:"matchText",value:function(e){return"function"==typeof this.match?this.match(e):e.match(this.match)}},{key:"match",get:function(){return this.props.match}},{key:"index",get:function(){return"number"==typeof this.props.index?this.props.index:2}},{key:"template",get:function(){return this.props.template||i}}]),e}();t.default=o},209:function(e,t,n){(function(e){n(8),n(6),n(10),n(7),n(211),n(11),n(12),n(13),n(19),n(20),n(14);let t=n(27);const r=n(28),{SearchNode:i}=n(15);let o=n(216),{Textcomplete:a,Textarea:s}=n(217),l=new o([],{}),c=["","has_formalization"],u=["","Todo","Review","Done"],h=[":AND:",":OR:",":NOT:",":COL_INDEX_01:",":COL_INDEX_02:",":COL_INDEX_03:",":COL_INDEX_04:",":COL_INDEX_05:",":COL_INDEX_06:",":COL_INDEX_07:"],f=[""],d=[""],p=[],v=[""],m=[!0,!0,!0,!0,!0,!0],g=[],y=JSON.parse(search_query),_={},b=[],w=sessionStorage.getItem("req_search_string"),k=sessionStorage.getItem("filter_status_string"),x=sessionStorage.getItem("filter_tag_string"),C=sessionStorage.getItem("filter_type_string"),O=void 0,E=void 0;function S(){w=e("#search_bar").val().trim(),sessionStorage.setItem("req_search_string",w),O=i.fromQuery(w)}function L(){function t(e,t,n){return t.length>0&&(e.length>0&&(e=e.concat([":AND:"])),e=e.concat(function(e){return["("].concat(e,[")"])}(i.awesomeQuerySplitt0r(t,n)))),e}g=[],k=e("#status-filter-input").val(),x=e("#tag-filter-input").val(),C=e("#type-filter-input").val(),sessionStorage.setItem("filter_status_string",k),sessionStorage.setItem("filter_tag_string",x),sessionStorage.setItem("filter_type_string",C),g=t(g,C,4),g=t(g,x,5),g=t(g,k,6),E=i.searchArrayToTree(g)}function M(e){let t=[];return e.rows({selected:!0}).every((function(){let e=this.data();t.push(e.id)})),t}function P(){e(".requirement_var_group").each((function(){e(this).hide(),e(this).removeClass("type-error")})),e(".formalization_card").each((function(){const t=e(this).attr("title"),n=e("#requirement_scope"+t).val(),r=e("#requirement_pattern"+t).val();let i=e("#formalization_heading"+t),o=e("#requirement_var_group_p"+t),a=e("#requirement_var_group_q"+t),s=e("#requirement_var_group_r"+t),l=e("#requirement_var_group_s"+t),c=e("#requirement_var_group_t"+t),u=e("#requirement_var_group_u"+t),h=e("#requirement_var_group_v"+t);if(t in b)for(let n=0;n<b[t].length;n++)e("#formalization_var_"+b[t][n]+t).addClass("type-error"),i.addClass("type-error-head");else i.removeClass("type-error-head");switch(n){case"BEFORE":case"AFTER":o.show();break;case"BETWEEN":case"AFTER_UNTIL":o.show(),a.show()}Object.keys(_PATTERNS[r].env).forEach((function(e){switch(e){case"R":s.show();break;case"S":l.show();break;case"T":c.show();break;case"U":u.show();break;case"V":h.show()}}))}))}function q(e){let n="";return e.split(/([\s&<>!()=:\[\]{}\-|+*,])/g).forEach((function(e){if(d.includes(e)){n+='<a href="./variables'+("?command=search&col=1&q=%5C%22"+e+"%5C%22")+'" target="_blank"  title="Go to declaration of '+e+'" class="alert-link">'+e+"</a>"}else n+=t.escapeHtml(e)})),n}function T(){e(".formalization_card").each((function(){const t=e(this).attr("title");let n="",i=e("#current_formalization_textarea"+t);const o=e("#requirement_scope"+t).find("option:selected").text().replace(/\s\s+/g," "),a=e("#requirement_pattern"+t).find("option:selected").text().replace(/\s\s+/g," ");"None"!==o&&"None"!==a&&(n=o+", "+a+".");let s=e("#formalization_var_p"+t).val(),l=e("#formalization_var_q"+t).val(),c=e("#formalization_var_r"+t).val(),u=e("#formalization_var_s"+t).val(),h=e("#formalization_var_t"+t).val(),f=e("#formalization_var_u"+t).val(),d=e("#formalization_var_v"+t).val();s.length>0&&(n=n.replace(/{P}/g,q(s))),l.length>0&&(n=n.replace(/{Q}/g,q(l))),c.length>0&&(n=n.replace(/{R}/g,q(c))),u.length>0&&(n=n.replace(/{S}/g,q(u))),h.length>0&&(n=n.replace(/{T}/g,q(h))),f.length>0&&(n=n.replace(/{U}/g,q(f))),d.length>0&&(n=n.replace(/{V}/g,q(d))),i.html(n),r.update(i)})),e("#requirement_modal").data({unsaved_changes:!0,updated_formalization:!0})}function j(t){let n=new s(t),r=new a(n,{dropdown:{maxCount:10}});r.register([{match:/(^|\s|[!=&\|>]+)(\w+)$/,search:function(e,t){let n=function(e){return l.search(e)}(e),r=[];for(let e=0;e<Math.min(10,n.length);e++)r.push(d[n[e]]);t(r)},replace:function(e){return"$1"+e+" "}}]),e(t).on("blur click",(function(e){r.dropdown.deactivate(),e.preventDefault()}))}function A(){e(".reqirement-variable").each((function(){j(this)}))}function I(t){if(-1===t)return void alert("Requirement not found.");let n=e("#requirements_table").DataTable().row(t).data(),r=e(".modal-content");e("#requirement_modal").modal("show"),r.LoadingOverlay("show"),e("#formalization_accordion").html(""),e("#requirement_tag_field").data("bs.tokenfield").$input.autocomplete({source:c}),e.get("api/req/get",{id:n.id,row_idx:t},(function(n){if(!1===n.success)return void alert("Could Not load the Requirement: "+n.errormsg);e("#requirement_id").val(n.id),e("#modal_associated_row_index").val(t),d=n.available_vars,d=d.concat(n.additional_static_available_vars),b=n.type_inference_errors,l=new o(d,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:12,minMatchCharLength:1,keys:void 0}),e("#requirement_modal_title").html(n.id+": "+n.type),e("#description_textarea").text(n.desc).change(),e("#add_guess_description").text(n.desc).change(),e("#formalization_accordion").html(n.formalizations_html),e("#requirement_scope").val(n.scope),e("#requirement_pattern").val(n.pattern),e("#requirement_tag_field").tokenfield("setTokens",n.tags),e("#requirement_status").val(n.status);let r=e("#csv_content_accordion");r.html(""),r.collapse("hide");let i=n.csv_data;for(const e in i)if(i.hasOwnProperty(e)){const t=i[e];r.append("<p><strong>"+e+":</strong>"+t+"</p>")}let a=e("#show_revision_diff");e.isEmptyObject(n.revision_diff)?a.hide():a.show();let s=e("#revision_diff_accordion");s.html(""),s.collapse("hide");let c=n.revision_diff;for(const e in c)if(c.hasOwnProperty(e)){const t=c[e];s.append("<p><strong>"+e+":</strong><pre>"+t+"</pre></p>")}let u=e("#used_variables_accordion");u.html(""),u.collapse("hide"),n.vars.forEach((function(e){let t="?command=search&col=1&q=%5C%22"+e+"%5C%22";u.append('<span class="badge badge-info"><a href="./variables'+t+'" target="_blank">'+e+"</a></span>&numsp;")}))})).done((function(){P(),A(),e("#requirement_tag_field").on("tokenfield:createtoken",(function(t){let n=e(this).tokenfield("getTokens");e.each(n,(function(e,n){n.value===t.attrs.value&&t.preventDefault()}))})),T(),e("#requirement_modal").data({unsaved_changes:!1,updated_formalization:!1}),r.LoadingOverlay("hide",!0)}))}function N(){let t=e("#requirements_table").DataTable(),n=[];e.each(t.columns().visible(),(function(t,r){!1===r?(e("#col_toggle_button_"+t).removeClass("btn-info").addClass("btn-secondary"),n.push(!1)):(e("#col_toggle_button_"+t).removeClass("btn-secondary").addClass("btn-info"),n.push(!0))})),m=n}function z(t){t.columns().every((function(e){e>0&&t.column(e).header().append(" ("+e+")")})),e("#save_requirement_modal").click((function(){!function(t){let n=e(".modal-content");n.LoadingOverlay("show");const r=e("#requirement_id").val(),i=e("#requirement_tag_field").val(),o=e("#requirement_status").val(),a=e("#requirement_modal").data("updated_formalization"),s=parseInt(e("#modal_associated_row_index").val());let l={};e(".formalization_card").each((function(){let t={};t.id=e(this).attr("title"),e(this).find("select").each((function(){e(this).hasClass("scope_selector")&&(t.scope=e(this).val()),e(this).hasClass("pattern_selector")&&(t.pattern=e(this).val())})),t.expression_mapping={},e(this).find("textarea.reqirement-variable").each((function(){""!==e(this).attr("title")&&(t.expression_mapping[e(this).attr("title")]=e(this).val())})),l[t.id]=t})),e.post("api/req/update",{id:r,row_idx:s,update_formalization:a,tags:i,status:o,formalizations:JSON.stringify(l)},(function(r){n.LoadingOverlay("hide",!0),!1===r.success?alert(r.errormsg):(t.row(s).data(r),e("#requirement_modal").data("unsaved_changes",!1).modal("hide"))})).done((function(){Q()}))}(t)})),e("#search_bar").keypress((function(e){13===e.which&&(S(),t.draw())})),e("#type-filter-input").autocomplete({minLength:0,source:f,delay:100}),e("#status-filter-input").autocomplete({minLength:0,source:u,delay:100}),e("#tag-filter-input").autocomplete({minLength:0,source:c,delay:100}),e("#tag-filter-input, #status-filter-input, #type-filter-input").on("focus",(function(){e(this).keydown()})).on("keypress",(function(e){13===e.which&&(L(),t.draw())})),e("#table-filter-toggle").click((function(){e("#tag-filter-input").autocomplete({source:c}),e("#type-filter-input").autocomplete({source:f})})),e(".clear-all-filters").click((function(){e("#status-filter-input").val("").effect("highlight",{color:"green"},500),e("#tag-filter-input").val("").effect("highlight",{color:"green"},500),e("#type-filter-input").val("").effect("highlight",{color:"green"},500),e("#search_bar").val("").effect("highlight",{color:"green"},500),L(),S(),t.draw()})),e("#gen-req-from-selection").click((function(){let n=[];t.rows({search:"applied"}).every((function(){let e=this.data();n.push(e.id)})),e("#selected_requirement_ids").val(JSON.stringify(n)),e("#generate_req_form").submit()})),e("#gen-csv-from-selection").click((function(){let n=[];t.rows({search:"applied"}).every((function(){let e=this.data();n.push(e.id)})),e("#selected_csv_requirement_ids").val(JSON.stringify(n)),e("#generate_csv_form").submit()})),e(".colum-toggle-button").on("click",(function(n){n.preventDefault();let r=t.column(e(this).attr("data-column"));r.visible(!r.visible()),N()})),e(".reset-colum-toggle").on("click",(function(e){e.preventDefault(),t.columns(".default-col").visible(!0),t.columns(".extra-col").visible(!1),N()})),N(),e(".select-all-button").on("click",(function(){e(this).hasClass("btn-secondary")?t.rows({page:"current"}).select():t.rows({page:"current"}).deselect(),e(".select-all-button").toggleClass("btn-secondary btn-primary")})),t.on("user-select",(function(){let t=e(".select-all-button");t.removeClass("btn-primary"),t.addClass("btn-secondary ")})),e("#multi-add-tag-input, #multi-remove-tag-input").autocomplete({minLength:0,source:c,delay:100}).on("focus",(function(){e(this).keydown()})).val(""),e("#multi-set-status-input").autocomplete({minLength:0,source:u,delay:100}).on("focus",(function(){e(this).keydown()})).val(""),e(".apply-multi-edit").click((function(){!function(t){let n=e("body");n.LoadingOverlay("show");let r=e("#multi-add-tag-input").val().trim(),i=e("#multi-remove-tag-input").val().trim(),o=e("#multi-set-status-input").val().trim(),a=M(t);e.post("api/req/multi_update",{add_tag:r,remove_tag:i,set_status:o,selected_ids:JSON.stringify(a)},(function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}(t)})),e(".add_top_guess_button").confirmation({rootSelector:".add_top_guess_button"}).click((function(){!function(t){let n=e("body");n.LoadingOverlay("show");let r=M(t),i=e("#top_guess_append_mode").val();e.post("api/req/multi_add_top_guess",{selected_ids:JSON.stringify(r),insert_mode:i},(function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}(t)}))}function R(n){e("#requirements_table").DataTable({language:{emptyTable:"Loading data."},paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/req/gets",deferRender:!0,columnDefs:n,createdRow:function(t,n){"Heading"===n.type&&e(t).addClass("bg-primary"),"Information"===n.type&&e(t).addClass("table-info"),"Requirement"===n.type&&e(t).addClass("table-warning"),"not set"===n.type&&e(t).addClass("table-light")},infoCallback:function(t,n,r,i,o){let a=this.api().page.info();e("#clear-all-filters-text").html("Showing "+o+"/"+a.recordsTotal+". Clear all.");let s="Showing "+n+" to "+r+" of "+o+" entries";return s+=" (filtered from "+a.recordsTotal+" total entries).",s},initComplete:function(){e("#search_bar").val(w),e("#type-filter-input").val(C),e("#tag-filter-input").val(x),e("#status-filter-input").val(k);let n=this.api();!function(t){e("#requirements_table").find("tbody").on("click","a",(function(n){n.preventDefault(),I(t.row(e(this).closest("tr")).index())}))}(n),z(n),t.process_url_query(y),S(),L(),e.fn.dataTable.ext.search.push((function(e,t){return function(e){return O.evaluate(e,m)&&E.evaluate(e,m)}(t)})),this.api().draw(),e("#requirements_table").colResizable({liveDrag:!0,postbackSafe:!0})}})}function D(){let t=e("#requirement_guess_modal"),n=e("#available_guesses_cards"),r=e(".modal-content"),i=e("#requirement_id").val();function o(e){let t='<div class="card">                    <div class="pl-1 pr-1">                        <p>'+e.string+'                        </p>                    </div>                    <button type="button" class="btn btn-success btn-sm add_guess"                            title="Add formalization"                            data-scope="'+e.scope+'"                            data-pattern="'+e.pattern+"\"                            data-mapping='"+JSON.stringify(e.mapping)+"'>                        <strong>+ Add this formalization +</strong>                    </button>                </div>";n.append(t)}t.modal({keyboard:!1}),t.modal("show"),r.LoadingOverlay("show"),n.html(""),e.post("api/req/get_available_guesses",{requirement_id:i},(function(e){if(!1===e.success)alert(e.errormsg);else for(let t=0;t<e.available_guesses.length;t++)o(e.available_guesses[t])})).done((function(){e(".add_guess").click((function(){!function(t,n,r){let i=e(".modal-content");i.LoadingOverlay("show");let o=e("#requirement_id").val();e.post("api/req/add_formalization_from_guess",{requirement_id:o,scope:t,pattern:n,mapping:JSON.stringify(r)},(function(t){i.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").append(t.html)})).done((function(){P(),T(),A(),Q()}))}(e(this).data("scope"),e(this).data("pattern"),e(this).data("mapping"))})),r.LoadingOverlay("hide",!0)}))}function H(){let n=[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{targets:[1],data:"pos"},{targets:[2],data:"id",render:function(e){return'<a href="#">'+t.escapeHtml(e)+"</a>"}},{targets:[3],data:"desc",render:function(e){return'<div class="white-space-pre">'+t.escapeHtml(e)+"</div>"}},{targets:[4],data:"type",render:function(e){return f.indexOf(e)<=-1&&f.push(e),t.escapeHtml(e)}},{targets:[5],data:"tags",render:function(n,r,i){let o="";if(e(n).each((function(e,n){var r;n.length>0&&(o+='<span class="badge" style="background-color: '+(r=n,(_.hasOwnProperty(r)?_[r]:"#5bc0de")+'">')+t.escapeHtml(n)+"</span></br>",c.indexOf(n)<=-1&&c.push(n))})),i.formal.length>0){let t=!1,n=!1;e.each(i.formal,(function(e,r){r.length>0&&"// None, // not formalizable"!==r?t||(t=!0,o+='<span class="badge badge-success">has_formalization</span></br>'):n||(n=!0,o+='<span class="badge badge-warning">incomplete_formalization</span></br>')}))}return o}},{targets:[6],data:"status",render:function(e){return'<span class="badge badge-info">'+e+"</span></br>"}},{targets:[7],data:"formal",render:function(n,r,i){let o="";return i.formal.length>0&&e(n).each((function(e,n){n.length>0&&(o+='<div class="white-space-pre">'+t.escapeHtml(n)+"</div>")})),o}}];e.get("api/table/colum_defs","",(function(e){const t=e.col_defs.length;for(let r=0;r<t;r++)n.push({targets:[parseInt(e.col_defs[r].target)],data:e.col_defs[r].csv_name,visible:!1,searchable:!0})})).done((function(){R(n)}))}function F(){let t=e("#requirement_modal");e("#requirement_tag_field").tokenfield({autocomplete:{source:c,delay:100},showAutocompleteOnFocus:!0}).change((function(){t.data("unsaved_changes",!0)})),e("#requirement_status").change((function(){e("#requirement_modal").data("unsaved_changes",!0)})),t.on("hide.bs.modal",(function(t){!function(t){if(!0===e("#requirement_modal").data("unsaved_changes")){!0!==confirm("You have unsaved changes, do you really want to close?")&&t.preventDefault()}}(t)})),e(document).keyup((function(t){if(e(".modal:visible").length&&27===t.keyCode){let t=e("input[type=text], textarea, select").filter(":focus");0===t.length?e("#requirement_guess_modal:visible").length?e("#requirement_guess_modal").modal("hide"):e("#requirement_modal").modal("hide"):t.each((function(){e(this).blur()}))}})),t.on("hidden.bs.modal",(function(){e("#requirement_tag_field").val(""),e("#requirement_tag_field-tokenfield").val("")})),e("#add_formalization").click((function(){!function(){let t=e(".modal-content");t.LoadingOverlay("show");const n=e("#requirement_id").val();e.post("api/req/new_formalization",{id:n},(function(n){if(t.LoadingOverlay("hide",!0),!1===n.success)alert(n.errormsg);else{let t=e(n.html);t.find(".reqirement-variable").each((function(){j(this)})),t.appendTo("#formalization_accordion")}})).done((function(){P(),T(),Q()}))}()})),e("#add_gussed_formalization").click((function(){D()})),e(".modal").on("hidden.bs.modal",(function(){e(".modal:visible").length?e("body").addClass("modal-open"):e("textarea").each((function(){r.destroy(e(this))}))})),e("#formalization_accordion").on("shown.bs.collapse",".card",(function(){e(this).find("textarea").each((function(){r(e(this)),r.update(e(this))}))})),P()}function Q(){e.get("api/logs/get","",(function(t){e("#log_textarea").html(t)})).done((function(){e(".req_direct_link").click((function(){I(function(t){let n=e("#requirements_table").DataTable(),r=-1;return n.column(2).data().filter((function(e,n){return String(e)===String(t)&&(r=n,!0)})),r}(e(this).data("rid")))})),e("#log_textarea").scrollTop(1e5)}))}function W(){e.get("api/report/get",{},(function(t){if(!1===t.success)alert(t.errormsg);else{let n="";p=t.data,e.each(t.data,(function(e,t){n+=`<div class="card border-primary">\n                              <div class="card-body">\n                                <h5 class="card-title">${t.name}</h5>\n                                <h6 class="card-subtitle mb-2 text-muted">Query</h6>\n                                <p class="card-text report-results">${t.queries}</p>\n                                <h6 class="card-subtitle mb-2 text-muted">Matches for queries</h6>\n                                <p class="card-text report-results">${t.results}</p>\n                                <a href="#" class="card-link open-report" data-id="${e}">\n                                    Edit (reevaluate) Report.\n                                </a>\n                                <a href="#" class="card-link delete-report" data-id="${e}">Delete Report.</a>\n                              </div>\n                            </div>`})),e("#available_reports").html(n)}}))}function $(t=!1){let n=e("#report_query_textarea"),r=e("#report_results_textarea"),i=e("#report_modal_title"),o=e("#report_name"),a="",s="",l="",c=-1,u=e("#report_modal");!1!==t&&(c=t.attr("data-id"),a=p[c].queries,s=p[c].results,l=p[c].name),n.val(a).change(),r.val(s).change(),o.val(l).change(),i.html(l),e("#save_report").attr("data-id",c),u.modal("show")}function J(){e("#add-new-report").click((function(){$()})),e("#eval_report").click((function(){!function(){let t=e("body");t.LoadingOverlay("show");const n=e("#report_query_textarea").val().split("\n");let r=e("#requirements_table").DataTable(),o="";const a=/^(:NAME:)(`(\w+)`)(.*)/;try{e.each(n,(function(e,t){let n=a.exec(t);null!=n&&(t=n[4],e=n[3]),O=i.fromQuery(t),r.draw();let s=r.page.info();o+=`"${e}":\t${s.recordsDisplay}\n`})),e("#report_results_textarea").val(o).change(),S(),r.draw()}catch(e){alert(e)}t.LoadingOverlay("hide",!0)}()})),e("#save_report").click((function(){!function(){let t=e("body");t.LoadingOverlay("show"),e.post("api/report/set",{report_querys:e("#report_query_textarea").val(),report_results:e("#report_results_textarea").val(),report_name:e("#report_name").val(),report_id:e("#save_report").attr("data-id")},(function(e){t.LoadingOverlay("hide",!0),!1===e.success&&alert(e.errormsg),W()}))}()}));let t=e("#available_reports");t.on("click",".open-report",(function(){$(e(this))})),t.on("click",".delete-report",(function(){var t;t=e(this).attr("data-id"),e.ajax({type:"DELETE",url:"api/report/delete",data:{report_id:t},success:function(e){!1===e.success&&alert(e.errormsg),W()}})})),e("#report_name").change((function(){e("#report_modal_title").html(e(this).val())})),W()}e(document).ready((function(){e.get("api/meta/get","",(function(t){_=t.tag_colors,v=t.available_search_strings;let n=e("#search_bar");new Awesomplete(n[0],{filter:function(e,t){let n=!1;return(t.split(":").length-1)%2==1&&(n=Awesomplete.FILTER_CONTAINS(e,t.match(/[^:]*$/)[0])),n},item:function(e,t){return Awesomplete.ITEM(e,t.match(/(:)([\S]*$)/)[2])},replace:function(e){const t=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=t+e},list:h,minChars:1,autoFirst:!0})})),H(),F(),Q(),J();let t=e("body");t.confirmation({rootSelector:".delete_formalization",selector:".delete_formalization",onConfirm:function(){!function(t,n){let r=e(".modal-content");r.LoadingOverlay("show");const i=e("#requirement_id").val();e.post("api/req/del_formalization",{requirement_id:i,formalization_id:t},(function(e){r.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):n.remove()})).done((function(){P(),T(),Q()}))}(e(this).attr("name"),e(this).closest(".card"))}}),t.on("change",".formalization_selector, .reqirement-variable, .req_var_type",(function(){T()})),t.on("change",".formalization_selector",(function(){P()})),t.on("shown.bs.modal","#requirement_modal",(function(){e(this).find("textarea").each((function(){r(e(this)),r.update(e(this))}))})),t.on("change focus","textarea",(function(){r(e(this)),r.update(e(this))}))}))}).call(this,n(2))},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateElementOffset=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.defaultView,i=n.documentElement,o={top:t.top+r.pageYOffset,left:t.left+r.pageXOffset};i&&(o.top-=i.clientTop,o.left-=i.clientLeft);return o},t.getLineHeightPx=function(e){var t=window.getComputedStyle(e);if(o(t.lineHeight.charCodeAt(0)))return o(t.lineHeight.charCodeAt(t.lineHeight.length-1))?parseFloat(t.lineHeight)*parseFloat(t.fontSize):parseFloat(t.lineHeight);return a(e.nodeName,t)},t.calculateLineHeightPx=a;t.createCustomEvent="function"==typeof window.CustomEvent?function(e,t){return new document.defaultView.CustomEvent(e,{cancelable:t&&t.cancelable||!1,detail:t&&t.detail||void 0})}:function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,t&&t.cancelable||!1,t&&t.detail||void 0),n};var r="0".charCodeAt(0),i="9".charCodeAt(0);function o(e){return e>=r&&e<=i}function a(e,t){var n=document.body;if(!n)return 0;var r=document.createElement(e);r.innerHTML="&nbsp;",r.style.fontSize=t.fontSize,r.style.fontFamily=t.fontFamily,r.style.padding="0",n.appendChild(r),r instanceof HTMLTextAreaElement&&(r.rows=1);var i=r.offsetHeight;return n.removeChild(r),i}},211:function(e,t,n){var r,i;
/*! Bootstrap 4 styling wrapper for Select
 * ©2018 SpryMedia Ltd - datatables.net/license
 */r=[n(2),n(7),n(18)],void 0===(i=function(e){return function(e,t,n,r){return e.fn.dataTable}(e,window,document)}.apply(t,r))||(e.exports=i)},216:function(e,t,n){
/*!
 * Fuse.js v3.6.1 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),a=n(7),s=a.get,l=(a.deepValue,a.isArray),c=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,a=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,f=n.caseSensitive,d=void 0!==f&&f,p=n.tokenSeparator,v=void 0===p?/ +/g:p,m=n.findAllMatches,g=void 0!==m&&m,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.id,w=void 0===b?null:b,k=n.keys,x=void 0===k?[]:k,C=n.shouldSort,O=void 0===C||C,E=n.getFn,S=void 0===E?s:E,L=n.sortFn,M=void 0===L?function(e,t){return e.score-t.score}:L,P=n.tokenize,q=void 0!==P&&P,T=n.matchAllTokens,j=void 0!==T&&T,A=n.includeMatches,I=void 0!==A&&A,N=n.includeScore,z=void 0!==N&&N,R=n.verbose,D=void 0!==R&&R;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:a,threshold:c,maxPatternLength:h,isCaseSensitive:d,tokenSeparator:v,findAllMatches:g,minMatchCharLength:_,id:w,keys:x,includeMatches:I,includeScore:z,shouldSort:O,getFn:S,sortFn:M,verbose:D,tokenize:q,matchAllTokens:j},this.setCollection(t),this._processKeys(x)}var t,n;return t=e,(n=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var r=e[t];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var i=null,o=null,a=0,s=0,l=e.length;s<l;s+=1){var c=e[s];if(!c.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var u=c.name;if(this._keyNames.push(u),!c.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var h=c.weight;if(h<0||h>1)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?h:Math.max(o,h),i=null==i?h:Math.min(i,h),this._keyWeights[u]=h,a+=h}if(a>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,i=n.fullSearcher,o=this._search(r,i);return this._computeScore(o),this.options.shouldSort&&this._sort(o),t.limit&&"number"==typeof t.limit&&(o=o.slice(0,t.limit)),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)t.push(new o(n[r],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0]){for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});return i}for(var s=0,l=n.length;s<l;s+=1)for(var c=n[s],u=0,h=this._keyNames.length;u<h;u+=1){var f=this._keyNames[u];this._analyze({key:f,value:this.options.getFn(c,f),record:c,index:s},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return i}},{key:"_analyze",value:function(e,t){var n=this,r=e.key,i=e.arrayIndex,o=void 0===i?-1:i,a=e.value,s=e.record,c=e.index,u=t.tokenSearchers,h=void 0===u?[]:u,f=t.fullSearcher,d=t.resultMap,p=void 0===d?{}:d,v=t.results,m=void 0===v?[]:v;!function e(t,i,o,a){if(null!=i)if("string"==typeof i){var s=!1,c=-1,u=0;n._log("\nKey: ".concat(""===r?"--":r));var d=f.search(i);if(n._log('Full text: "'.concat(i,'", score: ').concat(d.score)),n.options.tokenize){for(var v=i.split(n.options.tokenSeparator),g=v.length,y=[],_=0,b=h.length;_<b;_+=1){var w=h[_];n._log('\nPattern: "'.concat(w.pattern,'"'));for(var k=!1,x=0;x<g;x+=1){var C=v[x],O=w.search(C),E={};O.isMatch?(E[C]=O.score,s=!0,k=!0,y.push(O.score)):(E[C]=1,n.options.matchAllTokens||y.push(1)),n._log('Token: "'.concat(C,'", score: ').concat(E[C]))}k&&(u+=1)}c=y[0];for(var S=y.length,L=1;L<S;L+=1)c+=y[L];c/=S,n._log("Token score average:",c)}var M=d.score;c>-1&&(M=(M+c)/2),n._log("Score average:",M);var P=!n.options.tokenize||!n.options.matchAllTokens||u>=h.length;if(n._log("\nCheck Matches: ".concat(P)),(s||d.isMatch)&&P){var q={key:r,arrayIndex:t,value:i,score:M};n.options.includeMatches&&(q.matchedIndices=d.matchedIndices);var T=p[a];T?T.output.push(q):(p[a]={item:o,output:[q]},m.push(p[a]))}}else if(l(i))for(var j=0,A=i.length;j<A;j+=1)e(j,i[j],o,a)}(o,a,s,c)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,r=0,i=e.length;r<i;r+=1){for(var o=e[r],a=o.output,s=a.length,l=1,c=0;c<s;c+=1){var u=a[c],h=u.key,f=n?t[h]:1,d=0===u.score&&t&&t[h]>0?Number.EPSILON:u.score;l*=Math.pow(d,f)}o.score=l,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}),2)),n=null}var i=[];this.options.includeMatches&&i.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o=n[r];if(0!==o.matchedIndices.length){var a={indices:o.matchedIndices,value:o.value};o.key&&(a.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(a.arrayIndex=o.arrayIndex),t.matches.push(a)}}})),this.options.includeScore&&i.push((function(e,t){t.score=e.score}));for(var o=0,a=e.length;o<a;o+=1){var s=e[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),i.length){for(var l={item:s.item},c=0,u=i.length;c<u;c+=1)i[c](s,l);t.push(l)}else t.push(s.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&i(t.prototype,n),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),o=n(3),a=n(6),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,s=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,f=n.isCaseSensitive,d=void 0!==f&&f,p=n.tokenSeparator,v=void 0===p?/ +/g:p,m=n.findAllMatches,g=void 0!==m&&m,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.includeMatches,w=void 0!==b&&b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:d,tokenSeparator:v,findAllMatches:g,includeMatches:w,minMatchCharLength:_},this.pattern=d?t:t.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=a(this.pattern))}var t,n;return t=e,(n=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var a={isMatch:!0,score:0};return r&&(a.matchedIndices=[[0,e.length-1]]),a}var s=this.options,l=s.maxPatternLength,c=s.tokenSeparator;if(this.pattern.length>l)return i(e,this.pattern,c);var u=this.options,h=u.location,f=u.distance,d=u.threshold,p=u.findAllMatches,v=u.minMatchCharLength;return o(e,this.pattern,this.patternAlphabet,{location:h,distance:f,threshold:d,findAllMatches:p,minMatchCharLength:v,includeMatches:r})}}])&&r(t.prototype,n),e}();e.exports=s},function(e,t){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(t.replace(n,"\\$&").replace(r,"|")),o=e.match(i),a=!!o,s=[];if(a)for(var l=0,c=o.length;l<c;l+=1){var u=o[l];s.push([e.indexOf(u),u.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var r=n(4),i=n(5);e.exports=function(e,t,n,o){for(var a=o.location,s=void 0===a?0:a,l=o.distance,c=void 0===l?100:l,u=o.threshold,h=void 0===u?.6:u,f=o.findAllMatches,d=void 0!==f&&f,p=o.minMatchCharLength,v=void 0===p?1:p,m=o.includeMatches,g=void 0!==m&&m,y=s,_=e.length,b=h,w=e.indexOf(t,y),k=t.length,x=[],C=0;C<_;C+=1)x[C]=0;if(-1!==w){var O=r(t,{errors:0,currentLocation:w,expectedLocation:y,distance:c});if(b=Math.min(O,b),-1!==(w=e.lastIndexOf(t,y+k))){var E=r(t,{errors:0,currentLocation:w,expectedLocation:y,distance:c});b=Math.min(E,b)}}w=-1;for(var S=[],L=1,M=k+_,P=1<<(k<=31?k-1:30),q=0;q<k;q+=1){for(var T=0,j=M;T<j;)r(t,{errors:q,currentLocation:y+j,expectedLocation:y,distance:c})<=b?T=j:M=j,j=Math.floor((M-T)/2+T);M=j;var A=Math.max(1,y-j+1),I=d?_:Math.min(y+j,_)+k,N=Array(I+2);N[I+1]=(1<<q)-1;for(var z=I;z>=A;z-=1){var R=z-1,D=n[e.charAt(R)];if(D&&(x[R]=1),N[z]=(N[z+1]<<1|1)&D,0!==q&&(N[z]|=(S[z+1]|S[z])<<1|1|S[z+1]),N[z]&P&&(L=r(t,{errors:q,currentLocation:R,expectedLocation:y,distance:c}))<=b){if(b=L,(w=R)<=y)break;A=Math.max(1,2*y-w)}}if(r(t,{errors:q+1,currentLocation:y,expectedLocation:y,distance:c})>b)break;S=N}var H={isMatch:w>=0,score:0===L?.001:L};return g&&(H.matchedIndices=i(x,v)),H}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,i=t.currentLocation,o=void 0===i?0:i,a=t.expectedLocation,s=void 0===a?0:a,l=t.distance,c=void 0===l?100:l,u=r/e.length,h=Math.abs(s-o);return c?u+h/c:h?1:u}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===r?r=o:s||-1===r||((i=o-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t){var n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},r=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},i=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e};e.exports={get:function(e,t){var a=[];return function e(t,s){if(s){var l=s.indexOf("."),c=s,u=null;-1!==l&&(c=s.slice(0,l),u=s.slice(l+1));var h=t[c];if(null!=h)if(u||!i(h)&&!o(h))if(n(h))for(var f=0,d=h.length;f<d;f+=1)e(h[f],u);else u&&e(h,u);else a.push(r(h))}else a.push(t)}(e,t),a},isArray:n,isString:i,isNum:o,toString:r}}])},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Textcomplete=t.Textarea=void 0;var r=o(n(218)),i=o(n(221));function o(e){return e&&e.__esModule?e:{default:e}}t.Textarea=r.default,t.Textcomplete=i.default},218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(219)),o=s(n(29)),a=n(21);s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=n(220),c=["onInput","onKeydown"],u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e,c.forEach((function(e){n[e]=n[e].bind(n)})),n.startListening(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.stopListening(),this.el=null,this}},{key:"applySearchResult",value:function(e){var t=this.getBeforeCursor();if(null!=t){var n=e.replace(t,this.getAfterCursor());this.el.focus(),Array.isArray(n)&&((0,i.default)(this.el,n[0],n[1]),this.el.dispatchEvent(new Event("input")))}}},{key:"getCursorOffset",value:function(){var e=(0,a.calculateElementOffset)(this.el),t=this.getElScroll(),n=this.getCursorPosition(),r=(0,a.getLineHeightPx)(this.el),i=e.top-t.top+n.top+r,o=e.left-t.left+n.left;return"rtl"!==this.el.dir?{top:i,left:o,lineHeight:r}:{top:i,right:document.documentElement?document.documentElement.clientWidth-o:0,lineHeight:r}}},{key:"getBeforeCursor",value:function(){return this.el.selectionStart!==this.el.selectionEnd?null:this.el.value.substring(0,this.el.selectionEnd)}},{key:"getAfterCursor",value:function(){return this.el.value.substring(this.el.selectionEnd)}},{key:"getElScroll",value:function(){return{top:this.el.scrollTop,left:this.el.scrollLeft}}},{key:"getCursorPosition",value:function(){return l(this.el,this.el.selectionEnd)}},{key:"onInput",value:function(){this.emitChangeEvent()}},{key:"onKeydown",value:function(e){var t=this.getCode(e),n=void 0;"UP"===t||"DOWN"===t?n=this.emitMoveEvent(t):"ENTER"===t?n=this.emitEnterEvent():"ESC"===t&&(n=this.emitEscEvent()),n&&n.defaultPrevented&&e.preventDefault()}},{key:"startListening",value:function(){this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)}},{key:"stopListening",value:function(){this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)}}]),t}(o.default);t.default=u},219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r=e.value,i=t+(n||""),o=document.activeElement,a=0,s=0;a<r.length&&a<i.length&&r[a]===i[a];)a++;for(;r.length-s-1>=0&&i.length-s-1>=0&&r[r.length-s-1]===i[i.length-s-1];)s++;a=Math.min(a,Math.min(r.length,i.length)-s),e.setSelectionRange(a,r.length-s);var l=i.substring(a,i.length-s);if(e.focus(),!document.execCommand("insertText",!1,l)){e.value=i;var c=document.createEvent("Event");c.initEvent("input",!0,!0),e.dispatchEvent(c)}return e.setSelectionRange(t.length,t.length),o&&o.focus(),e}},220:function(e,t,n){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function i(e,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var c=l.style,u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,h="INPUT"===e.nodeName;c.whiteSpace="pre-wrap",h||(c.wordWrap="break-word"),c.position="absolute",a||(c.visibility="hidden"),t.forEach((function(e){h&&"lineHeight"===e?c.lineHeight=u.height:c[e]=u[e]})),r?e.scrollHeight>parseInt(u.height)&&(c.overflowY="scroll"):c.overflow="hidden",l.textContent=e.value.substring(0,i),h&&(l.textContent=l.textContent.replace(/\s/g," "));var f=document.createElement("span");f.textContent=e.value.substring(i)||".",l.appendChild(f);var d={top:f.offsetTop+parseInt(u.borderTopWidth),left:f.offsetLeft+parseInt(u.borderLeftWidth),height:parseInt(u.lineHeight)};return a?f.style.backgroundColor="#aaa":document.body.removeChild(l),d}void 0!==e.exports?e.exports=i:n&&(window.getCaretCoordinates=i)}()},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(222)),o=(l(n(29)),l(n(224))),a=l(n(17)),s=(l(n(5)),l(n(16)));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=["handleChange","handleEnter","handleEsc","handleHit","handleMove","handleSelect"],f=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.completer=new i.default,r.isQueryInFlight=!1,r.nextPendingQuery=null,r.dropdown=new o.default(n.dropdown||{}),r.editor=e,r.options=n,h.forEach((function(e){r[e]=r[e].bind(r)})),r.startListening(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.completer.destroy(),this.dropdown.destroy(),e&&this.editor.destroy(),this.stopListening(),this}},{key:"hide",value:function(){return this.dropdown.deactivate(),this}},{key:"register",value:function(e){var t=this;return e.forEach((function(e){t.completer.registerStrategy(new a.default(e))})),this}},{key:"trigger",value:function(e){return this.isQueryInFlight?this.nextPendingQuery=e:(this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(e)),this}},{key:"handleHit",value:function(e){var t=e.searchResults;t.length?this.dropdown.render(t,this.editor.getCursorOffset()):this.dropdown.deactivate(),this.isQueryInFlight=!1,null!==this.nextPendingQuery&&this.trigger(this.nextPendingQuery)}},{key:"handleMove",value:function(e){"UP"===e.detail.code?this.dropdown.up(e):this.dropdown.down(e)}},{key:"handleEnter",value:function(e){var t=this.dropdown.getActiveItem();t?(this.dropdown.select(t),e.preventDefault()):this.dropdown.deactivate()}},{key:"handleEsc",value:function(e){this.dropdown.shown&&(this.dropdown.deactivate(),e.preventDefault())}},{key:"handleChange",value:function(e){null!=e.detail.beforeCursor?this.trigger(e.detail.beforeCursor):this.dropdown.deactivate()}},{key:"handleSelect",value:function(e){this.emit("select",e),e.defaultPrevented||this.editor.applySearchResult(e.detail.searchResult)}},{key:"startListening",value:function(){var e=this;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect),["show","shown","render","rendered","selected","hidden","hide"].forEach((function(t){e.dropdown.on(t,(function(){return e.emit(t)}))})),this.completer.on("hit",this.handleHit)}},{key:"stopListening",value:function(){this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}]),t}(s.default);t.default=f},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(16)),o=a(n(223));a(n(5)),a(n(17));function a(e){return e&&e.__esModule?e:{default:e}}var s=["handleQueryResult"],l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.strategies=[],s.forEach((function(t){e[t]=e[t].bind(e)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){return this.strategies.forEach((function(e){return e.destroy()})),this}},{key:"registerStrategy",value:function(e){return this.strategies.push(e),this}},{key:"run",value:function(e){var t=this.extractQuery(e);t?t.execute(this.handleQueryResult):this.handleQueryResult([])}},{key:"extractQuery",value:function(e){for(var t=0;t<this.strategies.length;t++){var n=o.default.build(this.strategies[t],e);if(n)return n}return null}},{key:"handleQueryResult",value:function(e){this.emit("hit",{searchResults:e})}}]),t}(i.default);t.default=l},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(5));o(n(17));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.strategy=t,this.term=n,this.match=r}return r(e,null,[{key:"build",value:function(t,n){if("function"==typeof t.props.context){var r=t.props.context(n);if("string"==typeof r)n=r;else if(!r)return null}var i=t.matchText(n);return i?new e(t,i[t.index],i):null}}]),r(e,[{key:"execute",value:function(e){var t=this;this.strategy.search(this.term,(function(n){e(n.map((function(e){return new i.default(e,t.term,t.strategy)})))}),this.match)}}]),e}();t.default=a},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(16)),o=s(n(225)),a=(s(n(5)),n(21));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.shown=!1,n.items=[],n.activeItem=null,n.footer=e.footer,n.header=e.header,n.maxCount=e.maxCount||10,n.el.className=e.className||"dropdown-menu textcomplete-dropdown",n.rotate=!e.hasOwnProperty("rotate")||e.rotate,n.placement=e.placement,n.itemOptions=e.item||{};var r=e.style;return r&&Object.keys(r).forEach((function(e){n.el.style[e]=r[e]})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"createElement",value:function(){var e=document.createElement("ul"),t=e.style;t.display="none",t.position="absolute",t.zIndex="10000";var n=document.body;return n&&n.appendChild(e),e}}]),r(t,[{key:"destroy",value:function(){var e=this.el.parentNode;return e&&e.removeChild(this.el),this.clear()._el=null,this}},{key:"render",value:function(e,t){var n=this,r=(0,a.createCustomEvent)("render",{cancelable:!0});if(this.emit("render",r),r.defaultPrevented)return this;var i=e.map((function(e){return e.data})),s=e.slice(0,this.maxCount||e.length).map((function(e){return new o.default(e,n.itemOptions)}));return this.clear().setStrategyId(e[0]).renderEdge(i,"header").append(s).renderEdge(i,"footer").show().setOffset(t),this.emit("rendered",(0,a.createCustomEvent)("rendered")),this}},{key:"deactivate",value:function(){return this.hide().clear()}},{key:"select",value:function(e){var t={searchResult:e.searchResult},n=(0,a.createCustomEvent)("select",{cancelable:!0,detail:t});return this.emit("select",n),n.defaultPrevented||(this.deactivate(),this.emit("selected",(0,a.createCustomEvent)("selected",{detail:t}))),this}},{key:"up",value:function(e){return this.shown?this.moveActiveItem("prev",e):this}},{key:"down",value:function(e){return this.shown?this.moveActiveItem("next",e):this}},{key:"getActiveItem",value:function(){return this.activeItem}},{key:"append",value:function(e){var t=this,n=document.createDocumentFragment();return e.forEach((function(e){t.items.push(e),e.appended(t),n.appendChild(e.el)})),this.el.appendChild(n),this}},{key:"setOffset",value:function(e){var t=document.documentElement;if(t){var n=this.el.offsetWidth;if(e.left){var r=t.clientWidth;e.left+n>r&&(e.left=r-n),this.el.style.left=e.left+"px"}else e.right&&(e.right-n<0&&(e.right=0),this.el.style.right=e.right+"px");this.isPlacementTop()?this.el.style.bottom=t.clientHeight-e.top+e.lineHeight+"px":this.el.style.top=e.top+"px"}return this}},{key:"show",value:function(){if(!this.shown){var e=(0,a.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",e),e.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,a.createCustomEvent)("shown"))}return this}},{key:"hide",value:function(){if(this.shown){var e=(0,a.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",e),e.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.emit("hidden",(0,a.createCustomEvent)("hidden"))}return this}},{key:"clear",value:function(){return this.el.innerHTML="",this.items.forEach((function(e){return e.destroy()})),this.items=[],this}},{key:"moveActiveItem",value:function(e,t){var n="next"===e?this.activeItem?this.activeItem.next:this.items[0]:this.activeItem?this.activeItem.prev:this.items[this.items.length-1];return n&&(n.activate(),t.preventDefault()),this}},{key:"setStrategyId",value:function(e){var t=e&&e.strategy.props.id;return t?this.el.setAttribute("data-strategy",t):this.el.removeAttribute("data-strategy"),this}},{key:"renderEdge",value:function(e,t){var n=("header"===t?this.header:this.footer)||"",r="function"==typeof n?n(e):n,i=document.createElement("li");return i.classList.add("textcomplete-"+t),i.innerHTML=r,this.el.appendChild(i),this}},{key:"isPlacementTop",value:function(){return"top"===this.placement}},{key:"el",get:function(){return this._el||(this._el=t.createElement()),this._el}}]),t}(i.default);t.default=l},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CLASS_NAME=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5);(r=o)&&r.__esModule;var a=t.DEFAULT_CLASS_NAME="textcomplete-item",s=["onClick","onMouseover"],l=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchResult=t,this.active=!1,this.className=n.className||a,this.activeClassName=this.className+" active",s.forEach((function(e){r[e]=r[e].bind(r)}))}return i(e,[{key:"destroy",value:function(){this.el.removeEventListener("mousedown",this.onClick,!1),this.el.removeEventListener("mouseover",this.onMouseover,!1),this.el.removeEventListener("touchstart",this.onClick,!1),this.active&&(this.dropdown.activeItem=null),this._el=null}},{key:"appended",value:function(e){this.dropdown=e,this.siblings=e.items,this.index=this.siblings.length-1}},{key:"activate",value:function(){if(!this.active){var e=this.dropdown.getActiveItem();e&&e.deactivate(),this.dropdown.activeItem=this,this.active=!0,this.el.className=this.activeClassName}return this}},{key:"deactivate",value:function(){return this.active&&(this.active=!1,this.el.className=this.className,this.dropdown.activeItem=null),this}},{key:"onClick",value:function(e){e.preventDefault(),this.dropdown.select(this)}},{key:"onMouseover",value:function(){this.activate()}},{key:"el",get:function(){if(this._el)return this._el;var e=document.createElement("li");e.className=this.active?this.activeClassName:this.className;var t=document.createElement("a");return t.innerHTML=this.searchResult.render(),e.appendChild(t),this._el=e,e.addEventListener("mousedown",this.onClick),e.addEventListener("mouseover",this.onMouseover),e.addEventListener("touchstart",this.onClick),e}},{key:"next",get:function(){var e=void 0;if(this.index===this.siblings.length-1){if(!this.dropdown.rotate)return null;e=0}else e=this.index+1;return this.siblings[e]}},{key:"prev",get:function(){var e=void 0;if(0===this.index){if(!this.dropdown.rotate)return null;e=this.siblings.length-1}else e=this.index-1;return this.siblings[e]}}]),e}();t.default=l},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(16)),o=n(21);a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){return this}},{key:"applySearchResult",value:function(e){throw new Error("Not implemented.")}},{key:"getCursorOffset",value:function(){throw new Error("Not implemented.")}},{key:"getBeforeCursor",value:function(){throw new Error("Not implemented.")}},{key:"emitMoveEvent",value:function(e){var t=(0,o.createCustomEvent)("move",{cancelable:!0,detail:{code:e}});return this.emit("move",t),t}},{key:"emitEnterEvent",value:function(){var e=(0,o.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",e),e}},{key:"emitChangeEvent",value:function(){var e=(0,o.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",e),e}},{key:"emitEscEvent",value:function(){var e=(0,o.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",e),e}},{key:"getCode",value:function(e){return 9===e.keyCode||13===e.keyCode?"ENTER":27===e.keyCode?"ESC":38===e.keyCode?"UP":40===e.keyCode||78===e.keyCode&&e.ctrlKey?"DOWN":80===e.keyCode&&e.ctrlKey?"UP":"OTHER"}}]),t}(i.default);t.default=c},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(17);(r=o)&&r.__esModule;var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.term=n,this.strategy=r}return i(e,[{key:"replace",value:function(e,t){var n=this.strategy.replace(this.data);if(null!==n){Array.isArray(n)&&(t=n[1]+t,n=n[0]);var r=this.strategy.matchText(e);if(r)return n=n.replace(/\$&/g,r[0]).replace(/\$(\d)/g,(function(e,t){return r[parseInt(t,10)]})),[[e.slice(0,r.index),n,e.slice(r.index+r[0].length)].join(""),t]}}},{key:"render",value:function(){return this.strategy.template(this.data,this.term)}}]),e}();t.default=a}});