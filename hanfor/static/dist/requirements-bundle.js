!function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],o[i]&&f.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);f.length;)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={5:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([224,0]),n()}({217:function(e,t){const n={":AND:":1,":OR:":1},r={":AND:":1,":OR:":1},o={},a={"(":1,")":1},i={":AND:":3,":OR:":2};class s{constructor(e){this.left=!1,this.value=e,this.right=!1,this.col_target=-1,this.update_target()}update_target(){const e=this.value.indexOf(":COL_INDEX_");if(e>=0){const t=parseInt(this.value.substring(e+11,e+13));t>=0&&(this.value=this.value.substring(e+14),this.col_target=t)}}evaluate(e,t){return function e(t,n,r){if(void 0===t)return!0;if(!1===t.left&&!1===t.right){let e="";if(-1!==t.col_target)e=n[t.col_target];else for(let t=0;t<r.length;t++)r[t]&&(e+=n[t]+" ");const o=t.value.indexOf(":NOT:");return o>=0?!l(t.value.substring(o+5),e):l(t.value,e)}let o=e(t.left,n,r);let a=e(t.right,n,r);if(":AND:"===t.value)return o&&a;if(":OR:"===t.value)return o||a}(this,e,t)}static is_search_string(e){return!(e in a||e in n)}static to_string(e){let t="";return!1!==e.left&&(t+=s.to_string(e.left)+" "),t+=e.value,!1!==e.right&&(t+=" "+s.to_string(e.right)),t}static peek(e){return e[e.length-1]}static searchArrayToTree(e){let t=[],a=[];for(let l=0,c=e.length;l<c;l++){const c=e[l];if(s.is_search_string(c))t.push(new s(c));else if(c in n){for(;a.length;){const e=s.peek(a);if(!(e in n&&(c in r&&i[c]<=i[e]||c in o&&i[c]<i[e])))break;{let e=t.pop(),n=t.pop(),r=new s(a.pop());r.left=n,r.right=e,t.push(r)}}a.push(c)}else if("("===c)a.push(c);else{if(")"!==c)throw"Error: Token unknown: "+c;{let e=!1;for(;a.length;){const n=a.pop();if("("===n){e=!0;break}{let e=t.pop(),r=t.pop(),o=new s(n);o.left=r,o.right=e,t.push(o)}}if(!e)throw"Error: parentheses mismatch."}}}for(;a.length;){const e=a.pop();if("("===e||")"===e)throw"Error: Parentheses mismatch.";let n=t.pop(),r=t.pop(),o=new s(e);o.left=r,o.right=n,t.push(o)}return 0===t.length&&t.push(new s("")),t[0]}static awesomeQuerySplitt0r(e,t){let r=e.split(/(:OR:|:AND:|\(|\))/g);if(r=r.filter(String),void 0!==t)for(let e=0,o=r.length;e<o;e++)r[e]in n||r[e]in a||(r[e]=":COL_INDEX_"+("00"+t).slice(-2)+":"+r[e]);return r}static fromQuery(e="",t){return s.searchArrayToTree(s.awesomeQuerySplitt0r(e,t))}}function l(e,t){return e=e.startsWith('""')&&e.endsWith('""')?"^\\s*"+e.substr(2,e.length-4)+"\\s*$":e.replace(/([^\\])?\"/g,"$1\\b"),new RegExp(e,"i").test(t)}e.exports={SearchNode:s}},218:function(e,t,n){var r,o,a;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/o=[e,t],void 0===(a="function"==typeof(r=function(e,t){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r.splice(t,1))}}),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t=null,n=null,r=null,i=function(){e.clientWidth!==n&&d()},s=function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:s,update:d}),"vertical"===(l=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===l.resize&&(e.style.resize="horizontal"),t="content-box"===l.boxSizing?-(parseFloat(l.paddingTop)+parseFloat(l.paddingBottom)):parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth),isNaN(t)&&(t=0),d()}var l;function c(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var r=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",n=e.clientWidth,r.forEach(function(e){e.node.scrollTop=e.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function d(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),o="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(o<t?"hidden"===n.overflowY&&(c("scroll"),u(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),u(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==o){r=o;var i=a("autosize:resized");try{e.dispatchEvent(i)}catch(e){}}}}function s(e){var t=o.get(e);t&&t.destroy()}function l(e){var t=o.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return i(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=c,e.exports=t.default})?r.apply(t,o):r)||(e.exports=a)},219:function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(a){if(void 0===(o="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=a(),!!0){var i=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=i,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,o,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},r.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(o),/^[\{\[]/.test(i)&&(o=i)}catch(e){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var c in a)a[c]&&(l+="; "+c,!0!==a[c]&&(l+="="+a[c]));return document.cookie=t+"="+o+l}t||(i={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<u.length;f++){var p=u[f].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var g=p[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,g):n(h,g)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===g){i=h;break}t||(i[g]=h)}catch(e){}}return i}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},224:function(e,t,n){(function(e){n(17),n(10),n(15),n(14),n(20),n(13),n(149),n(12);n(219);const t=n(218),{SearchNode:r}=n(217);let o=n(157),{Textcomplete:a,Textarea:i}=n(156),s=new o([],{}),l=["","has_formalization"],c=["","Todo","Review","Done"],u=[""],d=[""],f=[""],p=[!0,!0,!0,!0,!0,!0],h=[],g=JSON.parse(search_query),m={},_=[],v=sessionStorage.getItem("req_search_string"),y=sessionStorage.getItem("filter_status_string"),b=sessionStorage.getItem("filter_tag_string"),w=sessionStorage.getItem("filter_type_string"),q=void 0,x=void 0;function k(){v=e("#search_bar").val().trim(),sessionStorage.setItem("req_search_string",v),q=r.fromQuery(v)}function O(){function t(e,t,n){return t.length>0&&(e.length>0&&(e=e.concat([":AND:"])),e=e.concat(function(e){return["("].concat(e,[")"])}(r.awesomeQuerySplitt0r(t,n)))),e}h=[],y=e("#status-filter-input").val(),b=e("#tag-filter-input").val(),w=e("#type-filter-input").val(),sessionStorage.setItem("filter_status_string",y),sessionStorage.setItem("filter_tag_string",b),sessionStorage.setItem("filter_type_string",w),h=t(h=t(h=t(h,w,4),b,5),y,6),x=r.searchArrayToTree(h)}function z(e){let t=[];return e.rows({selected:!0}).every(function(){let e=this.data();t.push(e.id)}),t}function C(){e(".requirement_var_group").each(function(){e(this).hide(),e(this).removeClass("type-error")}),e(".formalization_card").each(function(t){const n=e(this).attr("title"),r=e("#requirement_scope"+n).val(),o=e("#requirement_pattern"+n).val();let a=e("#formalization_heading"+n),i=e("#requirement_var_group_p"+n),s=e("#requirement_var_group_q"+n),l=e("#requirement_var_group_r"+n),c=e("#requirement_var_group_s"+n),u=e("#requirement_var_group_t"+n),d=e("#requirement_var_group_u"+n);if(n in _)for(let t=0;t<_[n].length;t++)e("#formalization_var_"+_[n][t]+n).addClass("type-error"),a.addClass("type-error-head");else a.removeClass("type-error-head");switch(r){case"BEFORE":case"AFTER":i.show();break;case"BETWEEN":case"AFTER_UNTIL":i.show(),s.show()}switch(o){case"Absence":case"Universality":case"Existence":case"BoundedExistence":l.show();break;case"Invariant":case"Precedence":case"Response":case"MinDuration":case"MaxDuration":case"BoundedRecurrence":l.show(),c.show();break;case"PrecedenceChain1-2":case"PrecedenceChain2-1":case"ResponseChain1-2":case"ResponseChain2-1":case"BoundedResponse":case"BoundedInvariance":case"TimeConstrainedInvariant":l.show(),c.show(),u.show();break;case"ConstrainedChain":case"TimeConstrainedMinDuration":case"ConstrainedTimedExistence":l.show(),c.show(),u.show(),d.show();break;case"NotFormalizable":i.hide(),s.hide()}})}function S(){e(".formalization_card").each(function(n){const r=e(this).attr("title");let o="",a=e("#current_formalization_textarea"+r);const i=e("#requirement_scope"+r).find("option:selected").text().replace(/\s\s+/g," "),s=e("#requirement_pattern"+r).find("option:selected").text().replace(/\s\s+/g," ");"None"!==i&&"None"!==s&&(o=i+", "+s+".");let l=e("#formalization_var_p"+r).val(),c=e("#formalization_var_q"+r).val(),u=e("#formalization_var_r"+r).val(),d=e("#formalization_var_s"+r).val(),f=e("#formalization_var_t"+r).val(),p=e("#formalization_var_u"+r).val();l.length>0&&(o=o.replace(/{P}/g,l)),c.length>0&&(o=o.replace(/{Q}/g,c)),u.length>0&&(o=o.replace(/{R}/g,u)),d.length>0&&(o=o.replace(/{S}/g,d)),f.length>0&&(o=o.replace(/{T}/g,f)),p.length>0&&(o=o.replace(/{U}/g,p)),a.val(o),t.update(a)}),e("#requirement_modal").data({unsaved_changes:!0,updated_formalization:!0})}function E(){e(".formalization_selector").change(function(){C(),S()}),e(".reqirement-variable, .req_var_type").change(function(){S()}),e(".delete_formalization").confirmation({rootSelector:".delete_formalization"}).click(function(){!function(t){let n=e(".modal-content");n.LoadingOverlay("show");const r=e("#requirement_id").val();e.post("api/req/del_formalization",{requirement_id:r,formalization_id:t},function(t){n.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").html(t.html)}).done(function(){C(),S(),E(),T(),j()})}(e(this).attr("name"))})}function T(){e(".reqirement-variable").each(function(t){let n=new i(this),r=new a(n,{dropdown:{maxCount:10}});r.register([{match:/(^|\s|[!=&\|>]+)(\w+)$/,search:function(e,t){include_elems=function(e){return s.search(e)}(e),result=[];for(let e=0;e<Math.min(10,include_elems.length);e++)result.push(d[include_elems[e]]);t(result)},replace:function(e){return"$1"+e+" "}}]),e(this).on("blur click",function(e){r.dropdown.deactivate(),e.preventDefault()})})}function L(n){if(-1===n)return void alert("Requirement not found.");let r=e("#requirements_table").DataTable().row(n).data(),a=e(".modal-content");e("#requirement_modal").modal("show"),a.LoadingOverlay("show"),e("#formalization_accordion").html(""),e("#requirement_tag_field").data("bs.tokenfield").$input.autocomplete({source:l}),e.get("api/req/get",{id:r.id,row_idx:n},function(t){e("#requirement_id").val(t.id),e("#modal_associated_row_index").val(n),d=t.available_vars,_=t.type_inference_errors,s=new o(d,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:12,minMatchCharLength:1,keys:void 0}),e("#requirement_modal_title").html(t.id+": "+t.type),e("#description_textarea").text(t.desc),e("#add_guess_description").text(t.desc),e("#formalization_accordion").html(t.formalizations_html),e("#requirement_scope").val(t.scope),e("#requirement_pattern").val(t.pattern),e("#requirement_tag_field").tokenfield("setTokens",t.tags),e("#requirement_status").val(t.status);let r=e("#csv_content_accordion");r.html(""),r.collapse("hide");let a=t.csv_data;for(const e in a)if(a.hasOwnProperty(e)){const t=a[e];r.append("<p><strong>"+e+":</strong>"+t+"</p>")}!1===t.success&&alert("Could Not load the Requirement: "+t.errormsg)}).done(function(){C(),T(),E(),e("#requirement_tag_field").on("tokenfield:createtoken",function(t){let n=e(this).tokenfield("getTokens");e.each(n,function(e,n){n.value===t.attrs.value&&t.preventDefault()})}),e("#requirement_modal").data({unsaved_changes:!1,updated_formalization:!1}),e("textarea").each(function(){t(e(this)),t.update(e(this))}),a.LoadingOverlay("hide",!0)})}function N(){let t=e("#requirements_table").DataTable(),n=[];e.each(t.columns().visible(),function(t,r){!1===r?(e("#col_toggle_button_"+t).removeClass("btn-info").addClass("btn-secondary"),n.push(!1)):(e("#col_toggle_button_"+t).removeClass("btn-secondary").addClass("btn-info"),n.push(!0))}),p=n}function D(t){t.columns().every(function(e){e>0&&t.column(e).header().append(" ("+e+")")}),e("#save_requirement_modal").click(function(){!function(t){let n=e(".modal-content");n.LoadingOverlay("show");const r=e("#requirement_id").val(),o=e("#requirement_tag_field").val(),a=e("#requirement_status").val(),i=e("#requirement_modal").data("updated_formalization"),s=parseInt(e("#modal_associated_row_index").val());let l={};e(".formalization_card").each(function(t){let n={};n.id=e(this).attr("title"),e(this).find("select").each(function(){e(this).hasClass("scope_selector")&&(n.scope=e(this).val()),e(this).hasClass("pattern_selector")&&(n.pattern=e(this).val())}),n.expression_mapping={},e(this).find("textarea.reqirement-variable").each(function(){""!==e(this).attr("title")&&(n.expression_mapping[e(this).attr("title")]=e(this).val())}),l[n.id]=n}),e.post("api/req/update",{id:r,row_idx:s,update_formalization:i,tags:o,status:a,formalizations:JSON.stringify(l)},function(r){n.LoadingOverlay("hide",!0),!1===r.success?alert(r.errormsg):(t.row(s).data(r),e("#requirement_modal").data("unsaved_changes",!1).modal("hide"))}).done(function(){j()})}(t)}),e("#search_bar").keypress(function(e){13===e.which&&(k(),t.draw())}),e("#type-filter-input").autocomplete({minLength:0,source:u,delay:100}),e("#status-filter-input").autocomplete({minLength:0,source:c,delay:100}),e("#tag-filter-input").autocomplete({minLength:0,source:l,delay:100}),e("#tag-filter-input, #status-filter-input, #type-filter-input").on("focus",function(){e(this).keydown()}).on("keypress",function(e){13===e.which&&(O(),t.draw())}),e("#table-filter-toggle").click(function(){e("#tag-filter-input").autocomplete({source:l}),e("#type-filter-input").autocomplete({source:u})}),e(".clear-all-filters").click(function(){e("#status-filter-input").val("").effect("highlight",{color:"green"},500),e("#tag-filter-input").val("").effect("highlight",{color:"green"},500),e("#type-filter-input").val("").effect("highlight",{color:"green"},500),e("#search_bar").val("").effect("highlight",{color:"green"},500),O(),k(),t.draw()}),e("#gen-req-from-selection").click(function(){let n=[];t.rows({search:"applied"}).every(function(){let e=this.data();n.push(e.id)}),e("#selected_requirement_ids").val(JSON.stringify(n)),e("#generate_req_form").submit()}),e("#gen-csv-from-selection").click(function(){let n=[];t.rows({search:"applied"}).every(function(){let e=this.data();n.push(e.id)}),e("#selected_csv_requirement_ids").val(JSON.stringify(n)),e("#generate_csv_form").submit()}),e(".colum-toggle-button").on("click",function(n){n.preventDefault();let r=t.column(e(this).attr("data-column"));r.visible(!r.visible()),N()}),e(".reset-colum-toggle").on("click",function(e){e.preventDefault(),t.columns(".default-col").visible(!0),t.columns(".extra-col").visible(!1),N()}),N(),e(".select-all-button").on("click",function(n){e(this).hasClass("btn-secondary")?t.rows({page:"current"}).select():t.rows({page:"current"}).deselect(),e(".select-all-button").toggleClass("btn-secondary btn-primary")}),t.on("user-select",function(){let t=e(".select-all-button");t.removeClass("btn-primary"),t.addClass("btn-secondary ")}),e("#multi-add-tag-input, #multi-remove-tag-input").autocomplete({minLength:0,source:l,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e("#multi-set-status-input").autocomplete({minLength:0,source:c,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e(".apply-multi-edit").click(function(){!function(t){let n=e("body");n.LoadingOverlay("show");let r=e("#multi-add-tag-input").val().trim(),o=e("#multi-remove-tag-input").val().trim(),a=e("#multi-set-status-input").val().trim(),i=z(t);e.post("api/req/multi_update",{add_tag:r,remove_tag:o,set_status:a,selected_ids:JSON.stringify(i)},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()})}(t)}),e(".add_top_guess_button").confirmation({rootSelector:".add_top_guess_button"}).click(function(){!function(t){let n=e("body");n.LoadingOverlay("show");let r=z(t),o=e("#top_guess_append_mode").val();e.post("api/req/multi_add_top_guess",{selected_ids:JSON.stringify(r),insert_mode:o},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()})}(t)})}function R(t){let n=e("#requirements_table").DataTable({language:{emptyTable:"Loading data."},paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/req/gets",deferRender:!0,columnDefs:t,createdRow:function(t,n,r){"Heading"===n.type&&e(t).addClass("bg-primary"),"Information"===n.type&&e(t).addClass("table-info"),"Requirement"===n.type&&e(t).addClass("table-warning"),"not set"===n.type&&e(t).addClass("table-light")},infoCallback:function(t,n,r,o,a,i){var s=this.api().page.info();e("#clear-all-filters-text").html("Showing "+a+"/"+s.recordsTotal+". Clear all.");let l="Showing "+n+" to "+r+" of "+a+" entries";return l+=" (filtered from "+s.recordsTotal+" total entries)."},initComplete:function(){e("#search_bar").val(v),e("#type-filter-input").val(w),e("#tag-filter-input").val(b),e("#status-filter-input").val(y),function(t){e("#requirements_table").find("tbody").on("click","a",function(n){n.preventDefault(),L(t.row(e(n.target).parent()).index())})}(n),D(n),function(t){if(t.q.length>0){e("#status-filter-input").val(""),e("#tag-filter-input").val(""),e("#type-filter-input").val("");const n=":COL_INDEX_"+function(e){let t="00"+e;return t.substr(t.length-2)}(t.col).toString()+":"+t.q;e("#search_bar").val(n)}}(g),k(),O(),e.fn.dataTable.ext.search.push(function(e,t,n){return function(e){return q.evaluate(e,p)&&x.evaluate(e,p)}(t)}),this.api().draw()}})}function I(){let n=e("#requirement_guess_modal"),r=e("#available_guesses_cards"),o=e(".modal-content"),a=e("#requirement_id").val();function i(e){let t='<div class="card">                    <div class="pl-1 pr-1">                        <p>'+e.string+'                        </p>                    </div>                    <button type="button" class="btn btn-success btn-sm add_guess"                            title="Add formalization"                            data-scope="'+e.scope+'"                            data-pattern="'+e.pattern+"\"                            data-mapping='"+JSON.stringify(e.mapping)+"'>                        <strong>+ Add this formalization +</strong>                    </button>                </div>";r.append(t)}n.modal({keyboard:!1}),n.modal("show"),o.LoadingOverlay("show"),r.html(""),e.post("api/req/get_available_guesses",{requirement_id:a},function(e){if(!1===e.success)alert(e.errormsg);else for(let t=0;t<e.available_guesses.length;t++)i(e.available_guesses[t])}).done(function(){e(".add_guess").click(function(){!function(t,n,r){let o=e(".modal-content");o.LoadingOverlay("show");let a=e("#requirement_id").val();e.post("api/req/add_formalization_from_guess",{requirement_id:a,scope:t,pattern:n,mapping:JSON.stringify(r)},function(t){o.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").append(t.html)}).done(function(){C(),S(),E(),T(),j()})}(e(this).data("scope"),e(this).data("pattern"),e(this).data("mapping"))}),t.update(e("#add_guess_description")),o.LoadingOverlay("hide",!0)})}function A(){let t=[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{targets:[1],data:"pos"},{targets:[2],data:"id",render:function(e,t,n,r){return result='<a href="#">'+e+"</a>",result}},{targets:[3],data:"desc"},{targets:[4],data:"type",render:function(e,t,n,r){return u.indexOf(e)<=-1&&u.push(e),e}},{targets:[5],data:"tags",render:function(t,n,r,o){if(result="",e(t).each(function(e,t){var n;t.length>0&&(result+='<span class="badge" style="background-color: '+(n=t,m.hasOwnProperty(n)?m[n]:"#5bc0de")+'">'+t+"</span></br>",l.indexOf(t)<=-1&&l.push(t))}),r.formal.length>0){let t=!1,n=!1;e.each(r.formal,function(e,r){r.length>0&&"// None, // not formalizable"!==r?t||(t=!0,result+='<span class="badge badge-success">has_formalization</span></br>'):n||(n=!0,result+='<span class="badge badge-warning">incomplete_formalization</span></br>')})}return result}},{targets:[6],data:"status",render:function(e,t,n,r){return result='<span class="badge badge-info">'+e+"</span></br>",result}},{targets:[7],data:"formal",render:function(t,n,r,o){return result="",r.formal.length>0&&e(t).each(function(e,t){t.length>0&&(result+="<p>"+t+"</p>")}),result}}];e.get("api/table/colum_defs","",function(e){const n=e.col_defs.length;for(let r=0;r<n;r++)t.push({targets:[parseInt(e.col_defs[r].target)],data:e.col_defs[r].csv_name,visible:!1,searchable:!0})}).done(function(){R(t)})}function M(){let n=e("#requirement_modal");e("#requirement_tag_field").tokenfield({autocomplete:{source:l,delay:100},showAutocompleteOnFocus:!0}).change(function(e){n.data("unsaved_changes",!0)}),e("#requirement_status").change(function(){e("#requirement_modal").data("unsaved_changes",!0)}),n.on("hide.bs.modal",function(t){!function(t){!0===e("#requirement_modal").data("unsaved_changes")&&!0!==confirm("You have unsaved changes, do you really want to close?")&&t.preventDefault()}(t)}),e(document).keyup(function(t){if(e(".modal:visible").length&&27===t.keyCode){let t=e("input[type=text], textarea, select").filter(":focus");0===t.length?e("#requirement_guess_modal:visible").length?e("#requirement_guess_modal").modal("hide"):e("#requirement_modal").modal("hide"):t.each(function(t){e(this).blur()})}}),n.on("hidden.bs.modal",function(t){e("#requirement_tag_field").val(""),e("#requirement_tag_field-tokenfield").val("")}),e("#add_formalization").click(function(){!function(){let t=e(".modal-content");t.LoadingOverlay("show");const n=e("#requirement_id").val();e.post("api/req/new_formalization",{id:n},function(n){t.LoadingOverlay("hide",!0),!1===n.success?alert(n.errormsg):e("#formalization_accordion").append(n.html)}).done(function(){C(),S(),E(),T(),j()})}()}),e("#add_gussed_formalization").click(function(){I()}),e(".modal").on("hidden.bs.modal",function(t){e(".modal:visible").length&&e("body").addClass("modal-open")}),e("#formalization_accordion").on("shown.bs.collapse",".card",function(n){e(this).find("textarea").each(function(){t(e(this)),t.update(e(this))})}),C()}function F(){e.get("api/meta/get","",function(t){m=t.tag_colors,f=t.available_search_strings,e("#search_bar").autocomplete({source:f})})}function j(){e.get("api/logs/get","",function(t){e("#log_textarea").html(t)}).done(function(){e(".req_direct_link").click(function(){L(function(t){let n=-1;return e("#requirements_table").DataTable().column(2).data().filter(function(e,r){return e===t&&(n=r,!0)}),n}(e(this).data("rid")))}),e("#log_textarea").scrollTop(1e5)})}e(document).ready(function(){F(),A(),M(),function(){let t=e("#search_bar");e("#store_search").click(function(){let n=e("body");n.LoadingOverlay("show");const r=t.val();e.post("api/req_search/update",{query:r},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):(t.effect("highlight",{color:"green"},500),F())})})}(),j()})}).call(this,n(3))}});