!function(e){function t(t){for(var a,r,i=t[0],o=t[1],c=t[2],d=0,f=[];d<i.length;d++)r=i[d],l[r]&&f.push(l[r][0]),l[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);for(u&&u(t);f.length;)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==l[o]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},l={4:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window.webpackJsonp=window.webpackJsonp||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=o;s.push([211,0]),n()}({208:function(e,t,n){var a,l;
/*! Select for DataTables 1.2.5-dev
 * 2015-2017 SpryMedia Ltd - datatables.net/license/mit
 */a=[n(3),n(151)],void 0===(l=function(e){return function(e,t,n,a){"use strict";var l=e.fn.dataTable;function s(e,t,n){var a,l,s,r=function(t,n){if(t>n){var a=n;n=t,t=a}var l=!1;return e.columns(":visible").indexes().filter(function(e){return e===t&&(l=!0),e===n?(l=!1,!0):l})},i=function(t,n){var a=e.rows({search:"applied"}).indexes();if(a.indexOf(t)>a.indexOf(n)){var l=n;n=t,t=l}var s=!1;return a.filter(function(e){return e===t&&(s=!0),e===n?(s=!1,!0):s})};e.cells({selected:!0}).any()||n?(l=r(n.column,t.column),s=i(n.row,t.row)):(l=r(0,t.column),s=i(0,t.row)),a=e.cells(s,l).flatten(),e.cells(t,{selected:!0}).any()?e.cells(a).deselect():e.cells(a).select()}function r(t){var n=t.settings()[0],a=n._select.selector;e(t.table().container()).off("mousedown.dtSelect",a).off("mouseup.dtSelect",a).off("click.dtSelect",a),e("body").off("click.dtSelect"+t.table().node().id)}function i(n){var a=e(n.table().container()),l=n.settings()[0],s=l._select.selector;a.on("mousedown.dtSelect",s,function(e){(e.shiftKey||e.metaKey||e.ctrlKey)&&a.css("-moz-user-select","none").one("selectstart.dtSelect",s,function(){return!1})}).on("mouseup.dtSelect",s,function(){a.css("-moz-user-select","")}).on("click.dtSelect",s,function(a){var l,s=n.select.items();if(t.getSelection){var r=t.getSelection();if((!r.anchorNode||e(r.anchorNode).closest("table")[0]===n.table().node())&&""!==e.trim(r.toString()))return}var i=n.settings()[0];if(e(a.target).closest("div.dataTables_wrapper")[0]==n.table().container()){var c=n.cell(e(a.target).closest("td, th"));if(c.any()){var u=e.Event("user-select.dt");if(o(n,u,[s,c,a]),!u.isDefaultPrevented()){var d=c.index();"row"===s?(l=d.row,f(a,n,i,"row",l)):"column"===s?(l=c.index().column,f(a,n,i,"column",l)):"cell"===s&&(l=c.index(),f(a,n,i,"cell",l)),i._select_lastCell=d}}}}),e("body").on("click.dtSelect"+n.table().node().id,function(t){if(l._select.blurable){if(e(t.target).parents().filter(n.table().container()).length)return;if(0===e(t.target).parents("html").length)return;if(e(t.target).parents("div.DTE").length)return;d(l,!0)}})}function o(t,n,a,l){l&&!t.flatten().length||("string"==typeof n&&(n+=".dt"),a.unshift(t),e(t.table().node()).trigger(n,a))}function c(t){var n=t.settings()[0];if(n._select.info&&n.aanFeatures.i&&"api"!==t.select.style()){var a=t.rows({selected:!0}).flatten().length,l=t.columns({selected:!0}).flatten().length,s=t.cells({selected:!0}).flatten().length,r=function(n,a,l){n.append(e('<span class="select-item"/>').append(t.i18n("select."+a+"s",{_:"%d "+a+"s selected",0:"",1:"1 "+a+" selected"},l)))};e.each(n.aanFeatures.i,function(t,n){n=e(n);var i=e('<span class="select-info"/>');r(i,"row",a),r(i,"column",l),r(i,"cell",s);var o=n.children("span.select-info");o.length&&o.remove(),""!==i.text()&&n.append(i)})}}function u(t,n,a,l){var s=t[n+"s"]({search:"applied"}).indexes(),r=e.inArray(l,s),i=e.inArray(a,s);if(t[n+"s"]({selected:!0}).any()||-1!==r){if(r>i){var o=i;i=r,r=o}s.splice(i+1,s.length),s.splice(0,r)}else s.splice(e.inArray(a,s)+1,s.length);t[n](a,{selected:!0}).any()?(s.splice(e.inArray(a,s),1),t[n+"s"](s).deselect()):t[n+"s"](s).select()}function d(e,t){if(t||"single"===e._select.style){var n=new l.Api(e);n.rows({selected:!0}).deselect(),n.columns({selected:!0}).deselect(),n.cells({selected:!0}).deselect()}}function f(e,t,n,a,l){var r=t.select.style(),i=t[a](l,{selected:!0}).any();if("os"===r)if(e.ctrlKey||e.metaKey)t[a](l).select(!i);else if(e.shiftKey)"cell"===a?s(t,l,n._select_lastCell||null):u(t,a,l,n._select_lastCell?n._select_lastCell[a]:null);else{var o=t[a+"s"]({selected:!0});i&&1===o.flatten().length?t[a](l).deselect():(o.deselect(),t[a](l).select())}else"multi+shift"==r&&e.shiftKey?"cell"===a?s(t,l,n._select_lastCell||null):u(t,a,l,n._select_lastCell?n._select_lastCell[a]:null):t[a](l).select(!i)}l.select={},l.select.version="1.2.5-dev",l.select.init=function(t){var n=t.settings()[0],s=n.oInit.select,r=l.defaults.select,i=s===a?r:s,o="row",c="api",u=!1,d=!0,f="td, th",_="selected",m=!1;n._select={},!0===i?(c="os",m=!0):"string"==typeof i?(c=i,m=!0):e.isPlainObject(i)&&(i.blurable!==a&&(u=i.blurable),i.info!==a&&(d=i.info),i.items!==a&&(o=i.items),i.style!==a&&(c=i.style,m=!0),i.selector!==a&&(f=i.selector),i.className!==a&&(_=i.className)),t.select.selector(f),t.select.items(o),t.select.style(c),t.select.blurable(u),t.select.info(d),n._select.className=_,e.fn.dataTable.ext.order["select-checkbox"]=function(t,n){return this.api().column(n,{order:"index"}).nodes().map(function(n){return"row"===t._select.items?e(n).parent().hasClass(t._select.className):"cell"===t._select.items&&e(n).hasClass(t._select.className)})},!m&&e(t.table().node()).hasClass("selectable")&&t.select.style("os")},e.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(e,t){l.ext.selector[t.type].push(function(e,n,a){var l,s=n.selected,r=[];if(!0!==s&&!1!==s)return a;for(var i=0,o=a.length;i<o;i++)l=e[t.prop][a[i]],(!0===s&&!0===l._select_selected||!1===s&&!l._select_selected)&&r.push(a[i]);return r})}),l.ext.selector.cell.push(function(e,t,n){var l,s=t.selected,r=[];if(s===a)return n;for(var i=0,o=n.length;i<o;i++)l=e.aoData[n[i].row],(!0===s&&l._selected_cells&&!0===l._selected_cells[n[i].column]||!1===s&&(!l._selected_cells||!l._selected_cells[n[i].column]))&&r.push(n[i]);return r});var _=l.Api.register,m=l.Api.registerPlural;function h(e,t){return function(n){return n.i18n("buttons."+e,t)}}function p(e){var t=e._eventNamespace;return"draw.dt.DT"+t+" select.dt.DT"+t+" deselect.dt.DT"+t}_("select()",function(){return this.iterator("table",function(e){l.select.init(new l.Api(e))})}),_("select.blurable()",function(e){return e===a?this.context[0]._select.blurable:this.iterator("table",function(t){t._select.blurable=e})}),_("select.info()",function(e){return c===a?this.context[0]._select.info:this.iterator("table",function(t){t._select.info=e})}),_("select.items()",function(e){return e===a?this.context[0]._select.items:this.iterator("table",function(t){t._select.items=e,o(new l.Api(t),"selectItems",[e])})}),_("select.style()",function(t){return t===a?this.context[0]._select.style:this.iterator("table",function(n){n._select.style=t,n._select_init||function(t){var n=new l.Api(t);t.aoRowCreatedCallback.push({fn:function(n,a,l){var s,r,i=t.aoData[l];for(i._select_selected&&e(n).addClass(t._select.className),s=0,r=t.aoColumns.length;s<r;s++)(t.aoColumns[s]._select_selected||i._selected_cells&&i._selected_cells[s])&&e(i.anCells[s]).addClass(t._select.className)},sName:"select-deferRender"}),n.on("preXhr.dt.dtSelect",function(){var e=n.rows({selected:!0}).ids(!0).filter(function(e){return e!==a}),t=n.cells({selected:!0}).eq(0).map(function(e){var t=n.row(e.row).id(!0);return t?{row:t,column:e.column}:a}).filter(function(e){return e!==a});n.one("draw.dt.dtSelect",function(){n.rows(e).select(),t.any()&&t.each(function(e){n.cells(e.row,e.column).select()})})}),n.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){c(n)}),n.on("destroy.dtSelect",function(){r(n),n.off(".dtSelect")})}(n);var s=new l.Api(n);r(s),"api"!==t&&i(s),o(new l.Api(n),"selectStyle",[t])})}),_("select.selector()",function(e){return e===a?this.context[0]._select.selector:this.iterator("table",function(t){r(new l.Api(t)),t._select.selector=e,"api"!==t._select.style&&i(new l.Api(t))})}),m("rows().select()","row().select()",function(t){var n=this;return!1===t?this.deselect():(this.iterator("row",function(t,n){d(t),t.aoData[n]._select_selected=!0,e(t.aoData[n].nTr).addClass(t._select.className)}),this.iterator("table",function(e,t){o(n,"select",["row",n[t]],!0)}),this)}),m("columns().select()","column().select()",function(t){var n=this;return!1===t?this.deselect():(this.iterator("column",function(t,n){d(t),t.aoColumns[n]._select_selected=!0;var a=new l.Api(t).column(n);e(a.header()).addClass(t._select.className),e(a.footer()).addClass(t._select.className),a.nodes().to$().addClass(t._select.className)}),this.iterator("table",function(e,t){o(n,"select",["column",n[t]],!0)}),this)}),m("cells().select()","cell().select()",function(t){var n=this;return!1===t?this.deselect():(this.iterator("cell",function(t,n,l){d(t);var s=t.aoData[n];s._selected_cells===a&&(s._selected_cells=[]),s._selected_cells[l]=!0,s.anCells&&e(s.anCells[l]).addClass(t._select.className)}),this.iterator("table",function(e,t){o(n,"select",["cell",n[t]],!0)}),this)}),m("rows().deselect()","row().deselect()",function(){var t=this;return this.iterator("row",function(t,n){t.aoData[n]._select_selected=!1,e(t.aoData[n].nTr).removeClass(t._select.className)}),this.iterator("table",function(e,n){o(t,"deselect",["row",t[n]],!0)}),this}),m("columns().deselect()","column().deselect()",function(){var t=this;return this.iterator("column",function(t,n){t.aoColumns[n]._select_selected=!1;var a=new l.Api(t),s=a.column(n);e(s.header()).removeClass(t._select.className),e(s.footer()).removeClass(t._select.className),a.cells(null,n).indexes().each(function(n){var a=t.aoData[n.row],l=a._selected_cells;!a.anCells||l&&l[n.column]||e(a.anCells[n.column]).removeClass(t._select.className)})}),this.iterator("table",function(e,n){o(t,"deselect",["column",t[n]],!0)}),this}),m("cells().deselect()","cell().deselect()",function(){var t=this;return this.iterator("cell",function(t,n,a){var l=t.aoData[n];l._selected_cells[a]=!1,l.anCells&&!t.aoColumns[a]._select_selected&&e(l.anCells[a]).removeClass(t._select.className)}),this.iterator("table",function(e,n){o(t,"deselect",["cell",t[n]],!0)}),this});var v=0;return e.extend(l.ext.buttons,{selected:{text:h("selected","Selected"),className:"buttons-selected",limitTo:["rows","columns","cells"],init:function(t,n,a){var l=this;a._eventNamespace=".select"+v++,t.on(p(a),function(){l.enable(function(t,n){return!(-1===e.inArray("rows",n.limitTo)||!t.rows({selected:!0}).any())||!(-1===e.inArray("columns",n.limitTo)||!t.columns({selected:!0}).any())||!(-1===e.inArray("cells",n.limitTo)||!t.cells({selected:!0}).any())}(t,a))}),this.disable()},destroy:function(e,t,n){e.off(n._eventNamespace)}},selectedSingle:{text:h("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(e,t,n){var a=this;n._eventNamespace=".select"+v++,e.on(p(n),function(){var t=e.rows({selected:!0}).flatten().length+e.columns({selected:!0}).flatten().length+e.cells({selected:!0}).flatten().length;a.enable(1===t)}),this.disable()},destroy:function(e,t,n){e.off(n._eventNamespace)}},selectAll:{text:h("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:h("selectNone","Deselect all"),className:"buttons-select-none",action:function(){d(this.settings()[0],!0)},init:function(e,t,n){var a=this;n._eventNamespace=".select"+v++,e.on(p(n),function(){var t=e.rows({selected:!0}).flatten().length+e.columns({selected:!0}).flatten().length+e.cells({selected:!0}).flatten().length;a.enable(t>0)}),this.disable()},destroy:function(e,t,n){e.off(n._eventNamespace)}}}),e.each(["Row","Column","Cell"],function(e,t){var n=t.toLowerCase();l.ext.buttons["select"+t+"s"]={text:h("select"+t+"s","Select "+n+"s"),className:"buttons-select-"+n+"s",action:function(){this.select.items(n)},init:function(e){var t=this;e.on("selectItems.dt.DT",function(e,a,l){t.active(l===n)})}}}),e(n).on("preInit.dt.dtSelect",function(e,t){"dt"===e.namespace&&l.select.init(new l.Api(t))}),l.select}(e,window,document)}.apply(t,a))||(e.exports=l)},211:function(e,t,n){(function(e){n(18),n(11),n(17),n(16),n(208),n(15),n(14);let t=n(154),{Textcomplete:a,Textarea:l}=n(153),s=new t([],{}),r=["","has_formalization"],i=["","Todo","Review","Done"],o=[""],c=[""],u=[!0,!0,!0,!0,!0,!0],d=void 0,f=void 0,_=JSON.parse(search_query),m=[];const h={":AND:":1,":OR:":1},p={":AND:":1,":OR:":1},v={},g={"(":1,")":1},b={":AND:":3,":OR:":2};class w{constructor(e){this.left=!1,this.value=e,this.right=!1,this.col_target=-1,this.update_target()}update_target(){const e=this.value.indexOf(":COL_INDEX_");if(e>=0){const t=parseInt(this.value.substring(e+11,e+13));t>=0&&(this.value=this.value.substring(e+14),this.col_target=t)}}static is_search_string(e){return!(e in g||e in h)}static to_string(e){let t="";return!1!==e.left&&(t+=w.to_string(e.left)+" "),t+=e.value,!1!==e.right&&(t+=" "+w.to_string(e.right)),t}static peek(e){return e[e.length-1]}static searchArrayToTree(e){let t=[],n=[];for(let a=0,l=e.length;a<l;a++){const l=e[a];if(w.is_search_string(l))t.push(new w(l));else if(l in h){for(;n.length;){const e=w.peek(n);if(!(e in h&&(l in p&&b[l]<=b[e]||l in v&&b[l]<b[e])))break;{let e=t.pop(),a=t.pop(),l=new w(n.pop());l.left=a,l.right=e,t.push(l)}}n.push(l)}else if("("===l)n.push(l);else{if(")"!==l)throw"Error: Token unknown: "+l;{let e=!1;for(;n.length;){const a=n.pop();if("("===a){e=!0;break}{let e=t.pop(),n=t.pop(),l=new w(a);l.left=n,l.right=e,t.push(l)}}if(!e)throw"Error: parentheses mismatch."}}}for(;n.length;){const e=n.pop();if("("===e||")"===e)throw"Error: Parentheses mismatch.";let a=t.pop(),l=t.pop(),s=new w(e);s.left=l,s.right=a,t.push(s)}return t[0]}static awesomeQuerySplitt0r(e,t){let n=e.split(/(:OR:|:AND:|\(|\))/g);if(n=n.filter(String),void 0!==t)for(let e=0,a=n.length;e<a;e++)n[e]in h||n[e]in g||(n[e]=":COL_INDEX_"+("00"+t).slice(-2)+":"+n[e]);return n}static fromQuery(e,t){return w.searchArrayToTree(w.awesomeQuerySplitt0r(e,t))}}function y(e,t){return e=e.startsWith('""')&&e.endsWith('""')?"^\\s*"+e.substr(2,e.length-4)+"\\s*$":e.replace(/([^\\])?\"/g,"$1\\b"),new RegExp(e,"i").test(t)}function q(e,t){if(void 0===e)return!0;if(!1===e.left&&!1===e.right){let n="";if(-1!==e.col_target)n=t[e.col_target];else for(let e=0;e<u.length;e++)u[e]&&(n+=t[e]+" ");const a=e.value.indexOf(":NOT:");return a>=0?!y(e.value.substring(a+5),n):y(e.value,n)}let n=q(e.left,t),a=q(e.right,t);return":AND:"===e.value?n&&a:":OR:"===e.value?n||a:void 0}function C(){e(".requirement_var_group").each(function(){e(this).hide(),e(this).removeClass("type-error")}),e(".formalization_card").each(function(t){if(formalization_id=e(this).attr("title"),selected_scope=e("#requirement_scope"+formalization_id).val(),selected_pattern=e("#requirement_pattern"+formalization_id).val(),header=e("#formalization_heading"+formalization_id),var_p=e("#requirement_var_group_p"+formalization_id),var_q=e("#requirement_var_group_q"+formalization_id),var_r=e("#requirement_var_group_r"+formalization_id),var_s=e("#requirement_var_group_s"+formalization_id),var_t=e("#requirement_var_group_t"+formalization_id),var_u=e("#requirement_var_group_u"+formalization_id),formalization_id in m)for(let e=0;e<m[formalization_id].length;e++)window["var_"+m[formalization_id][e]].addClass("type-error"),header.addClass("type-error-head");else header.removeClass("type-error-head");switch(selected_scope){case"BEFORE":case"AFTER":var_p.show();break;case"BETWEEN":case"AFTER_UNTIL":var_p.show(),var_q.show()}switch(selected_pattern){case"Absence":case"Universality":case"Existence":case"BoundedExistence":var_r.show();break;case"Invariant":case"Precedence":case"Response":case"MinDuration":case"MaxDuration":case"BoundedRecurrence":var_r.show(),var_s.show();break;case"PrecedenceChain1-2":case"PrecedenceChain2-1":case"ResponseChain1-2":case"ResponseChain2-1":case"BoundedResponse":case"BoundedInvariance":case"TimeConstrainedInvariant":var_r.show(),var_s.show(),var_t.show();break;case"ConstrainedChain":case"TimeConstrainedMinDuration":case"ConstrainedTimedExistence":var_r.show(),var_s.show(),var_t.show(),var_u.show();break;case"NotFormalizable":var_p.hide(),var_q.hide()}})}function z(){e(".formalization_card").each(function(t){formalization_id=e(this).attr("title"),formalization="",selected_scope=e("#requirement_scope"+formalization_id).find("option:selected").text().replace(/\s\s+/g," "),selected_pattern=e("#requirement_pattern"+formalization_id).find("option:selected").text().replace(/\s\s+/g," "),"None"!==selected_scope&&"None"!==selected_pattern&&(formalization=selected_scope+", "+selected_pattern+"."),var_p=e("#formalization_var_p"+formalization_id).val(),var_q=e("#formalization_var_q"+formalization_id).val(),var_r=e("#formalization_var_r"+formalization_id).val(),var_s=e("#formalization_var_s"+formalization_id).val(),var_t=e("#formalization_var_t"+formalization_id).val(),var_u=e("#formalization_var_u"+formalization_id).val(),var_p.length>0&&(formalization=formalization.replace(/{P}/g,var_p)),var_q.length>0&&(formalization=formalization.replace(/{Q}/g,var_q)),var_r.length>0&&(formalization=formalization.replace(/{R}/g,var_r)),var_s.length>0&&(formalization=formalization.replace(/{S}/g,var_s)),var_t.length>0&&(formalization=formalization.replace(/{T}/g,var_t)),var_u.length>0&&(formalization=formalization.replace(/{U}/g,var_u)),e("#current_formalization_textarea"+formalization_id).val(formalization)}),e("#requirement_formalization_updated").val("true")}function x(t){requirement_modal_content=e(".modal-content"),requirement_modal_content.LoadingOverlay("show"),req_id=e("#requirement_id").val(),e.post("api/req/predict_pattern",{id:req_id,reset:t},function(t){requirement_modal_content.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):(e("#requirement_scope").html(t.scopes),e("#requirement_pattern").html(t.patterns))})}function N(){e(".formalization_selector").change(function(){C(),z()}),e(".reqirement-variable, .req_var_type").change(function(){z()}),e(".delete_formalization").confirmation({rootSelector:".delete_formalization"}).click(function(){var t;t=e(this).attr("name"),requirement_modal_content=e(".modal-content"),requirement_modal_content.LoadingOverlay("show"),req_id=e("#requirement_id").val(),e.post("api/req/del_formalization",{requirement_id:req_id,formalization_id:t},function(t){requirement_modal_content.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").html(t.html)}).done(function(){C(),z(),N(),k()})})}function k(){e(".reqirement-variable").each(function(e){let t=new l(this);new a(t,{dropdown:{maxCount:10}}).register([{match:/(^|\s)(\w+)$/,search:function(e,t){include_elems=function(e){return s.search(e)}(e),result=[];for(let e=0;e<Math.min(10,include_elems.length);e++)result.push(c[include_elems[e]]);t(result)},replace:function(e){return"$1"+e+" "}}])})}function O(n){e("#requirements_table").find("tbody").on("click","a",function(a){a.preventDefault();let l=n.row(e(a.target).parent()).data(),i=n.row(e(a.target).parent()).index();requirement_modal_content=e(".modal-content"),e("#requirement_modal").modal("show"),requirement_modal_content.LoadingOverlay("show"),e("#formalization_accordion").html(""),e("#requirement_tag_field").data("bs.tokenfield").$input.autocomplete({source:r}),requirement=e.get("api/req/get",{id:l.id},function(n){e("#requirement_id").val(n.id),e("#requirement_formalization_updated").val("false"),e("#modal_associated_row_index").val(i),c=n.available_vars,m=n.type_inference_errors,s=new t(c,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:12,minMatchCharLength:1,keys:void 0}),e("#requirement_modal_title").html(n.id+": "+n.type),e("#description_textarea").text(n.desc),e("#formalization_accordion").html(n.formalizations_html),e("#requirement_scope").val(n.scope),e("#requirement_pattern").val(n.pattern),e("#requirement_tag_field").tokenfield("setTokens",n.tags),e("#requirement_status").val(n.status),csv_row_content=e("#csv_content_accordion"),csv_row_content.html(""),csv_row_content.collapse("hide");let a=n.csv_data;for(const e in a)if(a.hasOwnProperty(e)){const t=a[e];csv_row_content.append("<p><strong>"+e+":</strong>"+t+"</p>")}!1===n.success&&alert("Could Not load the Requirement: "+n.errormsg)}).done(function(){C(),k(),N(),requirement_modal_content.LoadingOverlay("hide",!0)})})}function S(){let t=e("#requirements_table").DataTable(),n=[];e.each(t.columns().visible(),function(t,a){!1===a?(e("#col_toggle_button_"+t).removeClass("btn-info").addClass("btn-secondary"),n.push(!1)):(e("#col_toggle_button_"+t).removeClass("btn-secondary").addClass("btn-info"),n.push(!0))}),u=n}function T(t){t.columns().every(function(e){e>0&&t.column(e).header().append(" ("+e+")")}),e("#save_requirement_modal").click(function(){!function(t){requirement_modal_content=e(".modal-content"),requirement_modal_content.LoadingOverlay("show"),req_id=e("#requirement_id").val(),req_tags=e("#requirement_tag_field").val(),req_status=e("#requirement_status").val(),selected_scope=e("#requirement_scope").val(),selected_pattern=e("#requirement_pattern").val(),updated_formalization=e("#requirement_formalization_updated").val(),associated_row_id=parseInt(e("#modal_associated_row_index").val());let n={};e(".formalization_card").each(function(t){let a={};a.id=e(this).attr("title"),e(this).find("select").each(function(){e(this).hasClass("scope_selector")&&(a.scope=e(this).val()),e(this).hasClass("pattern_selector")&&(a.pattern=e(this).val())}),a.expression_mapping={},e("textarea.reqirement-variable").each(function(){""!==e(this).attr("title")&&(a.expression_mapping[e(this).attr("title")]=e(this).val())}),n[a.id]=a}),e.post("api/req/update",{id:req_id,update_formalization:updated_formalization,tags:req_tags,status:req_status,formalizations:JSON.stringify(n)},function(n){requirement_modal_content.LoadingOverlay("hide",!0),!1===n.success?alert(n.errormsg):(t.row(associated_row_id).data(n).draw(),e("#requirement_modal").modal("hide"))})}(t)}),e("#search_bar").keypress(function(n){13===n.which&&(d=w.fromQuery(e("#search_bar").val().trim()),t.draw())}),e("#type-filter-input").autocomplete({minLength:0,source:o,delay:100}),e("#status-filter-input").autocomplete({minLength:0,source:i,delay:100}),e("#tag-filter-input").autocomplete({minLength:0,source:r,delay:100}),e("#tag-filter-input, #status-filter-input, #type-filter-input").on("focus",function(){e(this).keydown()}).on("keypress",function(n){13===n.which&&(!function(){let t=[];function n(e,t,n){return t.length>0&&(e.length>0&&(e=e.concat([":AND:"])),e=e.concat(function(e){return["("].concat(e,[")"])}(w.awesomeQuerySplitt0r(t,n)))),e}t=n(t=n(t=n(t,e("#type-filter-input").val(),4),e("#tag-filter-input").val(),5),e("#status-filter-input").val(),6),f=w.searchArrayToTree(t)}(),t.draw())}),e("#table-filter-toggle").click(function(){e("#tag-filter-input").autocomplete({source:r}),e("#type-filter-input").autocomplete({source:o})}),e(".clear-all-filters").click(function(){e("#status-filter-input").val("").effect("highlight",{color:"green"},500),e("#tag-filter-input").val("").effect("highlight",{color:"green"},500),e("#type-filter-input").val("").effect("highlight",{color:"green"},500),e("#search_bar").val("").effect("highlight",{color:"green"},500),d=void 0,f=void 0,t.search("").columns().search("").draw()}),e("#gen-req-from-selection").click(function(){req_ids=[],t.rows({search:"applied"}).every(function(){let e=this.data();req_ids.push(e.id)}),e("#selected_requirement_ids").val(JSON.stringify(req_ids)),e("#generate_req_form").submit()}),e("#gen-csv-from-selection").click(function(){req_ids=[],t.rows({search:"applied"}).every(function(){let e=this.data();req_ids.push(e.id)}),e("#selected_csv_requirement_ids").val(JSON.stringify(req_ids)),e("#generate_csv_form").submit()}),e("#sort_by_guess").click(function(){e(this).hasClass("btn-secondary")?(x(),e(this).removeClass("btn-secondary").addClass("btn-success").text("On")):(e(this).removeClass("btn-success").addClass("btn-secondary").text("Off"),x(reset=!0))}),e(".colum-toggle-button").on("click",function(n){n.preventDefault();let a=t.column(e(this).attr("data-column"));state=a.visible(!a.visible()),S()}),e(".reset-colum-toggle").on("click",function(e){e.preventDefault(),t.columns(".default-col").visible(!0),t.columns(".extra-col").visible(!1),S()}),S(),e(".select-all-button").on("click",function(n){e(this).hasClass("btn-secondary")?t.rows({page:"current"}).select():t.rows({page:"current"}).deselect(),e(".select-all-button").toggleClass("btn-secondary btn-primary")}),t.on("user-select",function(){let t=e(".select-all-button");t.removeClass("btn-primary"),t.addClass("btn-secondary ")}),e("#multi-add-tag-input, #multi-remove-tag-input").autocomplete({minLength:0,source:r,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e("#multi-set-status-input").autocomplete({minLength:0,source:i,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e(".apply-multi-edit").click(function(){!function(t){let n=e("body");n.LoadingOverlay("show");let a=e("#multi-add-tag-input").val().trim(),l=e("#multi-remove-tag-input").val().trim(),s=e("#multi-set-status-input").val().trim(),r=[];t.rows({selected:!0}).every(function(){let e=this.data();r.push(e.id)}),e.post("api/req/multi_update",{add_tag:a,remove_tag:l,set_status:s,selected_ids:JSON.stringify(r)},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()})}(t)})}function A(t){requirements_table=e("#requirements_table").DataTable({language:{emptyTable:"Loading data."},paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/req/gets",deferRender:!0,columnDefs:t,createdRow:function(t,n,a){"Heading"===n.type&&e(t).addClass("bg-primary"),"Information"===n.type&&e(t).addClass("table-info"),"Requirement"===n.type&&e(t).addClass("table-warning"),"not set"===n.type&&e(t).addClass("table-light")},initComplete:function(){e("#search_bar").val(""),O(requirements_table),T(requirements_table),function(e,t){e.search("").columns().search(""),t.q.length>0&&e.columns(Number(t.col)).search("^"+t.q+"$",!0,!1),e.draw()}(requirements_table,_)}})}function D(){e("#requirement_tag_field").tokenfield({autocomplete:{source:r,delay:100},showAutocompleteOnFocus:!0}),e("#requirement_modal").on("hidden.bs.modal",function(t){e("#requirement_tag_field").val(""),e("#requirement_tag_field-tokenfield").val("")}),e("#add_formalization").click(function(){requirement_modal_content=e(".modal-content"),requirement_modal_content.LoadingOverlay("show"),req_id=e("#requirement_id").val(),e.post("api/req/new_formalization",{id:req_id},function(t){requirement_modal_content.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").append(t.html)}).done(function(){C(),z(),N(),k()})}),C()}e.fn.dataTable.ext.search.push(function(e,t,n){return q(d,t)&&q(f,t)}),e(document).ready(function(){!function(){let t=[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{targets:[1],data:"pos"},{targets:[2],data:"id",render:function(e,t,n,a){return result='<a href="#">'+e+"</a>",result}},{targets:[3],data:"desc"},{targets:[4],data:"type",render:function(e,t,n,a){return o.indexOf(e)<=-1&&o.push(e),e}},{targets:[5],data:"tags",render:function(t,n,a,l){return result="",e(t).each(function(e,t){t.length>0&&(result+='<span class="badge badge-info">'+t+"</span></br>",r.indexOf(t)<=-1&&r.push(t))}),a.formal.length>0&&(result+='<span class="badge badge-success">has_formalization</span></br>'),result}},{targets:[6],data:"status",render:function(e,t,n,a){return result='<span class="badge badge-info">'+e+"</span></br>",result}}];genericColums=e.get("api/table/colum_defs","",function(e){const n=e.col_defs.length;for(let a=0;a<n;a++)t.push({targets:[parseInt(e.col_defs[a].target)],data:e.col_defs[a].csv_name,visible:!1,searchable:!0})}).done(function(){A(t)})}(),D()})}).call(this,n(3))}});