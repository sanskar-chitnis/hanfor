!function(e){function t(t){for(var n,i,l=t[0],s=t[1],c=t[2],_=0,d=[];_<l.length;_++)i=l[_],r[i]&&d.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={4:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./static/dist/";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([218,0]),a()}({218:function(e,t,a){(function(e){a(19),a(10),a(17),a(16),a(23),a(15),a(14),a(22),a(154),a(153);let t=["CONST","ENUM_INT","ENUM_REAL"],n=[":AND:",":OR:",":NOT:",":COL_INDEX_01:",":COL_INDEX_02:",":COL_INDEX_03:",":COL_INDEX_04:"],r=sessionStorage.getItem("var_search_string"),o=[];const{SearchNode:i}=a(21);let l=void 0,s=[!0,!0,!0,!0,!0];function c(){r=e("#search_bar").val().trim(),sessionStorage.setItem("var_search_string",r),l=i.fromQuery(r)}function u(t,a=!1){let n=e("body");n.LoadingOverlay("show");let r=e("#multi-change-type-input").val().trim(),o=[];t.rows({selected:!0}).every(function(){let e=this.data();o.push(e.name)}),e.post("api/var/multi_update",{change_type:r,selected_vars:JSON.stringify(o),del:a},function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()})}function _(){e(".requirement_var_group").each(function(){e(this).hide()}),e(".formalization_card").each(function(t){const a=e(this).attr("title"),n=e("#requirement_scope"+a).val(),r=e("#requirement_pattern"+a).val();let o=e("#requirement_var_group_p"+a),i=e("#requirement_var_group_q"+a),l=e("#requirement_var_group_r"+a),s=e("#requirement_var_group_s"+a),c=e("#requirement_var_group_t"+a),u=e("#requirement_var_group_u"+a);switch(n){case"BEFORE":case"AFTER":o.show();break;case"BETWEEN":case"AFTER_UNTIL":o.show(),i.show()}switch(r){case"Absence":case"Universality":case"Existence":case"BoundedExistence":l.show();break;case"Invariant":case"Precedence":case"Response":case"MinDuration":case"MaxDuration":case"BoundedRecurrence":l.show(),s.show();break;case"PrecedenceChain1-2":case"PrecedenceChain2-1":case"ResponseChain1-2":case"ResponseChain2-1":case"BoundedResponse":case"BoundedInvariance":case"TimeConstrainedInvariant":case"Toggle1":l.show(),s.show(),c.show();break;case"ConstrainedChain":case"TimeConstrainedMinDuration":case"ConstrainedTimedExistence":case"Toggle2":l.show(),s.show(),c.show(),u.show();break;case"NotFormalizable":o.hide(),i.hide()}})}function d(){e(".formalization_card").each(function(t){const a=e(this).attr("title");let n="";const r=e("#requirement_scope"+a).find("option:selected").text().replace(/\s\s+/g," "),i=e("#requirement_pattern"+a).find("option:selected").text().replace(/\s\s+/g," ");"None"!==r&&"None"!==i&&(n=r+", "+i+".");let l=e("#formalization_var_p"+a).val(),s=e("#formalization_var_q"+a).val(),c=e("#formalization_var_r"+a).val(),u=e("#formalization_var_s"+a).val(),_=e("#formalization_var_t"+a).val(),d=e("#formalization_var_u"+a).val();l.length>0&&(n=n.replace(/{P}/g,l)),s.length>0&&(n=n.replace(/{Q}/g,s)),c.length>0&&(n=n.replace(/{R}/g,c)),u.length>0&&(n=n.replace(/{S}/g,u)),_.length>0&&(n=n.replace(/{T}/g,_)),d.length>0&&(n=n.replace(/{U}/g,d)),e("#current_formalization_textarea"+a).val(n);let m=e("#formalization_heading"+a);if(a in o)for(let t=0;t<o[a].length;t++)e("#formalization_var_"+o[a][t]+a).addClass("type-error"),m.addClass("type-error-head");else m.removeClass("type-error-head")}),e("#variable_constraint_updated").val("true")}function m(){e(".formalization_selector").change(function(){_(),d()}),e(".reqirement-variable, .req_var_type").change(function(){d()}),e(".delete_formalization").confirmation({rootSelector:".delete_formalization"}).click(function(){!function(t){let a=e(".modal-content");a.LoadingOverlay("show");const n=e("#variable_name").val();e.post("api/var/del_constraint",{name:n,constraint_id:t},function(t){a.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").html(t.html)}).done(function(){_(),d(),m()})}(e(this).attr("name"))})}function p(t){!0===t?e("#variable_value_form_group").hide():e("#variable_value_form_group").show()}function v(t=!1){!0===t?e("#variable_belongs_to_form_group").hide():e("#variable_belongs_to_form_group").show()}function f(t=!1){!0===t?e(".enum-controls").hide():e(".enum-controls").show()}function h(a){let n=e("#variables_table").DataTable().row(a).data(),r=e(".modal-content");p(!0),f(!0),v(!0),e("#variable_modal").modal("show"),e("#modal_associated_row_index").val(a),e("#variable_name_old").val(n.name),e("#variable_type_old").val(n.type),e("#occurences").val(n.used_by),e("#variable_modal_title").html("Variable: "+n.name),e("#variable_name").val(n.name);let i=e("#variable_type"),l=e("#variable_value"),s=e("#variable_value_old"),c=e("#belongs_to_enum"),u=e("#belongs_to_enum_old"),h=e("#enumerators");var b;i.val(n.type),l.val(""),s.val(""),c.val(""),u.val(""),h.html(""),"CONST"!==n.type&&"ENUMERATOR_INT"!==n.type&&"ENUMERATOR_REAL"!==n.type||(p(),l.val(n.const_val),s.val(n.const_val)),"ENUMERATOR_INT"!==n.type&&"ENUMERATOR_REAL"!==n.type||(v(),c.val(n.belongs_to_enum),u.val(n.belongs_to_enum)),"ENUM_REAL"!==n.type&&"ENUM_INT"!==n.type||(f(),b=n.name,e.post("api/var/get_enumerators",{name:b},function(t){!1===t.success?alert(t.errormsg):e.each(t.enumerators,function(e,t){g(t[0].substr(b.length+1),t[1])})}).done(function(){_(),d(),m()})),i.autocomplete({minLength:0,source:t}).on("focus",function(){e(this).keydown()}),function(t){e.post("api/var/get_constraints_html",{name:t},function(t){!1===t.success?alert(t.errormsg):(o=t.type_inference_errors,e("#formalization_accordion").html(t.html))}).done(function(){_(),d(),m()})}(n.name),r.LoadingOverlay("hide")}function g(t,a){const n=`\n        <div class="input-group enumerator-input">\n            <span class="input-group-addon">Name</span>\n            <input class="form-control enum_name_input" type="text" value="${t}">\n            <span class="input-group-addon">Value</span>\n            <input class="form-control enum_value_input" type="number" step="any" value="${a}">\n            <buttton type="button" class="btn btn-danger input-group-addon del_enum" data-name="${t}">Delete</buttton>\n        </div>`;e("#enumerators").append(n)}e(document).ready(function(){let a=e("#variables_table").DataTable({paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,responsive:!0,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/var/gets",deferRender:!0,columns:[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{data:"name",targets:[1],render:function(e,t,a,n){return result='<a class="modal-opener" href="#">'+e+"</span></br>",result}},{data:"type",targets:[2],render:function(e,a,n,r){return null!==e&&t.indexOf(e)<=-1&&t.push(e),null!==e&&"CONST"===e&&(e=e+" ("+n.const_val+")"),e}},{data:"used_by",targets:[3],render:function(t,a,n,r){let o="";return e.inArray("Type_inference_error",n.tags)>-1&&(o+='<span class="badge badge-danger"><a href="#" class="variable_link" data-name="'+n.name+'" >Has type inference error</a></span> '),e(t).each(function(e,t){if(t.length>0){let e=function(e){let t=null,a=/^(Constraint_)(.*)(_[0-9]+$)/gm.exec(e);return null!==a&&(t=a[2]),t}(t);if(null!==e)o+='<span class="badge badge-success"><a href="#" class="variable_link" data-name="'+e+'" >'+t+"</a></span> ";else{o+='<span class="badge badge-info"><a href="./'+("?command=search&col=2&q=%5C%22"+t+"%5C%22")+'" target="_blank">'+t+"</a></span> "}}}),o.length<1&&(o+='<span class="badge badge-warning"><a href="#">Not used</a></span></br>'),o}},{data:"script_results",targets:[4],render:function(e,t,a,n){return e}},{data:"used_by",targets:[5],visible:!1,searchable:!1,render:function(t,a,n,r){return result="",e(t).each(function(e,t){t.length>0&&(result.length>1&&(result+=", "),result+=t)}),result}}],infoCallback:function(t,a,n,r,o,i){var l=this.api().page.info();e("#clear-all-filters-text").html("Showing "+o+"/"+l.recordsTotal+". Clear all.");let s="Showing "+a+" to "+n+" of "+o+" entries";return s+=" (filtered from "+l.recordsTotal+" total entries)."},initComplete:function(){e("#search_bar").val(r),e(".variable_link").click(function(t){t.preventDefault(),h(function(t){let a=-1;return e("#variables_table").DataTable().row(function(e,n,r){n.name===t&&(a=e)}),a}(e(this).data("name")))}),c(),e.fn.dataTable.ext.search.push(function(e,t,a){return function(e){return l.evaluate(e,s)}(t)}),this.api().draw()}});a.column(4).visible(!0),a.column(5).visible(!1);let o=e("#search_bar");new Awesomplete(o[0],{filter:function(e,t){let a=!1;return(t.split(":").length-1)%2==1&&(a=Awesomplete.FILTER_CONTAINS(e,t.match(/[^:]*$/)[0])),a},item:function(e,t){return Awesomplete.ITEM(e,t.match(/(:)([\S]*$)/)[2])},replace:function(e){const t=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=t+e},list:n,minChars:1,autoFirst:!0}),o.keypress(function(e){13===e.which&&(c(),a.draw())}),e("#variables_table  tbody").on("click","a.modal-opener",function(t){t.preventDefault(),h(a.row(e(t.target).parent()).index())}),e("#save_variable_modal").click(function(){!function(a){let n=e(".modal-content");n.LoadingOverlay("show");const r=e("#variable_name").val(),o=e("#variable_name_old").val(),i=e("#variable_type").val(),l=e("#variable_type_old").val(),s=parseInt(e("#modal_associated_row_index").val()),c=e("#occurences").val(),u=e("#variable_value").val(),_=e("#variable_value_old").val(),d=e("#variable_constraint_updated").val(),m=e("#belongs_to_enum").val(),p=e("#belongs_to_enum_old").val();let v={};e(".formalization_card").each(function(t){let a={};a.id=e(this).attr("title"),e(this).find("select").each(function(){e(this).hasClass("scope_selector")&&(a.scope=e(this).val()),e(this).hasClass("pattern_selector")&&(a.pattern=e(this).val())}),a.expression_mapping={},e(this).find("textarea.reqirement-variable").each(function(){""!==e(this).attr("title")&&(a.expression_mapping[e(this).attr("title")]=e(this).val())}),v[a.id]=a}),null!==i&&t.indexOf(i)<=-1&&t.push(i);let f=[];"ENUM_INT"!==i&&"ENUM_REAL"!==i||e(".enumerator-input").each(function(t,a){let n=e(this).find(".enum_name_input").val(),r=e(this).find(".enum_value_input").val();f.push([n,r])}),e.post("api/var/update",{name:r,name_old:o,type:i,const_val:u,const_val_old:_,type_old:l,occurrences:c,constraints:JSON.stringify(v),updated_constraints:d,enumerators:JSON.stringify(f),belongs_to_enum:m,belongs_to_enum_old:p},function(t){n.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):t.rebuild_table?location.reload():(a.row(s).data(t.data).draw(),e("#variable_modal").modal("hide"))})}(a)}),e("#variable_type").on("keyup change autocompleteclose",function(){"CONST"===e(this).val()?p():p(revert=!0),"ENUMERATOR_INT"===e(this).val()||"ENUMERATOR_REAL"===e(this).val()?(v(),p()):v(!0),"ENUM_INT"===e(this).val()||"ENUM_REAL"===e(this).val()?f():f(revert=!0)}),e(".import_link").on("click",function(){!function(t,a){let n=e("#variable_import_modal");e("#variable_import_sess_name").val(t),e("#variable_import_sess_revision").val(a),e("#variable_import_modal_title").html("Import from Session: "+t+" at: "+a),n.modal("show"),n.LoadingOverlay("show"),e.post("api/var/var_import_info",{sess_name:t,sess_revision:a},function(t){n.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):(e("#import_tot_number").html("Total:\t"+t.tot_vars+" Variables."),e("#import_new_number").html("New:\t"+t.new_vars+" Variables."))})}(e(this).attr("data-name"),e(this).attr("data-revision"))}),e("#start_variable_import_session").click(function(t){!function(){let t=e("#variable_import_modal"),a=e("#variable_import_sess_name").val(),n=e("#variable_import_sess_revision").val();e("#import_option").val(),t.LoadingOverlay("show"),e.post("api/var/start_import_session",{sess_name:a,sess_revision:n},function(e){t.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):window.location.href=base_url+"variable_import/"+e.session_id})}()}),e(".select-all-button").on("click",function(t){e(this).hasClass("btn-secondary")?a.rows({page:"current"}).select():a.rows({page:"current"}).deselect(),e(".select-all-button").toggleClass("btn-secondary btn-primary")}),a.on("user-select",function(){let t=e(".select-all-button");t.removeClass("btn-primary"),t.addClass("btn-secondary ")}),e("#multi-change-type-input").autocomplete({minLength:0,source:t,delay:100}).on("focus",function(){e(this).keydown()}).val(""),e(".apply-multi-edit").click(function(){u(a)}),e(".delete_button").confirmation({rootSelector:".delete_button"}).click(function(){u(a,del=!0)}),e("#add_constraint").click(function(){!function(){let t=e(".modal-content");t.LoadingOverlay("show");const a=e("#variable_name").val();parseInt(e("#modal_associated_row_index").val()),e.post("api/var/new_constraint",{name:a},function(a){t.LoadingOverlay("hide",!0),!1===a.success?alert(a.errormsg):e("#formalization_accordion").html(a.html)}).done(function(){_(),d(),m()})}()}),e("#save_new_enum_modal").click(function(){!function(){const t=e("#enum_name").val(),a=e("#enum_type").val();e.post("api/var/add_new_enum",{name:t,type:a},function(e){!1===e.success?alert(e.errormsg):location.reload()})}()}),e("#add_enumerator").click(function(){g("")}),e("#enumerators").on("click",".del_enum",function(t){const a=e(this).attr("data-name"),n=e("#variable_name_old").val();let r=e(this).parent(".enumerator-input");0===a.length?r.remove():function(t,a,n){let r=e("#variable_modal");r.LoadingOverlay("show"),e.post("api/var/del_var",{name:t+"_"+a},function(e){r.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):n.remove()})}(n,a,r)}).on("paste",".enum_name_input",function(e){let t=e.originalEvent.clipboardData.getData("text");if(function(e){const t=e.match(/[^\r\n]+/g);if(t.length<=0)return!1;for(const e of t){const t=e.match(/[^\t]+/g);if(2!==t.length)return!1;if(isNaN(t[1]))return!1}return!0}(t)){console.log("has smart input form");const a=function(e){const t=e.match(/[^\r\n]+/g);let a=[];for(const e of t){const t=e.match(/[^\t]+/g);a.push([t[0],t[1]])}return a}(t);console.log(a);for(const e of a)g(e[0],e[1]);e.preventDefault()}}),e("#generate_req").click(function(){e("#generate_req_form").submit()}),e(".clear-all-filters").click(function(){e("#search_bar").val("").effect("highlight",{color:"green"},500),c(),a.draw()})})}).call(this,a(3))}});