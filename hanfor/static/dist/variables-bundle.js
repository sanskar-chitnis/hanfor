!function(e){function a(a){for(var n,l,i=a[0],s=a[1],c=a[2],_=0,p=[];_<i.length;_++)l=i[_],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(a);p.length;)p.shift()();return o.push.apply(o,c||[]),t()}function t(){for(var e,a=0;a<o.length;a++){for(var t=o[a],n=!0,i=1;i<t.length;i++){var s=t[i];0!==r[s]&&(n=!1)}n&&(o.splice(a--,1),e=l(l.s=t[0]))}return e}var n={},r={6:0},o=[];function l(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,a,t){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,a){if(1&a&&(e=l(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)l.d(t,n,function(a){return e[a]}.bind(null,n));return t},l.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="./static/dist/";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=a,i=i.slice();for(var c=0;c<i.length;c++)a(i[c]);var u=s;o.push([226,0]),t()}({226:function(e,a,t){(function(e){t(8),t(6),t(10),t(7),t(18),t(11),t(13),t(12),t(19),t(20),t(14);let a=t(27),n=["CONST","ENUM_INT","ENUM_REAL"],r=[":AND:",":OR:",":NOT:",":COL_INDEX_01:",":COL_INDEX_02:",":COL_INDEX_03:",":COL_INDEX_04:"],o=sessionStorage.getItem("var_search_string"),l=[];const{SearchNode:i}=t(15);let s=void 0,c=[!0,!0,!0,!0,!0],u=JSON.parse(search_query);function _(){o=e("#search_bar").val().trim(),sessionStorage.setItem("var_search_string",o),s=i.fromQuery(o)}function p(a,t=!1){let n=e("body");n.LoadingOverlay("show");let r=e("#multi-change-type-input").val().trim(),o=[];a.rows({selected:!0}).every((function(){let e=this.data();o.push(e.name)})),e.post("api/var/multi_update",{change_type:r,selected_vars:JSON.stringify(o),del:t},(function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}function d(){e(".requirement_var_group").each((function(){e(this).hide()})),e(".formalization_card").each((function(){const a=e(this).attr("title"),t=e("#requirement_scope"+a).val(),n=e("#requirement_pattern"+a).val();let r=e("#requirement_var_group_p"+a),o=e("#requirement_var_group_q"+a),l=e("#requirement_var_group_r"+a),i=e("#requirement_var_group_s"+a),s=e("#requirement_var_group_t"+a),c=e("#requirement_var_group_u"+a),u=e("#requirement_var_group_v"+a);switch(t){case"BEFORE":case"AFTER":r.show();break;case"BETWEEN":case"AFTER_UNTIL":r.show(),o.show()}Object.keys(_PATTERNS[n].env).forEach((function(e){switch(e){case"R":l.show();break;case"S":i.show();break;case"T":s.show();break;case"U":c.show();break;case"V":u.show()}}))}))}function m(){e(".formalization_card").each((function(){const a=e(this).attr("title");let t="";const n=e("#requirement_scope"+a).find("option:selected").text().replace(/\s\s+/g," "),r=e("#requirement_pattern"+a).find("option:selected").text().replace(/\s\s+/g," ");"None"!==n&&"None"!==r&&(t=n+", "+r+".");let o=e("#formalization_var_p"+a).val(),i=e("#formalization_var_q"+a).val(),s=e("#formalization_var_r"+a).val(),c=e("#formalization_var_s"+a).val(),u=e("#formalization_var_t"+a).val(),_=e("#formalization_var_u"+a).val(),p=e("#formalization_var_v"+a).val();o.length>0&&(t=t.replace(/{P}/g,o)),i.length>0&&(t=t.replace(/{Q}/g,i)),s.length>0&&(t=t.replace(/{R}/g,s)),c.length>0&&(t=t.replace(/{S}/g,c)),u.length>0&&(t=t.replace(/{T}/g,u)),_.length>0&&(t=t.replace(/{U}/g,_)),p.length>0&&(t=t.replace(/{V}/g,p)),e("#current_formalization_textarea"+a).val(t);let d=e("#formalization_heading"+a);if(a in l)for(let t=0;t<l[a].length;t++)e("#formalization_var_"+l[a][t]+a).addClass("type-error"),d.addClass("type-error-head");else d.removeClass("type-error-head")})),e("#variable_constraint_updated").val("true")}function v(){e(".formalization_selector").change((function(){d(),m()})),e(".reqirement-variable, .req_var_type").change((function(){m()})),e(".delete_formalization").confirmation({rootSelector:".delete_formalization"}).click((function(){!function(a){let t=e(".modal-content");t.LoadingOverlay("show");const n=e("#variable_name").val();e.post("api/var/del_constraint",{name:n,constraint_id:a},(function(a){t.LoadingOverlay("hide",!0),!1===a.success?alert(a.errormsg):e("#formalization_accordion").html(a.html)})).done((function(){d(),m(),v()}))}(e(this).attr("name"))}))}function f(a){!0===a?e("#variable_value_form_group").hide():e("#variable_value_form_group").show()}function h(a=!1){!0===a?e("#variable_belongs_to_form_group").hide():e("#variable_belongs_to_form_group").show()}function g(a=!1){!0===a?e(".enum-controls").hide():e(".enum-controls").show()}function b(a){let t=e("#variables_table").DataTable().row(a).data(),r=e(".modal-content");f(!0),g(!0),h(!0),e("#variable_modal").modal("show"),e("#modal_associated_row_index").val(a),e("#variable_name_old").val(t.name),e("#variable_type_old").val(t.type),e("#occurences").val(t.used_by),e("#variable_modal_title").html("Variable: "+t.name),e("#variable_name").val(t.name);let o=e("#variable_type"),i=e("#variable_value"),s=e("#variable_value_old"),c=e("#belongs_to_enum"),u=e("#belongs_to_enum_old"),_=e("#enumerators");var p;o.val(t.type),i.val(""),s.val(""),c.val(""),u.val(""),_.html(""),"CONST"!==t.type&&"ENUMERATOR_INT"!==t.type&&"ENUMERATOR_REAL"!==t.type||(f(),i.val(t.const_val),s.val(t.const_val)),"ENUMERATOR_INT"!==t.type&&"ENUMERATOR_REAL"!==t.type||(h(),c.val(t.belongs_to_enum),u.val(t.belongs_to_enum)),"ENUM_REAL"!==t.type&&"ENUM_INT"!==t.type||(g(),p=t.name,e.post("api/var/get_enumerators",{name:p},(function(a){!1===a.success?alert(a.errormsg):e.each(a.enumerators,(function(e,a){y(a[0].substr(p.length+1),a[1])}))})).done((function(){d(),m(),v()}))),o.autocomplete({minLength:0,source:n}).on("focus",(function(){e(this).keydown()})),function(a){e.post("api/var/get_constraints_html",{name:a},(function(a){!1===a.success?alert(a.errormsg):(l=a.type_inference_errors,e("#formalization_accordion").html(a.html))})).done((function(){d(),m(),v()}))}(t.name),r.LoadingOverlay("hide")}function y(a,t){const n=`\n        <div class="input-group enumerator-input">\n            <span class="input-group-prepend input-group-text">Name</span>\n            <input class="form-control enum_name_input" type="text" value="${a}">\n            <span class="input-group-prepend input-group-text">Value</span>\n            <input class="form-control enum_value_input" type="number" step="any" value="${t}">\n            <buttton type="button" class="btn btn-danger input-group-append del_enum" data-name="${a}">Delete</buttton>\n        </div>`;e("#enumerators").append(n)}e(document).ready((function(){let t=e("#variables_table").DataTable({paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,responsive:!0,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/var/gets",deferRender:!0,columns:[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{data:"name",targets:[1],render:function(e){return'<a class="modal-opener" href="#">'+e+"</span></br>"}},{data:"type",targets:[2],render:function(e,a,t){return null!==e&&n.indexOf(e)<=-1&&n.push(e),null!==e&&"CONST"===e&&(e=e+" ("+t.const_val+")"),e}},{data:"used_by",targets:[3],render:function(a,t,n){let r="",o="";return e.inArray("Type_inference_error",n.tags)>-1&&(r+='<span class="badge badge-danger"><a href="#" class="variable_link" data-name="'+n.name+'" >Has type inference error</a></span> '),e(a).each((function(e,a){if(a.length>0){let e=function(e){let a=null,t=/^(Constraint_)(.*)(_[0-9]+$)/gm.exec(e);return null!==t&&(a=t[2]),a}(a);if(null!==e)r+='<span class="badge badge-success"><a href="#" class="variable_link" data-name="'+e+'" >'+a+"</a></span> ";else{r+='<span class="badge badge-info"><a href="./'+("?command=search&col=2&q=%5C%22"+a+"%5C%22")+'" target="_blank">'+a+"</a></span> ",o.length>0?o+="%3AOR%3A%5C%22"+a+"%5C%22":o+="?command=search&col=2&q=%5C%22"+a+"%5C%22"}}})),r.length<1?r+='<span class="badge badge-warning"><a href="#">Not used</a></span></br>':a.length>1&&(r+='<span class="badge badge-info" style="background-color: #4275d8"><a href="./'+o+'" target="_blank">Show all</a></span> '),r}},{data:"script_results",targets:[4],render:function(e){return e}},{data:"used_by",targets:[5],visible:!1,searchable:!1,render:function(a){let t="";return e(a).each((function(e,a){a.length>0&&(t.length>1&&(t+=", "),t+=a)})),t}}],infoCallback:function(a,t,n,r,o){let l=this.api().page.info();e("#clear-all-filters-text").html("Showing "+o+"/"+l.recordsTotal+". Clear all.");let i="Showing "+t+" to "+n+" of "+o+" entries";return i+=" (filtered from "+l.recordsTotal+" total entries).",i},initComplete:function(){e("#search_bar").val(o),e(".variable_link").click((function(a){a.preventDefault(),b(function(a){let t=e("#variables_table").DataTable(),n=-1;return t.row((function(e,t){t.name===a&&(n=e)})),n}(e(this).data("name")))})),a.process_url_query(u),_(),e.fn.dataTable.ext.search.push((function(e,a){return function(e){return s.evaluate(e,c)}(a)})),this.api().draw(),e("#variables_table").colResizable({liveDrag:!0,postbackSafe:!0})}});t.column(4).visible(!0),t.column(5).visible(!1);let l=e("#search_bar");new Awesomplete(l[0],{filter:function(e,a){let t=!1;return(a.split(":").length-1)%2==1&&(t=Awesomplete.FILTER_CONTAINS(e,a.match(/[^:]*$/)[0])),t},item:function(e,a){return Awesomplete.ITEM(e,a.match(/(:)([\S]*$)/)[2])},replace:function(e){const a=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=a+e},list:r,minChars:1,autoFirst:!0}),l.keypress((function(e){13===e.which&&(_(),t.draw())})),e("#variables_table  tbody").on("click","a.modal-opener",(function(a){a.preventDefault(),b(t.row(e(a.target).parent()).index())})),e("#save_variable_modal").click((function(){!function(a){let t=e(".modal-content");t.LoadingOverlay("show");const r=e("#variable_name").val(),o=e("#variable_name_old").val(),l=e("#variable_type").val(),i=e("#variable_type_old").val(),s=parseInt(e("#modal_associated_row_index").val()),c=e("#occurences").val(),u=e("#variable_value").val(),_=e("#variable_value_old").val(),p=e("#variable_constraint_updated").val(),d=e("#belongs_to_enum").val(),m=e("#belongs_to_enum_old").val();let v={};e(".formalization_card").each((function(){let a={};a.id=e(this).attr("title"),e(this).find("select").each((function(){e(this).hasClass("scope_selector")&&(a.scope=e(this).val()),e(this).hasClass("pattern_selector")&&(a.pattern=e(this).val())})),a.expression_mapping={},e(this).find("textarea.reqirement-variable").each((function(){""!==e(this).attr("title")&&(a.expression_mapping[e(this).attr("title")]=e(this).val())})),v[a.id]=a})),null!==l&&n.indexOf(l)<=-1&&n.push(l);let f=[];"ENUM_INT"!==l&&"ENUM_REAL"!==l||e(".enumerator-input").each((function(){let a=e(this).find(".enum_name_input").val(),t=e(this).find(".enum_value_input").val();f.push([a,t])})),e.post("api/var/update",{name:r,name_old:o,type:l,const_val:u,const_val_old:_,type_old:i,occurrences:c,constraints:JSON.stringify(v),updated_constraints:p,enumerators:JSON.stringify(f),belongs_to_enum:d,belongs_to_enum_old:m},(function(n){t.LoadingOverlay("hide",!0),!1===n.success?alert(n.errormsg):n.rebuild_table?location.reload():(a.row(s).data(n.data).draw(),e("#variable_modal").modal("hide"))}))}(t)})),e("#variable_type").on("keyup change autocompleteclose",(function(){"CONST"===e(this).val()?f():f(!0),"ENUMERATOR_INT"===e(this).val()||"ENUMERATOR_REAL"===e(this).val()?(h(),f()):h(!0),"ENUM_INT"===e(this).val()||"ENUM_REAL"===e(this).val()?g():g(!0)})),e(".import_link").on("click",(function(){!function(a,t){let n=e("#variable_import_modal");e("#variable_import_sess_name").val(a),e("#variable_import_sess_revision").val(t),e("#variable_import_modal_title").html("Import from Session: "+a+" at: "+t),n.modal("show"),n.LoadingOverlay("show"),e.post("api/var/var_import_info",{sess_name:a,sess_revision:t},(function(a){n.LoadingOverlay("hide",!0),!1===a.success?alert(a.errormsg):(e("#import_tot_number").html("Total:\t"+a.tot_vars+" Variables."),e("#import_new_number").html("New:\t"+a.new_vars+" Variables."))}))}(e(this).attr("data-name"),e(this).attr("data-revision"))})),e("#start_variable_import_session").click((function(){!function(){let a=e("#variable_import_modal"),t=e("#variable_import_sess_name").val(),n=e("#variable_import_sess_revision").val();a.LoadingOverlay("show"),e.post("api/var/start_import_session",{sess_name:t,sess_revision:n},(function(e){a.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):window.location.href=base_url+"variable_import/"+e.session_id}))}()})),e(".select-all-button").on("click",(function(){e(this).hasClass("btn-secondary")?t.rows({page:"current"}).select():t.rows({page:"current"}).deselect(),e(".select-all-button").toggleClass("btn-secondary btn-primary")})),t.on("user-select",(function(){let a=e(".select-all-button");a.removeClass("btn-primary"),a.addClass("btn-secondary ")})),e("#multi-change-type-input").autocomplete({minLength:0,source:n,delay:100}).on("focus",(function(){e(this).keydown()})).val(""),e(".apply-multi-edit").click((function(){p(t)})),e(".delete_button").confirmation({rootSelector:".delete_button"}).click((function(){p(t,!0)})),e("#add_constraint").click((function(){!function(){let a=e(".modal-content");a.LoadingOverlay("show");const t=e("#variable_name").val();e.post("api/var/new_constraint",{name:t},(function(t){a.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):e("#formalization_accordion").html(t.html)})).done((function(){d(),m(),v()}))}()})),e("#save_new_variable_modal").click((function(){!function(){const a=e("#new_variable_name").val(),t=e("#new_variable_type").val(),n=e("#new_variable_const_value").val();e.post("api/var/add_new_variable",{name:a,type:t,value:n},(function(e){!1===e.success?alert(e.errormsg):location.reload()}))}()})),e("#add_enumerator").click((function(){y("")})),e("#enumerators").on("click",".del_enum",(function(){const a=e(this).attr("data-name"),t=e("#variable_name_old").val();let n=e(this).parent(".enumerator-input");0===a.length?n.remove():function(a,t,n){let r=e("#variable_modal");r.LoadingOverlay("show"),e.post("api/var/del_var",{name:a+"_"+t},(function(e){r.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):n.remove()}))}(t,a,n)})).on("paste",".enum_name_input",(function(e){let a=e.originalEvent.clipboardData.getData("text");if(function(e){const a=e.match(/[^\r\n]+/g);if(a.length<=0)return!1;for(const e of a){const a=e.match(/[^\t]+/g);if(2!==a.length)return!1;if(isNaN(a[1]))return!1}return!0}(a)){console.log("has smart input form");const t=function(e){const a=e.match(/[^\r\n]+/g);let t=[];for(const e of a){const a=e.match(/[^\t]+/g);t.push([a[0],a[1]])}return t}(a);console.log(t);for(const e of t)y(e[0],e[1]);e.preventDefault()}})),e("#generate_req").click((function(){e("#generate_req_form").submit()})),e(".clear-all-filters").click((function(){e("#search_bar").val("").effect("highlight",{color:"green"},500),_(),t.draw()})),e("#variable_new_vaiable_modal").on("show.bs.modal change",(function(){!function(){const a=e("#new_variable_type").val();let t=e("#new_variable_const_input");"CONST"===a?t.show():t.hide()}()}))}))}).call(this,t(2))}});