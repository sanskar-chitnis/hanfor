(()=>{var e,t={692:(e,t,n)=>{var a=n(9755);n(1388),n(4712),n(3333),n(2993),n(944),n(3889),n(7312),n(2106),n(9570),n(7175);const r=n(3682),{SearchNode:o}=n(3024),{Modal:l}=n(4712);let i=sessionStorage.getItem("tag_search_string"),c=[":AND:",":OR:",":NOT:",":COL_INDEX_00:",":COL_INDEX_01:",":COL_INDEX_02:"];function s(){i=a("#search_bar").val().trim(),sessionStorage.setItem("tag_search_string",i),search_tree=o.fromQuery(i)}function d(e){let t=a(".modal-content");t.LoadingOverlay("show");let n=a("#tag_name").val(),r=a("#occurences").val();a.ajax({type:"DELETE",url:"api/tag/del_tag",data:{name:n,occurences:r},success:function(e){t.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):e.rebuild_table?location.reload():(tagsDataTable.row(associated_row_id).data(e.data).draw(),l.getOrCreateInstance(document.getElementById("tag_modal")).hide())}})}a(document).ready((function(){let e=a("#tags-table"),t=e.DataTable({paging:!0,stateSave:!0,pageLength:50,responsive:!0,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/tag/gets",deferRender:!0,columns:[{data:"name",render:function(e,t,n,a){return result='<a class="modal-opener" href="#">'+e+"</span></br>",result}},{data:"description",render:function(e,t,n,a){return result='<div class="white-space-pre">'+e+"</div>",result}},{data:"used_by",render:function(e,t,n,r){let o="";if(a(e).each((function(e,t){t.length>0&&(search_query="?command=search&col=2&q=%5C%22"+t+"%5C%22",o+='<span class="badge bg-info"><a href="'+base_url+search_query+'" target="_blank" class="link-light">'+t+"</a></span> ")})),e.length>1&&o.length>0){const e="?command=search&col=5&q=%5C%22"+n.name+"%5C%22";o+='<span class="badge bg-info" ><a href="./'+e+'" target="_blank" class="link-light">Show all</a></span> '}return o}},{data:"internal",render:function(e,t,n,a){return result='<input class="form-check-input internal-checkbox" type="checkbox" '+(e?"checked":"")+">",result}},{data:"used_by",visible:!1,searchable:!1,render:function(e,t,n,r){return result="",a(e).each((function(e,t){t.length>0&&(result.length>1&&(result+=", "),result+=t)})),result}}],initComplete:function(){a("#search_bar").val(i),s(),a.fn.dataTable.ext.search.push((function(e,t,n){return function(e){return search_tree.evaluate(e,[!0,!0,!0])}(t)})),this.api().draw()}});t.column(4).visible(!1),new a.fn.dataTable.ColReorder(t,{});let n=a("#search_bar");n.keypress((function(e){13===e.which&&(s(),t.draw())})),new Awesomplete(n[0],{filter:function(e,t){let n=!1;return(t.split(":").length-1)%2==1&&(n=Awesomplete.FILTER_CONTAINS(e,t.match(/[^:]*$/)[0])),n},item:function(e,t){return Awesomplete.ITEM(e,t.match(/(:)([\S]*$)/)[2])},replace:function(e){const t=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=t+e},list:c,minChars:1,autoFirst:!0}),e.find("tbody").on("click","a.modal-opener",(function(e){e.preventDefault();let n=t.row(a(e.target).parent()).data(),r=t.row(a(e.target).parent()).index(),o=a(".modal-content");l.getOrCreateInstance(a("#tag_modal")).show(),a("#modal_associated_row_index").val(r),a("#tag_name_old").val(n.name),a("#occurences").val(n.used_by),a("#tag_modal_title").html("Tag: "+n.name),a("#tag_name").val(n.name),a("#tag_color").val(n.color),a("#tag-description").val(n.description),a("#tag_internal").prop("checked",n.internal),o.LoadingOverlay("hide")})),a("#save_tag_modal").click((function(){!function(e){let t=a(".modal-content");t.LoadingOverlay("show");let n=a("#tag_name").val(),r=a("#tag_name_old").val(),o=a("#occurences").val(),l=a("#tag_color").val(),i=parseInt(a("#modal_associated_row_index").val()),c=a("#tag-description").val(),s=a("#tag_internal").prop("checked");a.post("api/tag/update",{name:n,name_old:r,occurences:o,color:l,description:c,internal:s},(function(n){t.LoadingOverlay("hide",!0),!1===n.success?alert(n.errormsg):n.rebuild_table?location.reload():(e.row(i).data(n.data).draw(),a("#tag_modal").modal("hide"))}))}(t)})),t.on("click",".internal-checkbox",(function(e){e.preventDefault();let n=e.currentTarget,r=t.row(n.parentNode).data();a.ajax({type:"POST",url:"api/tag/update",data:{name:r.name,name_old:r.name,occurences:r.used_by,color:r.color,description:r.description,internal:n.checked},success:function(e){!1!==e.success?(n.checked=e.data.internal,r.internal=e.data.internal):alert(e.errormsg)}})})),a(".delete_tag").bootstrapConfirmButton({onConfirm:function(){d(a(this).attr("name"))}}),r(a("#tag-description")),a("#tag_modal").on("shown.bs.modal",(function(e){r.update(a("#tag-description"))})),a(".clear-all-filters").click((function(){a("#search_bar").val("").effect("highlight",{color:"green"},500),s(),t.draw()})),a("#add-standard-tags").click((function(){a.post("api/tag/add_standard",{},(function(e){location.reload()}))}))}))},3682:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a,r,o="function"==typeof Map?new Map:(a=[],r=[],{has:function(e){return a.indexOf(e)>-1},get:function(e){return r[a.indexOf(e)]},set:function(e,t){-1===a.indexOf(e)&&(a.push(e),r.push(t))},delete:function(e){var t=a.indexOf(e);t>-1&&(a.splice(t,1),r.splice(t,1))}}),l=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(a){l=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function i(e){var t=o.get(e);t&&t.destroy()}function c(e){var t=o.get(e);t&&t.update()}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((s=function(e){return e}).destroy=function(e){return e},s.update=function(e){return e}):((s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t,n=null,a=null,r=null,i=function(){e.clientWidth!==a&&u()},c=function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",u,!1),e.removeEventListener("keyup",u,!1),e.removeEventListener("autosize:destroy",c,!1),e.removeEventListener("autosize:update",u,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",u,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",u,!1),e.addEventListener("autosize:update",u,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:c,update:u}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),u()}function s(t){var n=e.style.width;e.style.width="0px",e.style.width=n,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",a=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),r&&(document.documentElement.scrollTop=r)}}function u(){d();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),a="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(a<t?"hidden"===n.overflowY&&(s("scroll"),d(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(s("hidden"),d(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==a){r=a;var o=l("autosize:resized");try{e.dispatchEvent(o)}catch(e){}}}}(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],c),e});const d=s}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,r,o)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,r,o]=e[d],i=!0,c=0;c<n.length;c++)(!1&o||l>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(i=!1,o<l&&(l=o));if(i){e.splice(d--,1);var s=r();void 0!==s&&(t=s)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=81,(()=>{var e={81:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[l,i,c]=n,s=0;if(l.some((t=>0!==e[t]))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var d=c(a)}for(t&&t(n);s<l.length;s++)o=l[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self.webpackChunkhanfor=self.webpackChunkhanfor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var r=a.O(void 0,[351],(()=>a(692)));r=a.O(r)})();