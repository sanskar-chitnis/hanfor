(()=>{var e,a={692:(e,a,t)=>{var n=t(9755);t(1388),t(4712),t(3333),t(2993),t(944),t(3889),t(7312),t(2106),t(9570),t(7175);const r=t(9367),{SearchNode:o}=t(3024),{Modal:l}=t(4712);let c=sessionStorage.getItem("tag_search_string"),i=[":AND:",":OR:",":NOT:",":COL_INDEX_00:",":COL_INDEX_01:",":COL_INDEX_02:"];function s(){c=n("#search_bar").val().trim(),sessionStorage.setItem("tag_search_string",c),search_tree=o.fromQuery(c)}function d(e){let a=n(".modal-content");a.LoadingOverlay("show");let t=n("#tag_name").val(),r=n("#occurences").val();n.ajax({type:"DELETE",url:"api/tag/del_tag",data:{name:t,occurences:r},success:function(e){a.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):e.rebuild_table?location.reload():(tagsDataTable.row(associated_row_id).data(e.data).draw(),l.getOrCreateInstance(document.getElementById("tag_modal")).hide())}})}n(document).ready((function(){let e=n("#tags-table"),a=e.DataTable({paging:!0,stateSave:!0,pageLength:50,responsive:!0,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/tag/gets",deferRender:!0,columns:[{data:"name",render:function(e,a,t,n){return result='<a class="modal-opener" href="#">'+e+"</span></br>",result}},{data:"description",render:function(e,a,t,n){return result='<div class="white-space-pre">'+e+"</div>",result}},{data:"used_by",render:function(e,a,t,r){let o="";if(n(e).each((function(e,a){a.length>0&&(search_query="?command=search&col=2&q=%5C%22"+a+"%5C%22",o+='<span class="badge bg-info" style="background-color: '+t.color+'"><a href="'+base_url+search_query+'" target="_blank" class="link-light">'+a+"</a></span> ")})),e.length>1&&o.length>0){const e="?command=search&col=5&q=%5C%22"+t.name+"%5C%22";o+='<span class="badge bg-info" style="background-color: #4275d8"><a href="./'+e+'" target="_blank" class="link-light">Show all</a></span> '}return o}},{data:"internal",render:function(e,a,t,n){return result='<input class="form-check-input internal-checkbox" type="checkbox" '+(e?"checked":"")+">",result}},{data:"used_by",visible:!1,searchable:!1,render:function(e,a,t,r){return result="",n(e).each((function(e,a){a.length>0&&(result.length>1&&(result+=", "),result+=a)})),result}}],initComplete:function(){n("#search_bar").val(c),s(),n.fn.dataTable.ext.search.push((function(e,a,t){return function(e){return search_tree.evaluate(e,[!0,!0,!0])}(a)})),this.api().draw()}});a.column(4).visible(!1),new n.fn.dataTable.ColReorder(a,{});let t=n("#search_bar");t.keypress((function(e){13===e.which&&(s(),a.draw())})),new Awesomplete(t[0],{filter:function(e,a){let t=!1;return(a.split(":").length-1)%2==1&&(t=Awesomplete.FILTER_CONTAINS(e,a.match(/[^:]*$/)[0])),t},item:function(e,a){return Awesomplete.ITEM(e,a.match(/(:)([\S]*$)/)[2])},replace:function(e){const a=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=a+e},list:i,minChars:1,autoFirst:!0}),e.find("tbody").on("click","a.modal-opener",(function(e){e.preventDefault();let t=a.row(n(e.target).parent()).data(),r=a.row(n(e.target).parent()).index(),o=n(".modal-content");l.getOrCreateInstance(n("#tag_modal")).show(),n("#modal_associated_row_index").val(r),n("#tag_name_old").val(t.name),n("#occurences").val(t.used_by),n("#tag_modal_title").html("Tag: "+t.name),n("#tag_name").val(t.name),n("#tag_color").val(t.color),n("#tag-description").val(t.description),n("#tag_internal").prop("checked",t.internal),o.LoadingOverlay("hide")})),n("#save_tag_modal").click((function(){!function(e){let a=n(".modal-content");a.LoadingOverlay("show");let t=n("#tag_name").val(),r=n("#tag_name_old").val(),o=n("#occurences").val(),l=n("#tag_color").val(),c=parseInt(n("#modal_associated_row_index").val()),i=n("#tag-description").val(),s=n("#tag_internal").prop("checked");n.post("api/tag/update",{name:t,name_old:r,occurences:o,color:l,description:i,internal:s},(function(t){a.LoadingOverlay("hide",!0),!1===t.success?alert(t.errormsg):t.rebuild_table?location.reload():(e.row(c).data(t.data).draw(),n("#tag_modal").modal("hide"))}))}(a)})),a.on("click",".internal-checkbox",(function(e){e.preventDefault();let t=e.currentTarget,r=a.row(t.parentNode).data();n.ajax({type:"POST",url:"api/tag/update",data:{name:r.name,name_old:r.name,occurences:r.used_by,color:r.color,description:r.description,internal:t.checked},success:function(e){!1!==e.success?(t.checked=e.data.internal,r.internal=e.data.internal):alert(e.errormsg)}})})),n(".delete_tag").bootstrapConfirmButton({onConfirm:function(){d(n(this).attr("name"))}}),r(n("#tag-description")),n("#tag_modal").on("shown.bs.modal",(function(e){r.update(n("#tag-description"))})),n(".clear-all-filters").click((function(){n("#search_bar").val("").effect("highlight",{color:"green"},500),s(),a.draw()})),n("#add-standard-tags").click((function(){n.post("api/tag/add_standard",{},(function(e){location.reload()}))}))}))}},t={};function n(e){var r=t[e];if(void 0!==r)return r.exports;var o=t[e]={id:e,exports:{}};return a[e].call(o.exports,o,o.exports,n),o.exports}n.m=a,e=[],n.O=(a,t,r,o)=>{if(!t){var l=1/0;for(d=0;d<e.length;d++){for(var[t,r,o]=e[d],c=!0,i=0;i<t.length;i++)(!1&o||l>=o)&&Object.keys(n.O).every((e=>n.O[e](t[i])))?t.splice(i--,1):(c=!1,o<l&&(l=o));if(c){e.splice(d--,1);var s=r();void 0!==s&&(a=s)}}return a}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[t,r,o]},n.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return n.d(a,{a}),a},n.d=(e,a)=>{for(var t in a)n.o(a,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},n.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=81,(()=>{var e={81:0};n.O.j=a=>0===e[a];var a=(a,t)=>{var r,o,[l,c,i]=t,s=0;if(l.some((a=>0!==e[a]))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(i)var d=i(n)}for(a&&a(t);s<l.length;s++)o=l[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},t=self.webpackChunkhanfor=self.webpackChunkhanfor||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})(),n.nc=void 0;var r=n.O(void 0,[351],(()=>n(692)));r=n.O(r)})();